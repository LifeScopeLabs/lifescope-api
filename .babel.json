{
  "{\"filename\":\"/app/scripts/seed.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/scripts\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongodb",
            "imported": [
              "MongoClient"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "MongoClient",
                "local": "MongoClient"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "path"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/scripts/seed.js",
      "filenameRelative": "/app/scripts/seed.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "seed.js",
      "sourceFileName": "seed.js",
      "sourceRoot": "/app/scripts",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/scripts",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "seed"
    },
    "ignored": false,
    "code": "'use strict';\n\nlet run = (() => {\n  var _ref = _asyncToGenerator(function* () {\n    db = yield _mongodb.MongoClient.connect(process.env.MONGODB_URI, { promiseLibrary: Promise });\n\n    console.log(`Starting seed...`);\n\n    const seedFile = _path2.default.resolve('./schema/data/seed.js');\n    try {\n      yield new Promise(function(resolve, reject) {\n        _fs2.default.access(seedFile, _fs2.default.F_OK, function(err) {\n          if (err) reject(err);else resolve();\n        });\n      });\n\n      // $FlowFixMe\n      const seedFn = require(seedFile).default;\n      yield seedFn(db); // eslint-disable-line\n    } catch (e) {\n      if (e.code === 'MODULE_NOT_FOUND' || e.code === 'ENOENT') {\n        console.log(`  file '${seedFile}' not found. Skipping...`);\n      } else {\n        console.log(e);\n      }\n    }\n\n    console.log('Seed competed!');\n    db.close();\n  });\n\n  return function run() {\n    return _ref.apply(this, arguments);\n  };\n})();\n\nvar _mongodb = require('mongodb');\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function() { var gen = fn.apply(this, arguments); return new Promise(function(resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function(value) { step(\"next\", value); }, function(err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n/* eslint-disable no-await-in-loop */\n// This script scans `schema/data` folder for `schema/data/seed.js` files and run them for seeding DB.\n\nlet db;\n\nrun().catch(e => {\n  console.log(e);\n  process.exit(0);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZWQuanMiXSwibmFtZXMiOlsiZGIiLCJjb25uZWN0IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwicHJvbWlzZUxpYnJhcnkiLCJQcm9taXNlIiwiY29uc29sZSIsImxvZyIsInNlZWRGaWxlIiwicmVzb2x2ZSIsInJlamVjdCIsImFjY2VzcyIsIkZfT0siLCJlcnIiLCJzZWVkRm4iLCJyZXF1aXJlIiwiZGVmYXVsdCIsImUiLCJjb2RlIiwiY2xvc2UiLCJydW4iLCJjYXRjaCIsImV4aXQiXSwibWFwcGluZ3MiOiI7OzsrQkFXQSxhQUFxQjtBQUNuQkEsU0FBSyxNQUFNLHFCQUFZQyxPQUFaLENBQW9CQyxRQUFRQyxHQUFSLENBQVlDLFdBQWhDLEVBQTZDLEVBQUVDLGdCQUFnQkMsT0FBbEIsRUFBN0MsQ0FBWDs7QUFFQUMsWUFBUUMsR0FBUixDQUFhLGtCQUFiOztBQUVBLFVBQU1DLFdBQVcsZUFBS0MsT0FBTCxDQUFhLHVCQUFiLENBQWpCO0FBQ0EsUUFBSTtBQUNGLFlBQU0sSUFBSUosT0FBSixDQUFZLFVBQUNJLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUNyQyxxQkFBR0MsTUFBSCxDQUFVSCxRQUFWLEVBQW9CLGFBQUdJLElBQXZCLEVBQTZCLGVBQU87QUFDbEMsY0FBSUMsR0FBSixFQUFTSCxPQUFPRyxHQUFQLEVBQVQsS0FDS0o7QUFDTixTQUhEO0FBSUQsT0FMSyxDQUFOOztBQU9BO0FBQ0EsWUFBTUssU0FBU0MsUUFBUVAsUUFBUixFQUFrQlEsT0FBakM7QUFDQSxZQUFNRixPQUFPZixFQUFQLENBQU4sQ0FWRSxDQVVnQjtBQUNuQixLQVhELENBV0UsT0FBT2tCLENBQVAsRUFBVTtBQUNWLFVBQUlBLEVBQUVDLElBQUYsS0FBVyxrQkFBWCxJQUFpQ0QsRUFBRUMsSUFBRixLQUFXLFFBQWhELEVBQTBEO0FBQ3hEWixnQkFBUUMsR0FBUixDQUFhLFdBQVVDLFFBQVMsMEJBQWhDO0FBQ0QsT0FGRCxNQUVPO0FBQ0xGLGdCQUFRQyxHQUFSLENBQVlVLENBQVo7QUFDRDtBQUNGOztBQUVEWCxZQUFRQyxHQUFSLENBQVksZ0JBQVo7QUFDQVIsT0FBR29CLEtBQUg7QUFDRCxHOztrQkEzQmNDLEc7Ozs7O0FBUGY7O0FBRUE7Ozs7QUFDQTs7Ozs7OztBQU5BO0FBQ0E7O0FBT0EsSUFBSXJCLEVBQUo7O0FBK0JBcUIsTUFBTUMsS0FBTixDQUFZSixLQUFLO0FBQ2ZYLFVBQVFDLEdBQVIsQ0FBWVUsQ0FBWjtBQUNBaEIsVUFBUXFCLElBQVIsQ0FBYSxDQUFiO0FBQ0QsQ0FIRCIsImZpbGUiOiJzZWVkLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NyaXB0cyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1hd2FpdC1pbi1sb29wICovXG4vLyBUaGlzIHNjcmlwdCBzY2FucyBgc2NoZW1hL2RhdGFgIGZvbGRlciBmb3IgYHNjaGVtYS9kYXRhL3NlZWQuanNgIGZpbGVzIGFuZCBydW4gdGhlbSBmb3Igc2VlZGluZyBEQi5cblxuaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcblxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuXG5sZXQgZGI7XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgZGIgPSBhd2FpdCBNb25nb0NsaWVudC5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJLCB7IHByb21pc2VMaWJyYXJ5OiBQcm9taXNlIH0pO1xuXG4gIGNvbnNvbGUubG9nKGBTdGFydGluZyBzZWVkLi4uYCk7XG5cbiAgY29uc3Qgc2VlZEZpbGUgPSBwYXRoLnJlc29sdmUoJy4vc2NoZW1hL2RhdGEvc2VlZC5qcycpO1xuICB0cnkge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGZzLmFjY2VzcyhzZWVkRmlsZSwgZnMuRl9PSywgZXJyID0+IHtcbiAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XG4gICAgICAgIGVsc2UgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgY29uc3Qgc2VlZEZuID0gcmVxdWlyZShzZWVkRmlsZSkuZGVmYXVsdDtcbiAgICBhd2FpdCBzZWVkRm4oZGIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZS5jb2RlID09PSAnTU9EVUxFX05PVF9GT1VORCcgfHwgZS5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgY29uc29sZS5sb2coYCAgZmlsZSAnJHtzZWVkRmlsZX0nIG5vdCBmb3VuZC4gU2tpcHBpbmcuLi5gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coJ1NlZWQgY29tcGV0ZWQhJyk7XG4gIGRiLmNsb3NlKCk7XG59XG5cbnJ1bigpLmNhdGNoKGUgPT4ge1xuICBjb25zb2xlLmxvZyhlKTtcbiAgcHJvY2Vzcy5leGl0KDApO1xufSk7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "seed.js"
      ],
      "names": [
        "db",
        "connect",
        "process",
        "env",
        "MONGODB_URI",
        "promiseLibrary",
        "Promise",
        "console",
        "log",
        "seedFile",
        "resolve",
        "reject",
        "access",
        "F_OK",
        "err",
        "seedFn",
        "require",
        "default",
        "e",
        "code",
        "close",
        "run",
        "catch",
        "exit"
      ],
      "mappings": ";;;+BAWA,aAAqB;AACnBA,SAAK,MAAM,qBAAYC,OAAZ,CAAoBC,QAAQC,GAAR,CAAYC,WAAhC,EAA6C,EAAEC,gBAAgBC,OAAlB,EAA7C,CAAX;;AAEAC,YAAQC,GAAR,CAAa,kBAAb;;AAEA,UAAMC,WAAW,eAAKC,OAAL,CAAa,uBAAb,CAAjB;AACA,QAAI;AACF,YAAM,IAAIJ,OAAJ,CAAY,UAACI,OAAD,EAAUC,MAAV,EAAqB;AACrC,qBAAGC,MAAH,CAAUH,QAAV,EAAoB,aAAGI,IAAvB,EAA6B,eAAO;AAClC,cAAIC,GAAJ,EAASH,OAAOG,GAAP,EAAT,KACKJ;AACN,SAHD;AAID,OALK,CAAN;;AAOA;AACA,YAAMK,SAASC,QAAQP,QAAR,EAAkBQ,OAAjC;AACA,YAAMF,OAAOf,EAAP,CAAN,CAVE,CAUgB;AACnB,KAXD,CAWE,OAAOkB,CAAP,EAAU;AACV,UAAIA,EAAEC,IAAF,KAAW,kBAAX,IAAiCD,EAAEC,IAAF,KAAW,QAAhD,EAA0D;AACxDZ,gBAAQC,GAAR,CAAa,WAAUC,QAAS,0BAAhC;AACD,OAFD,MAEO;AACLF,gBAAQC,GAAR,CAAYU,CAAZ;AACD;AACF;;AAEDX,YAAQC,GAAR,CAAY,gBAAZ;AACAR,OAAGoB,KAAH;AACD,G;;kBA3BcC,G;;;;;AAPf;;AAEA;;;;AACA;;;;;;;AANA;AACA;;AAOA,IAAIrB,EAAJ;;AA+BAqB,MAAMC,KAAN,CAAYJ,KAAK;AACfX,UAAQC,GAAR,CAAYU,CAAZ;AACAhB,UAAQqB,IAAR,CAAa,CAAb;AACD,CAHD",
      "file": "seed.js",
      "sourceRoot": "/app/scripts",
      "sourcesContent": [
        "/* @flow */\n/* eslint-disable no-await-in-loop */\n// This script scans `schema/data` folder for `schema/data/seed.js` files and run them for seeding DB.\n\nimport { MongoClient } from 'mongodb';\n\nimport path from 'path';\nimport fs from 'fs';\n\nlet db;\n\nasync function run() {\n  db = await MongoClient.connect(process.env.MONGODB_URI, { promiseLibrary: Promise });\n\n  console.log(`Starting seed...`);\n\n  const seedFile = path.resolve('./schema/data/seed.js');\n  try {\n    await new Promise((resolve, reject) => {\n      fs.access(seedFile, fs.F_OK, err => {\n        if (err) reject(err);\n        else resolve();\n      });\n    });\n\n    // $FlowFixMe\n    const seedFn = require(seedFile).default;\n    await seedFn(db); // eslint-disable-line\n  } catch (e) {\n    if (e.code === 'MODULE_NOT_FOUND' || e.code === 'ENOENT') {\n      console.log(`  file '${seedFile}' not found. Skipping...`);\n    } else {\n      console.log(e);\n    }\n  }\n\n  console.log('Seed competed!');\n  db.close();\n}\n\nrun().catch(e => {\n  console.log(e);\n  process.exit(0);\n});"
      ]
    },
    "mtime": 1521190068267
  },
  "{\"filename\":\"/app/schema/data/seed.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/data\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          },
          {
            "source": "mongodb",
            "imported": [
              "ObjectID"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ObjectID",
                "local": "ObjectID"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/schema/data/seed.js",
      "filenameRelative": "/app/schema/data/seed.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "seed.js",
      "sourceFileName": "seed.js",
      "sourceRoot": "/app/schema/data",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/data",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "seed"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _mongodb = require('mongodb');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function() { var gen = fn.apply(this, arguments); return new Promise(function(resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function(value) { step(\"next\", value); }, function(err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst collectionPrefix = 'user_';\n\nexports.default = (() => {\n  var _ref = _asyncToGenerator(function* (db) {\n    const files = ['users'];\n\n    const collectionNames = (yield db.listCollections().toArray()).map(function(o) {\n      return o.name;\n    });\n\n    return Promise.all(files.map(function(file) {\n      return _asyncToGenerator(function* () {\n        const colName = `${collectionPrefix || ''}${file}`;\n        const data = JSON.parse(_fs2.default.readFileSync(`${__dirname}/${file}.json`, 'utf8'));\n        data.forEach(function(d, i) {\n          data[i]._id = _mongodb.ObjectID.createFromHexString(data[i]._id);\n        });\n        if (collectionNames.indexOf(colName) > -1) {\n          console.log(`  '${colName}' dropped`);\n          yield db.dropCollection(colName);\n        }\n        const result = yield db.collection(colName).insertMany(data);\n        console.log(`  '${colName}' created with ${result.insertedCount} records`);\n      })();\n    }));\n  });\n\n  function seed(_x) {\n    return _ref.apply(this, arguments);\n  }\n\n  return seed;\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZWQuanMiXSwibmFtZXMiOlsiY29sbGVjdGlvblByZWZpeCIsImRiIiwiZmlsZXMiLCJjb2xsZWN0aW9uTmFtZXMiLCJsaXN0Q29sbGVjdGlvbnMiLCJ0b0FycmF5IiwibWFwIiwibyIsIm5hbWUiLCJQcm9taXNlIiwiYWxsIiwiY29sTmFtZSIsImZpbGUiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwicmVhZEZpbGVTeW5jIiwiX19kaXJuYW1lIiwiZm9yRWFjaCIsImQiLCJpIiwiX2lkIiwiY3JlYXRlRnJvbUhleFN0cmluZyIsImluZGV4T2YiLCJjb25zb2xlIiwibG9nIiwiZHJvcENvbGxlY3Rpb24iLCJyZXN1bHQiLCJjb2xsZWN0aW9uIiwiaW5zZXJ0TWFueSIsImluc2VydGVkQ291bnQiLCJzZWVkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFFQTs7OztBQUNBOzs7Ozs7QUFFQSxNQUFNQSxtQkFBbUIsT0FBekI7OzsrQkFFZSxXQUFvQkMsRUFBcEIsRUFBNkI7QUFDMUMsVUFBTUMsUUFBUSxDQUFDLE9BQUQsQ0FBZDs7QUFFQSxVQUFNQyxrQkFBa0IsQ0FBQyxNQUFNRixHQUFHRyxlQUFILEdBQXFCQyxPQUFyQixFQUFQLEVBQXVDQyxHQUF2QyxDQUEyQztBQUFBLGFBQUtDLEVBQUVDLElBQVA7QUFBQSxLQUEzQyxDQUF4Qjs7QUFFQSxXQUFPQyxRQUFRQyxHQUFSLENBQ0xSLE1BQU1JLEdBQU4sQ0FBVSxnQkFBUTtBQUNoQixhQUFPLGtCQUFDLGFBQWlCO0FBQ3ZCLGNBQU1LLFVBQVcsR0FBRVgsb0JBQW9CLEVBQUcsR0FBRVksSUFBSyxFQUFqRDtBQUNBLGNBQU1DLE9BQU9DLEtBQUtDLEtBQUwsQ0FBVyxhQUFHQyxZQUFILENBQWlCLEdBQUVDLFNBQVUsSUFBR0wsSUFBSyxPQUFyQyxFQUE2QyxNQUE3QyxDQUFYLENBQWI7QUFDQUMsYUFBS0ssT0FBTCxDQUFhLFVBQUNDLENBQUQsRUFBSUMsQ0FBSixFQUFVO0FBQ3JCUCxlQUFLTyxDQUFMLEVBQVFDLEdBQVIsR0FBYyxrQkFBU0MsbUJBQVQsQ0FBNkJULEtBQUtPLENBQUwsRUFBUUMsR0FBckMsQ0FBZDtBQUNELFNBRkQ7QUFHQSxZQUFJbEIsZ0JBQWdCb0IsT0FBaEIsQ0FBd0JaLE9BQXhCLElBQW1DLENBQUMsQ0FBeEMsRUFBMkM7QUFDekNhLGtCQUFRQyxHQUFSLENBQWEsTUFBS2QsT0FBUSxXQUExQjtBQUNBLGdCQUFNVixHQUFHeUIsY0FBSCxDQUFrQmYsT0FBbEIsQ0FBTjtBQUNEO0FBQ0QsY0FBTWdCLFNBQVMsTUFBTTFCLEdBQUcyQixVQUFILENBQWNqQixPQUFkLEVBQXVCa0IsVUFBdkIsQ0FBa0NoQixJQUFsQyxDQUFyQjtBQUNBVyxnQkFBUUMsR0FBUixDQUFhLE1BQUtkLE9BQVEsa0JBQWlCZ0IsT0FBT0csYUFBYyxVQUFoRTtBQUNELE9BWk0sR0FBUDtBQWFELEtBZEQsQ0FESyxDQUFQO0FBaUJELEc7O1dBdEI2QkMsSTs7OztTQUFBQSxJIiwiZmlsZSI6InNlZWQuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvZGF0YSIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgeyBPYmplY3RJRCB9IGZyb20gJ21vbmdvZGInO1xuXG5jb25zdCBjb2xsZWN0aW9uUHJlZml4ID0gJ3VzZXJfJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gc2VlZChkYjogYW55KSB7XG4gIGNvbnN0IGZpbGVzID0gWyd1c2VycyddO1xuXG4gIGNvbnN0IGNvbGxlY3Rpb25OYW1lcyA9IChhd2FpdCBkYi5saXN0Q29sbGVjdGlvbnMoKS50b0FycmF5KCkpLm1hcChvID0+IG8ubmFtZSk7XG5cbiAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgIGZpbGVzLm1hcChmaWxlID0+IHtcbiAgICAgIHJldHVybiAoYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGNvbE5hbWUgPSBgJHtjb2xsZWN0aW9uUHJlZml4IHx8ICcnfSR7ZmlsZX1gO1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoYCR7X19kaXJuYW1lfS8ke2ZpbGV9Lmpzb25gLCAndXRmOCcpKTtcbiAgICAgICAgZGF0YS5mb3JFYWNoKChkLCBpKSA9PiB7XG4gICAgICAgICAgZGF0YVtpXS5faWQgPSBPYmplY3RJRC5jcmVhdGVGcm9tSGV4U3RyaW5nKGRhdGFbaV0uX2lkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uTmFtZXMuaW5kZXhPZihjb2xOYW1lKSA+IC0xKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYCAgJyR7Y29sTmFtZX0nIGRyb3BwZWRgKTtcbiAgICAgICAgICBhd2FpdCBkYi5kcm9wQ29sbGVjdGlvbihjb2xOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKGNvbE5hbWUpLmluc2VydE1hbnkoZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgICcke2NvbE5hbWV9JyBjcmVhdGVkIHdpdGggJHtyZXN1bHQuaW5zZXJ0ZWRDb3VudH0gcmVjb3Jkc2ApO1xuICAgICAgfSkoKTtcbiAgICB9KVxuICApO1xufSJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "seed.js"
      ],
      "names": [
        "collectionPrefix",
        "db",
        "files",
        "collectionNames",
        "listCollections",
        "toArray",
        "map",
        "o",
        "name",
        "Promise",
        "all",
        "colName",
        "file",
        "data",
        "JSON",
        "parse",
        "readFileSync",
        "__dirname",
        "forEach",
        "d",
        "i",
        "_id",
        "createFromHexString",
        "indexOf",
        "console",
        "log",
        "dropCollection",
        "result",
        "collection",
        "insertMany",
        "insertedCount",
        "seed"
      ],
      "mappings": ";;;;;;AAEA;;;;AACA;;;;;;AAEA,MAAMA,mBAAmB,OAAzB;;;+BAEe,WAAoBC,EAApB,EAA6B;AAC1C,UAAMC,QAAQ,CAAC,OAAD,CAAd;;AAEA,UAAMC,kBAAkB,CAAC,MAAMF,GAAGG,eAAH,GAAqBC,OAArB,EAAP,EAAuCC,GAAvC,CAA2C;AAAA,aAAKC,EAAEC,IAAP;AAAA,KAA3C,CAAxB;;AAEA,WAAOC,QAAQC,GAAR,CACLR,MAAMI,GAAN,CAAU,gBAAQ;AAChB,aAAO,kBAAC,aAAiB;AACvB,cAAMK,UAAW,GAAEX,oBAAoB,EAAG,GAAEY,IAAK,EAAjD;AACA,cAAMC,OAAOC,KAAKC,KAAL,CAAW,aAAGC,YAAH,CAAiB,GAAEC,SAAU,IAAGL,IAAK,OAArC,EAA6C,MAA7C,CAAX,CAAb;AACAC,aAAKK,OAAL,CAAa,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACrBP,eAAKO,CAAL,EAAQC,GAAR,GAAc,kBAASC,mBAAT,CAA6BT,KAAKO,CAAL,EAAQC,GAArC,CAAd;AACD,SAFD;AAGA,YAAIlB,gBAAgBoB,OAAhB,CAAwBZ,OAAxB,IAAmC,CAAC,CAAxC,EAA2C;AACzCa,kBAAQC,GAAR,CAAa,MAAKd,OAAQ,WAA1B;AACA,gBAAMV,GAAGyB,cAAH,CAAkBf,OAAlB,CAAN;AACD;AACD,cAAMgB,SAAS,MAAM1B,GAAG2B,UAAH,CAAcjB,OAAd,EAAuBkB,UAAvB,CAAkChB,IAAlC,CAArB;AACAW,gBAAQC,GAAR,CAAa,MAAKd,OAAQ,kBAAiBgB,OAAOG,aAAc,UAAhE;AACD,OAZM,GAAP;AAaD,KAdD,CADK,CAAP;AAiBD,G;;WAtB6BC,I;;;;SAAAA,I",
      "file": "seed.js",
      "sourceRoot": "/app/schema/data",
      "sourcesContent": [
        "/* @flow */\n\nimport fs from 'fs';\nimport { ObjectID } from 'mongodb';\n\nconst collectionPrefix = 'user_';\n\nexport default async function seed(db: any) {\n  const files = ['users'];\n\n  const collectionNames = (await db.listCollections().toArray()).map(o => o.name);\n\n  return Promise.all(\n    files.map(file => {\n      return (async function() {\n        const colName = `${collectionPrefix || ''}${file}`;\n        const data = JSON.parse(fs.readFileSync(`${__dirname}/${file}.json`, 'utf8'));\n        data.forEach((d, i) => {\n          data[i]._id = ObjectID.createFromHexString(data[i]._id);\n        });\n        if (collectionNames.indexOf(colName) > -1) {\n          console.log(`  '${colName}' dropped`);\n          await db.dropCollection(colName);\n        }\n        const result = await db.collection(colName).insertMany(data);\n        console.log(`  '${colName}' created with ${result.insertedCount} records`);\n      })();\n    })\n  );\n}"
      ]
    },
    "mtime": 1521190125597
  },
  "{\"filename\":\"/app/server.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bitscoop-sdk",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BitScoop"
              }
            ]
          },
          {
            "source": "body-parser",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "bodyParser"
              }
            ]
          },
          {
            "source": "config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "cors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "cors"
              }
            ]
          },
          {
            "source": "cookie-parser",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "cookieParser"
              }
            ]
          },
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "graphql-playground-middleware-express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "expressPlayground"
              }
            ]
          },
          {
            "source": "apollo-server-express",
            "imported": [
              "graphqlExpress",
              "graphiqlExpress"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "graphqlExpress",
                "local": "graphqlExpress"
              },
              {
                "kind": "named",
                "imported": "graphiqlExpress",
                "local": "graphiqlExpress"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "./lib/rest/complete-connection",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "completeConnection"
              }
            ]
          },
          {
            "source": "./middleware/cookie-authorization",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "cookieAuthorization"
              }
            ]
          },
          {
            "source": "./schema",
            "imported": [
              "crudAPI"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "crudAPI",
                "local": "crudAPI"
              }
            ]
          },
          {
            "source": "./lib/validator",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "validator"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/server.js",
      "filenameRelative": "/app/server.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "server.js",
      "sourceFileName": "server.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "server"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _bitscoopSdk = require('bitscoop-sdk');\n\nvar _bitscoopSdk2 = _interopRequireDefault(_bitscoopSdk);\n\nvar _bodyParser = require('body-parser');\n\nvar _bodyParser2 = _interopRequireDefault(_bodyParser);\n\nvar _config = require('config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _cors = require('cors');\n\nvar _cors2 = _interopRequireDefault(_cors);\n\nvar _cookieParser = require('cookie-parser');\n\nvar _cookieParser2 = _interopRequireDefault(_cookieParser);\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _graphqlPlaygroundMiddlewareExpress = require('graphql-playground-middleware-express');\n\nvar _graphqlPlaygroundMiddlewareExpress2 = _interopRequireDefault(_graphqlPlaygroundMiddlewareExpress);\n\nvar _apolloServerExpress = require('apollo-server-express');\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _completeConnection = require('./lib/rest/complete-connection');\n\nvar _completeConnection2 = _interopRequireDefault(_completeConnection);\n\nvar _cookieAuthorization = require('./middleware/cookie-authorization');\n\nvar _cookieAuthorization2 = _interopRequireDefault(_cookieAuthorization);\n\nvar _schema = require('./schema');\n\nvar _validator = require('./lib/validator');\n\nvar _validator2 = _interopRequireDefault(_validator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function() { var gen = fn.apply(this, arguments); return new Promise(function(resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function(value) { step(\"next\", value); }, function(err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst MONGODB_URI = process.env.MONGODB_URI;\n\nconst Schema = _mongoose2.default.Schema;\nconst server = (0, _express2.default)();\nconst opts = {\n  autoReconnect: true,\n  reconnectTries: Number.MAX_VALUE,\n  reconnectInterval: 1000\n};\n\nconst bitscoop = new _bitscoopSdk2.default(process.env.BITSCOOP_API_KEY, {\n  allowUnauthorized: true\n});\n\nserver.use((0, _cors2.default)());\n\n_mongoose2.default.connect(MONGODB_URI, opts);\n\nconst mongooseConnect = _mongoose2.default.connection;\n\nmongooseConnect.on('error', e => {\n  if (e.message.code === 'ETIMEDOUT') {\n    console.log(e);\n    _mongoose2.default.connect(MONGODB_URI, opts);\n  }\n  console.log(e);\n});\n\nmongooseConnect.once('open', () => {\n  console.log(`MongoDB successfully connected to ${MONGODB_URI}`);\n});\n\n_validator2.default.load(_config2.default.validationSchemas).then((() => {\n  var _ref = _asyncToGenerator(function* (validate) {\n    global.env = {\n      bitscoop: bitscoop,\n      validate: validate\n    };\n\n    server.use(_schema.crudAPI.uri, _bodyParser2.default.json(), (0, _cookieParser2.default)(), _cookieAuthorization2.default, (0, _apolloServerExpress.graphqlExpress)(function(req, res) {\n      return {\n        schema: _schema.crudAPI.schema,\n        tracing: true,\n        context: { req, res },\n        // formatError: error => ({\n        //   message: error.message,\n        //   stack: !error.message.match(/for security reason/i) ? error.stack.split('\\n') : null,\n        // }),\n        formatError: function formatError(error) {\n          return {\n            message: error.message,\n            locations: error.locations,\n            stack: error.stack ? error.stack.split('\\n') : [],\n            path: error.path\n          };\n        }\n      };\n    }));\n\n    // server.use(\n\n    // http://localhost:3000/gql-i/\n    server.get(`${_schema.crudAPI.uri}-i`, (0, _apolloServerExpress.graphiqlExpress)({ endpointURL: _schema.crudAPI.uri }));\n\n    // http://localhost:3000/gql-p/\n    server.get(`${_schema.crudAPI.uri}-p`, (0, _graphqlPlaygroundMiddlewareExpress2.default)({ endpoint: _schema.crudAPI.uri }));\n\n    server.get('/connections/complete', _completeConnection2.default);\n\n    // http://localhost:3000/user/\n    server.listen(process.env.PORT);\n\n    console.log('PORT: ' + process.env.PORT);\n  });\n\n  return function(_x) {\n    return _ref.apply(this, arguments);\n  };\n})());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJTY2hlbWEiLCJzZXJ2ZXIiLCJvcHRzIiwiYXV0b1JlY29ubmVjdCIsInJlY29ubmVjdFRyaWVzIiwiTnVtYmVyIiwiTUFYX1ZBTFVFIiwicmVjb25uZWN0SW50ZXJ2YWwiLCJiaXRzY29vcCIsIkJJVFNDT09QX0FQSV9LRVkiLCJhbGxvd1VuYXV0aG9yaXplZCIsInVzZSIsImNvbm5lY3QiLCJtb25nb29zZUNvbm5lY3QiLCJjb25uZWN0aW9uIiwib24iLCJlIiwibWVzc2FnZSIsImNvZGUiLCJjb25zb2xlIiwibG9nIiwib25jZSIsImxvYWQiLCJ2YWxpZGF0aW9uU2NoZW1hcyIsInRoZW4iLCJ2YWxpZGF0ZSIsImdsb2JhbCIsInVyaSIsImpzb24iLCJyZXEiLCJyZXMiLCJzY2hlbWEiLCJ0cmFjaW5nIiwiY29udGV4dCIsImZvcm1hdEVycm9yIiwiZXJyb3IiLCJsb2NhdGlvbnMiLCJzdGFjayIsInNwbGl0IiwicGF0aCIsImdldCIsImVuZHBvaW50VVJMIiwiZW5kcG9pbnQiLCJsaXN0ZW4iLCJQT1JUIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7QUFFQTs7OztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBRUEsTUFBTUEsY0FBY0MsUUFBUUMsR0FBUixDQUFZRixXQUFoQzs7QUFFQSxNQUFNRyxTQUFTLG1CQUFTQSxNQUF4QjtBQUNBLE1BQU1DLFNBQVMsd0JBQWY7QUFDQSxNQUFNQyxPQUFPO0FBQ1hDLGlCQUFlLElBREo7QUFFWEMsa0JBQWdCQyxPQUFPQyxTQUZaO0FBR1hDLHFCQUFtQjtBQUhSLENBQWI7O0FBTUEsTUFBTUMsV0FBVywwQkFBYVYsUUFBUUMsR0FBUixDQUFZVSxnQkFBekIsRUFBMkM7QUFDM0RDLHFCQUFtQjtBQUR3QyxDQUEzQyxDQUFqQjs7QUFJQVQsT0FBT1UsR0FBUCxDQUFXLHFCQUFYOztBQUVBLG1CQUFTQyxPQUFULENBQWlCZixXQUFqQixFQUE4QkssSUFBOUI7O0FBRUEsTUFBTVcsa0JBQWtCLG1CQUFTQyxVQUFqQzs7QUFHQUQsZ0JBQWdCRSxFQUFoQixDQUFtQixPQUFuQixFQUE0QkMsS0FBSztBQUMvQixNQUFJQSxFQUFFQyxPQUFGLENBQVVDLElBQVYsS0FBbUIsV0FBdkIsRUFBb0M7QUFDbENDLFlBQVFDLEdBQVIsQ0FBWUosQ0FBWjtBQUNBLHVCQUFTSixPQUFULENBQWlCZixXQUFqQixFQUE4QkssSUFBOUI7QUFDRDtBQUNEaUIsVUFBUUMsR0FBUixDQUFZSixDQUFaO0FBQ0QsQ0FORDs7QUFRQUgsZ0JBQWdCUSxJQUFoQixDQUFxQixNQUFyQixFQUE2QixNQUFNO0FBQ2pDRixVQUFRQyxHQUFSLENBQWEscUNBQW9DdkIsV0FBWSxFQUE3RDtBQUNELENBRkQ7O0FBSUEsb0JBQVV5QixJQUFWLENBQWUsaUJBQU9DLGlCQUF0QixFQUNHQyxJQURIO0FBQUEsK0JBQ1EsV0FBZUMsUUFBZixFQUF5QjtBQUM3QkMsV0FBTzNCLEdBQVAsR0FBYTtBQUNYUyxnQkFBVUEsUUFEQztBQUVYaUIsZ0JBQVVBO0FBRkMsS0FBYjs7QUFLQXhCLFdBQU9VLEdBQVAsQ0FDRSxnQkFBUWdCLEdBRFYsRUFFRSxxQkFBV0MsSUFBWCxFQUZGLEVBR0UsNkJBSEYsaUNBS0UseUNBQWUsVUFBQ0MsR0FBRCxFQUFNQyxHQUFOO0FBQUEsYUFBZTtBQUM1QkMsZ0JBQVEsZ0JBQVFBLE1BRFk7QUFFNUJDLGlCQUFTLElBRm1CO0FBRzVCQyxpQkFBUyxFQUFFSixHQUFGLEVBQU9DLEdBQVAsRUFIbUI7QUFJNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQUkscUJBQWE7QUFBQSxpQkFBVTtBQUNyQmpCLHFCQUFTa0IsTUFBTWxCLE9BRE07QUFFckJtQix1QkFBV0QsTUFBTUMsU0FGSTtBQUdyQkMsbUJBQU9GLE1BQU1FLEtBQU4sR0FBY0YsTUFBTUUsS0FBTixDQUFZQyxLQUFaLENBQWtCLElBQWxCLENBQWQsR0FBd0MsRUFIMUI7QUFJckJDLGtCQUFNSixNQUFNSTtBQUpTLFdBQVY7QUFBQTtBQVJlLE9BQWY7QUFBQSxLQUFmLENBTEY7O0FBcUJBOztBQUVBO0FBQ0F0QyxXQUFPdUMsR0FBUCxDQUFZLEdBQUUsZ0JBQVFiLEdBQUksSUFBMUIsRUFBK0IsMENBQWdCLEVBQUVjLGFBQWEsZ0JBQVFkLEdBQXZCLEVBQWhCLENBQS9COztBQUVBO0FBQ0ExQixXQUFPdUMsR0FBUCxDQUFZLEdBQUUsZ0JBQVFiLEdBQUksSUFBMUIsRUFBK0Isa0RBQWtCLEVBQUVlLFVBQVUsZ0JBQVFmLEdBQXBCLEVBQWxCLENBQS9COztBQUVBMUIsV0FBT3VDLEdBQVAsQ0FBVyx1QkFBWDs7QUFHQTtBQUNBdkMsV0FBTzBDLE1BQVAsQ0FBYzdDLFFBQVFDLEdBQVIsQ0FBWTZDLElBQTFCOztBQUVBekIsWUFBUUMsR0FBUixDQUFZLFdBQVd0QixRQUFRQyxHQUFSLENBQVk2QyxJQUFuQztBQUNELEdBM0NIOztBQUFBO0FBQUE7QUFBQTtBQUFBIiwiZmlsZSI6InNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIvYXBwIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJpdFNjb29wIGZyb20gJ2JpdHNjb29wLXNkayc7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29uZmlnIGZyb20gJ2NvbmZpZyc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBleHByZXNzUGxheWdyb3VuZCBmcm9tICdncmFwaHFsLXBsYXlncm91bmQtbWlkZGxld2FyZS1leHByZXNzJztcbmltcG9ydCB7IGdyYXBocWxFeHByZXNzLCBncmFwaGlxbEV4cHJlc3MgfSBmcm9tICdhcG9sbG8tc2VydmVyLWV4cHJlc3MnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuaW1wb3J0IGNvbXBsZXRlQ29ubmVjdGlvbiBmcm9tICcuL2xpYi9yZXN0L2NvbXBsZXRlLWNvbm5lY3Rpb24nO1xuaW1wb3J0IGNvb2tpZUF1dGhvcml6YXRpb24gZnJvbSAnLi9taWRkbGV3YXJlL2Nvb2tpZS1hdXRob3JpemF0aW9uJztcbmltcG9ydCB7IGNydWRBUEkgfSBmcm9tICcuL3NjaGVtYSc7XG5pbXBvcnQgdmFsaWRhdG9yIGZyb20gJy4vbGliL3ZhbGlkYXRvcic7XG5cbmNvbnN0IE1PTkdPREJfVVJJID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XG5cbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcbmNvbnN0IHNlcnZlciA9IGV4cHJlc3MoKTtcbmNvbnN0IG9wdHMgPSB7XG4gIGF1dG9SZWNvbm5lY3Q6IHRydWUsXG4gIHJlY29ubmVjdFRyaWVzOiBOdW1iZXIuTUFYX1ZBTFVFLFxuICByZWNvbm5lY3RJbnRlcnZhbDogMTAwMCxcbn07XG5cbmNvbnN0IGJpdHNjb29wID0gbmV3IEJpdFNjb29wKHByb2Nlc3MuZW52LkJJVFNDT09QX0FQSV9LRVksIHtcblx0YWxsb3dVbmF1dGhvcml6ZWQ6IHRydWVcbn0pO1xuXG5zZXJ2ZXIudXNlKGNvcnMoKSk7XG5cbm1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIG9wdHMpO1xuXG5jb25zdCBtb25nb29zZUNvbm5lY3QgPSBtb25nb29zZS5jb25uZWN0aW9uO1xuXG5cbm1vbmdvb3NlQ29ubmVjdC5vbignZXJyb3InLCBlID0+IHtcbiAgaWYgKGUubWVzc2FnZS5jb2RlID09PSAnRVRJTUVET1VUJykge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIG9wdHMpO1xuICB9XG4gIGNvbnNvbGUubG9nKGUpO1xufSk7XG5cbm1vbmdvb3NlQ29ubmVjdC5vbmNlKCdvcGVuJywgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhgTW9uZ29EQiBzdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvICR7TU9OR09EQl9VUkl9YCk7XG59KTtcblxudmFsaWRhdG9yLmxvYWQoY29uZmlnLnZhbGlkYXRpb25TY2hlbWFzKVxuICAudGhlbihhc3luYyBmdW5jdGlvbih2YWxpZGF0ZSkge1xuICAgIGdsb2JhbC5lbnYgPSB7XG4gICAgICBiaXRzY29vcDogYml0c2Nvb3AsXG4gICAgICB2YWxpZGF0ZTogdmFsaWRhdGVcbiAgICB9O1xuICAgIFxuICAgIHNlcnZlci51c2UoXG4gICAgICBjcnVkQVBJLnVyaSwgXG4gICAgICBib2R5UGFyc2VyLmpzb24oKSwgXG4gICAgICBjb29raWVQYXJzZXIoKSxcbiAgICAgIGNvb2tpZUF1dGhvcml6YXRpb24sXG4gICAgICBncmFwaHFsRXhwcmVzcygocmVxLCByZXMpID0+ICh7IFxuICAgICAgICBzY2hlbWE6IGNydWRBUEkuc2NoZW1hLCBcbiAgICAgICAgdHJhY2luZzogdHJ1ZSxcbiAgICAgICAgY29udGV4dDogeyByZXEsIHJlcyB9LFxuICAgICAgICAvLyBmb3JtYXRFcnJvcjogZXJyb3IgPT4gKHtcbiAgICAgICAgLy8gICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAvLyAgIHN0YWNrOiAhZXJyb3IubWVzc2FnZS5tYXRjaCgvZm9yIHNlY3VyaXR5IHJlYXNvbi9pKSA/IGVycm9yLnN0YWNrLnNwbGl0KCdcXG4nKSA6IG51bGwsXG4gICAgICAgIC8vIH0pLFxuICAgICAgICBmb3JtYXRFcnJvcjogZXJyb3IgPT4gKHtcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIGxvY2F0aW9uczogZXJyb3IubG9jYXRpb25zLFxuICAgICAgICAgIHN0YWNrOiBlcnJvci5zdGFjayA/IGVycm9yLnN0YWNrLnNwbGl0KCdcXG4nKSA6IFtdLFxuICAgICAgICAgIHBhdGg6IGVycm9yLnBhdGhcbiAgICAgICAgfSlcbiAgICB9KSkpO1xuICBcbiAgICAvLyBzZXJ2ZXIudXNlKFxuXG4gICAgLy8gaHR0cDovL2xvY2FsaG9zdDozMDAwL2dxbC1pL1xuICAgIHNlcnZlci5nZXQoYCR7Y3J1ZEFQSS51cml9LWlgLCBncmFwaGlxbEV4cHJlc3MoeyBlbmRwb2ludFVSTDogY3J1ZEFQSS51cmkgfSkpO1xuXG4gICAgLy8gaHR0cDovL2xvY2FsaG9zdDozMDAwL2dxbC1wL1xuICAgIHNlcnZlci5nZXQoYCR7Y3J1ZEFQSS51cml9LXBgLCBleHByZXNzUGxheWdyb3VuZCh7IGVuZHBvaW50OiBjcnVkQVBJLnVyaSB9KSk7XG4gIFxuICAgIHNlcnZlci5nZXQoJy9jb25uZWN0aW9ucy9jb21wbGV0ZScsIGNvbXBsZXRlQ29ubmVjdGlvbik7XG4gIFxuXG4gICAgLy8gaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXIvXG4gICAgc2VydmVyLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JUKTtcblxuICAgIGNvbnNvbGUubG9nKCdQT1JUOiAnICsgcHJvY2Vzcy5lbnYuUE9SVCk7XG4gIH0pXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "MONGODB_URI",
        "process",
        "env",
        "Schema",
        "server",
        "opts",
        "autoReconnect",
        "reconnectTries",
        "Number",
        "MAX_VALUE",
        "reconnectInterval",
        "bitscoop",
        "BITSCOOP_API_KEY",
        "allowUnauthorized",
        "use",
        "connect",
        "mongooseConnect",
        "connection",
        "on",
        "e",
        "message",
        "code",
        "console",
        "log",
        "once",
        "load",
        "validationSchemas",
        "then",
        "validate",
        "global",
        "uri",
        "json",
        "req",
        "res",
        "schema",
        "tracing",
        "context",
        "formatError",
        "error",
        "locations",
        "stack",
        "split",
        "path",
        "get",
        "endpointURL",
        "endpoint",
        "listen",
        "PORT"
      ],
      "mappings": ";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA;;;;AACA;;;;AACA;;AACA;;;;;;;;AAEA,MAAMA,cAAcC,QAAQC,GAAR,CAAYF,WAAhC;;AAEA,MAAMG,SAAS,mBAASA,MAAxB;AACA,MAAMC,SAAS,wBAAf;AACA,MAAMC,OAAO;AACXC,iBAAe,IADJ;AAEXC,kBAAgBC,OAAOC,SAFZ;AAGXC,qBAAmB;AAHR,CAAb;;AAMA,MAAMC,WAAW,0BAAaV,QAAQC,GAAR,CAAYU,gBAAzB,EAA2C;AAC3DC,qBAAmB;AADwC,CAA3C,CAAjB;;AAIAT,OAAOU,GAAP,CAAW,qBAAX;;AAEA,mBAASC,OAAT,CAAiBf,WAAjB,EAA8BK,IAA9B;;AAEA,MAAMW,kBAAkB,mBAASC,UAAjC;;AAGAD,gBAAgBE,EAAhB,CAAmB,OAAnB,EAA4BC,KAAK;AAC/B,MAAIA,EAAEC,OAAF,CAAUC,IAAV,KAAmB,WAAvB,EAAoC;AAClCC,YAAQC,GAAR,CAAYJ,CAAZ;AACA,uBAASJ,OAAT,CAAiBf,WAAjB,EAA8BK,IAA9B;AACD;AACDiB,UAAQC,GAAR,CAAYJ,CAAZ;AACD,CAND;;AAQAH,gBAAgBQ,IAAhB,CAAqB,MAArB,EAA6B,MAAM;AACjCF,UAAQC,GAAR,CAAa,qCAAoCvB,WAAY,EAA7D;AACD,CAFD;;AAIA,oBAAUyB,IAAV,CAAe,iBAAOC,iBAAtB,EACGC,IADH;AAAA,+BACQ,WAAeC,QAAf,EAAyB;AAC7BC,WAAO3B,GAAP,GAAa;AACXS,gBAAUA,QADC;AAEXiB,gBAAUA;AAFC,KAAb;;AAKAxB,WAAOU,GAAP,CACE,gBAAQgB,GADV,EAEE,qBAAWC,IAAX,EAFF,EAGE,6BAHF,iCAKE,yCAAe,UAACC,GAAD,EAAMC,GAAN;AAAA,aAAe;AAC5BC,gBAAQ,gBAAQA,MADY;AAE5BC,iBAAS,IAFmB;AAG5BC,iBAAS,EAAEJ,GAAF,EAAOC,GAAP,EAHmB;AAI5B;AACA;AACA;AACA;AACAI,qBAAa;AAAA,iBAAU;AACrBjB,qBAASkB,MAAMlB,OADM;AAErBmB,uBAAWD,MAAMC,SAFI;AAGrBC,mBAAOF,MAAME,KAAN,GAAcF,MAAME,KAAN,CAAYC,KAAZ,CAAkB,IAAlB,CAAd,GAAwC,EAH1B;AAIrBC,kBAAMJ,MAAMI;AAJS,WAAV;AAAA;AARe,OAAf;AAAA,KAAf,CALF;;AAqBA;;AAEA;AACAtC,WAAOuC,GAAP,CAAY,GAAE,gBAAQb,GAAI,IAA1B,EAA+B,0CAAgB,EAAEc,aAAa,gBAAQd,GAAvB,EAAhB,CAA/B;;AAEA;AACA1B,WAAOuC,GAAP,CAAY,GAAE,gBAAQb,GAAI,IAA1B,EAA+B,kDAAkB,EAAEe,UAAU,gBAAQf,GAApB,EAAlB,CAA/B;;AAEA1B,WAAOuC,GAAP,CAAW,uBAAX;;AAGA;AACAvC,WAAO0C,MAAP,CAAc7C,QAAQC,GAAR,CAAY6C,IAA1B;;AAEAzB,YAAQC,GAAR,CAAY,WAAWtB,QAAQC,GAAR,CAAY6C,IAAnC;AACD,GA3CH;;AAAA;AAAA;AAAA;AAAA",
      "file": "server.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "import BitScoop from 'bitscoop-sdk';\nimport bodyParser from 'body-parser';\nimport config from 'config';\nimport cors from 'cors';\nimport cookieParser from 'cookie-parser';\nimport express from 'express';\nimport expressPlayground from 'graphql-playground-middleware-express';\nimport { graphqlExpress, graphiqlExpress } from 'apollo-server-express';\nimport mongoose from 'mongoose';\n\nimport completeConnection from './lib/rest/complete-connection';\nimport cookieAuthorization from './middleware/cookie-authorization';\nimport { crudAPI } from './schema';\nimport validator from './lib/validator';\n\nconst MONGODB_URI = process.env.MONGODB_URI;\n\nconst Schema = mongoose.Schema;\nconst server = express();\nconst opts = {\n  autoReconnect: true,\n  reconnectTries: Number.MAX_VALUE,\n  reconnectInterval: 1000,\n};\n\nconst bitscoop = new BitScoop(process.env.BITSCOOP_API_KEY, {\n\tallowUnauthorized: true\n});\n\nserver.use(cors());\n\nmongoose.connect(MONGODB_URI, opts);\n\nconst mongooseConnect = mongoose.connection;\n\n\nmongooseConnect.on('error', e => {\n  if (e.message.code === 'ETIMEDOUT') {\n    console.log(e);\n    mongoose.connect(MONGODB_URI, opts);\n  }\n  console.log(e);\n});\n\nmongooseConnect.once('open', () => {\n  console.log(`MongoDB successfully connected to ${MONGODB_URI}`);\n});\n\nvalidator.load(config.validationSchemas)\n  .then(async function(validate) {\n    global.env = {\n      bitscoop: bitscoop,\n      validate: validate\n    };\n    \n    server.use(\n      crudAPI.uri, \n      bodyParser.json(), \n      cookieParser(),\n      cookieAuthorization,\n      graphqlExpress((req, res) => ({ \n        schema: crudAPI.schema, \n        tracing: true,\n        context: { req, res },\n        // formatError: error => ({\n        //   message: error.message,\n        //   stack: !error.message.match(/for security reason/i) ? error.stack.split('\\n') : null,\n        // }),\n        formatError: error => ({\n          message: error.message,\n          locations: error.locations,\n          stack: error.stack ? error.stack.split('\\n') : [],\n          path: error.path\n        })\n    })));\n  \n    // server.use(\n\n    // http://localhost:3000/gql-i/\n    server.get(`${crudAPI.uri}-i`, graphiqlExpress({ endpointURL: crudAPI.uri }));\n\n    // http://localhost:3000/gql-p/\n    server.get(`${crudAPI.uri}-p`, expressPlayground({ endpoint: crudAPI.uri }));\n  \n    server.get('/connections/complete', completeConnection);\n  \n\n    // http://localhost:3000/user/\n    server.listen(process.env.PORT);\n\n    console.log('PORT: ' + process.env.PORT);\n  })\n"
      ]
    },
    "mtime": 1521829082463
  },
  "{\"filename\":\"/app/schema/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "deep-equal",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "deepEqual"
              }
            ]
          },
          {
            "source": "./crud-schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "crudSchema"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "crudAPI"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "crudAPI",
              "exported": "crudAPI"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/index.js",
      "filenameRelative": "/app/schema/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/app/schema",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.crudAPI = undefined;\n\nvar _deepEqual = require('deep-equal');\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _crudSchema = require('./crud-schema');\n\nvar _crudSchema2 = _interopRequireDefault(_crudSchema);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import sessionSchema from './session-schema';\n\nconst queries = [{\n  title: 'Find by id',\n  query: `\n{\n  userById(_id: \"57bb44dd21d2befb7ca3f010\") {\n    _id\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `\n}, {\n  title: 'Find one User',\n  query: `\n{\n  userOne(filter: { age: 18 }, sort: _ID_ASC) {\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `\n}, {\n  title: 'Find many Users',\n  query: `\n{\n  userMany(filter: { gender: male }, limit: 5, sort: _ID_ASC) {\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `\n}, {\n  title: 'Find many Users (by geo distance)',\n  query: `\n{\n  distance_5_km: userMany(filter: {\n    geoDistance: {\n      lng: 76.911982,\n      lat: 43.233893,\n      distance: 5000,\n    }\n  }) {\n    name\n    address {\n      geo\n    }\n  }\n  distance_100_km: userMany(filter: {\n    geoDistance: {\n      lng: 76.911982,\n      lat: 43.233893,\n      distance: 100000,\n    }\n  }) {\n    name\n    address {\n      geo\n    }\n  }\n}\n      `\n}, {\n  title: 'Find User with field of MIXED type',\n  query: `\n{\n  userById(_id: \"57bb44dd21d2befb7ca3f001\") {\n    _id\n    name\n    someMixed\n  }\n}\n      `\n}, {\n  title: 'Create user mutation (with arg of MIXED type)',\n  query: `\nmutation {\n  userCreate(record: {\n    name: \"My Name\",\n    age: 24,\n    gender: ladyboy,\n    contacts: {\n      email: \"mail@example.com\",\n      phones: [\n        \"111-222-333-444\",\n        \"444-555-666-777\"\n      ]\n    },\n    someMixed: {\n      a: 1,\n      b: 2,\n      c: [ 1, 2, 3, true, false, { sub: 1 }]\n    }\n  }) {\n    recordId\n    record {\n      name\n      age\n      gender\n      contacts {\n        email\n        phones\n      }\n      someMixed\n    }\n  }\n}\n      `\n}, {\n  title: 'Pagination',\n  query: `\n{\n  userPagination(filter: { gender: male }, perPage: 2, page: 2, sort: _ID_ASC) {\n    items {\n      name\n      languages {\n        language\n        skill\n      }\n      contacts {\n        email\n      }\n      gender\n      age\n    }\n    count\n    pageInfo {\n      currentPage\n      perPage\n      itemCount\n      pageCount\n      hasPreviousPage\n      hasNextPage\n    }\n  }\n}\n      `\n}];\n\n// export default {\n//   uri: '/gql',\n//   schema: crudSchema,\n//   title: 'LifeScope GraphQL API',\n//   description:\n//     'This schema implements all data collected, organized, and analyzed by the LifeScope platform',\n//   github: 'https://github.com/bitscooplabs/lifescope',\n//   queries: queries,\n// };\n\nconst crudAPI = exports.crudAPI = {\n  uri: '/gql',\n  schema: _crudSchema2.default,\n  title: 'LifeScope GraphQL API',\n  description: 'This schema implements all data collected, organized, and analyzed by the LifeScope platform',\n  github: 'https://github.com/bitscooplabs/lifescope',\n  queries: queries\n};\n\n// export const sessionAPI = {\n//   uri: '/session',\n//   sessionSchema,\n//   title: 'LifeScope Session API'\n// };\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInF1ZXJpZXMiLCJ0aXRsZSIsInF1ZXJ5IiwiY3J1ZEFQSSIsInVyaSIsInNjaGVtYSIsImRlc2NyaXB0aW9uIiwiZ2l0aHViIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUE7Ozs7QUFFQTs7Ozs7O0FBQ0E7O0FBRUEsTUFBTUEsVUFBVSxDQUNaO0FBQ0VDLFNBQU8sWUFEVDtBQUVFQyxTQUFROzs7Ozs7Ozs7Ozs7Ozs7OztBQUZWLENBRFksRUFxQlo7QUFDRUQsU0FBTyxlQURUO0FBRUVDLFNBQVE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFGVixDQXJCWSxFQXdDWjtBQUNFRCxTQUFPLGlCQURUO0FBRUVDLFNBQVE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFGVixDQXhDWSxFQTJEWjtBQUNFRCxTQUFPLG1DQURUO0FBRUVDLFNBQVE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFGVixDQTNEWSxFQTBGWjtBQUNFRCxTQUFPLG9DQURUO0FBRUVDLFNBQVE7Ozs7Ozs7OztBQUZWLENBMUZZLEVBc0daO0FBQ0VELFNBQU8sK0NBRFQ7QUFFRUMsU0FBUTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRlYsQ0F0R1ksRUEwSVo7QUFDRUQsU0FBTyxZQURUO0FBRUVDLFNBQVE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUZWLENBMUlZLENBQWhCOztBQTJLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU8sTUFBTUMsNEJBQVU7QUFDckJDLE9BQUssTUFEZ0I7QUFFckJDLDhCQUZxQjtBQUdyQkosU0FBTyx1QkFIYztBQUlyQkssZUFDRSw4RkFMbUI7QUFNckJDLFVBQVEsMkNBTmE7QUFPckJQLFdBQVNBO0FBUFksQ0FBaEI7O0FBVVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NjaGVtYSIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCBkZWVwRXF1YWwgZnJvbSAnZGVlcC1lcXVhbCc7XG5cbmltcG9ydCBjcnVkU2NoZW1hIGZyb20gJy4vY3J1ZC1zY2hlbWEnO1xuLy8gaW1wb3J0IHNlc3Npb25TY2hlbWEgZnJvbSAnLi9zZXNzaW9uLXNjaGVtYSc7XG5cbmNvbnN0IHF1ZXJpZXMgPSBbXG4gICAge1xuICAgICAgdGl0bGU6ICdGaW5kIGJ5IGlkJyxcbiAgICAgIHF1ZXJ5OiBgXG57XG4gIHVzZXJCeUlkKF9pZDogXCI1N2JiNDRkZDIxZDJiZWZiN2NhM2YwMTBcIikge1xuICAgIF9pZFxuICAgIG5hbWVcbiAgICBsYW5ndWFnZXMge1xuICAgICAgbGFuZ3VhZ2VcbiAgICAgIHNraWxsXG4gICAgfVxuICAgIGNvbnRhY3RzIHtcbiAgICAgIGVtYWlsXG4gICAgfVxuICAgIGdlbmRlclxuICAgIGFnZVxuICB9XG59XG4gICAgICBgLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdGaW5kIG9uZSBVc2VyJyxcbiAgICAgIHF1ZXJ5OiBgXG57XG4gIHVzZXJPbmUoZmlsdGVyOiB7IGFnZTogMTggfSwgc29ydDogX0lEX0FTQykge1xuICAgIG5hbWVcbiAgICBsYW5ndWFnZXMge1xuICAgICAgbGFuZ3VhZ2VcbiAgICAgIHNraWxsXG4gICAgfVxuICAgIGNvbnRhY3RzIHtcbiAgICAgIGVtYWlsXG4gICAgfVxuICAgIGdlbmRlclxuICAgIGFnZVxuICB9XG59XG4gICAgICBgLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdGaW5kIG1hbnkgVXNlcnMnLFxuICAgICAgcXVlcnk6IGBcbntcbiAgdXNlck1hbnkoZmlsdGVyOiB7IGdlbmRlcjogbWFsZSB9LCBsaW1pdDogNSwgc29ydDogX0lEX0FTQykge1xuICAgIG5hbWVcbiAgICBsYW5ndWFnZXMge1xuICAgICAgbGFuZ3VhZ2VcbiAgICAgIHNraWxsXG4gICAgfVxuICAgIGNvbnRhY3RzIHtcbiAgICAgIGVtYWlsXG4gICAgfVxuICAgIGdlbmRlclxuICAgIGFnZVxuICB9XG59XG4gICAgICBgLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdGaW5kIG1hbnkgVXNlcnMgKGJ5IGdlbyBkaXN0YW5jZSknLFxuICAgICAgcXVlcnk6IGBcbntcbiAgZGlzdGFuY2VfNV9rbTogdXNlck1hbnkoZmlsdGVyOiB7XG4gICAgZ2VvRGlzdGFuY2U6IHtcbiAgICAgIGxuZzogNzYuOTExOTgyLFxuICAgICAgbGF0OiA0My4yMzM4OTMsXG4gICAgICBkaXN0YW5jZTogNTAwMCxcbiAgICB9XG4gIH0pIHtcbiAgICBuYW1lXG4gICAgYWRkcmVzcyB7XG4gICAgICBnZW9cbiAgICB9XG4gIH1cbiAgZGlzdGFuY2VfMTAwX2ttOiB1c2VyTWFueShmaWx0ZXI6IHtcbiAgICBnZW9EaXN0YW5jZToge1xuICAgICAgbG5nOiA3Ni45MTE5ODIsXG4gICAgICBsYXQ6IDQzLjIzMzg5MyxcbiAgICAgIGRpc3RhbmNlOiAxMDAwMDAsXG4gICAgfVxuICB9KSB7XG4gICAgbmFtZVxuICAgIGFkZHJlc3Mge1xuICAgICAgZ2VvXG4gICAgfVxuICB9XG59XG4gICAgICBgLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICdGaW5kIFVzZXIgd2l0aCBmaWVsZCBvZiBNSVhFRCB0eXBlJyxcbiAgICAgIHF1ZXJ5OiBgXG57XG4gIHVzZXJCeUlkKF9pZDogXCI1N2JiNDRkZDIxZDJiZWZiN2NhM2YwMDFcIikge1xuICAgIF9pZFxuICAgIG5hbWVcbiAgICBzb21lTWl4ZWRcbiAgfVxufVxuICAgICAgYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiAnQ3JlYXRlIHVzZXIgbXV0YXRpb24gKHdpdGggYXJnIG9mIE1JWEVEIHR5cGUpJyxcbiAgICAgIHF1ZXJ5OiBgXG5tdXRhdGlvbiB7XG4gIHVzZXJDcmVhdGUocmVjb3JkOiB7XG4gICAgbmFtZTogXCJNeSBOYW1lXCIsXG4gICAgYWdlOiAyNCxcbiAgICBnZW5kZXI6IGxhZHlib3ksXG4gICAgY29udGFjdHM6IHtcbiAgICAgIGVtYWlsOiBcIm1haWxAZXhhbXBsZS5jb21cIixcbiAgICAgIHBob25lczogW1xuICAgICAgICBcIjExMS0yMjItMzMzLTQ0NFwiLFxuICAgICAgICBcIjQ0NC01NTUtNjY2LTc3N1wiXG4gICAgICBdXG4gICAgfSxcbiAgICBzb21lTWl4ZWQ6IHtcbiAgICAgIGE6IDEsXG4gICAgICBiOiAyLFxuICAgICAgYzogWyAxLCAyLCAzLCB0cnVlLCBmYWxzZSwgeyBzdWI6IDEgfV1cbiAgICB9XG4gIH0pIHtcbiAgICByZWNvcmRJZFxuICAgIHJlY29yZCB7XG4gICAgICBuYW1lXG4gICAgICBhZ2VcbiAgICAgIGdlbmRlclxuICAgICAgY29udGFjdHMge1xuICAgICAgICBlbWFpbFxuICAgICAgICBwaG9uZXNcbiAgICAgIH1cbiAgICAgIHNvbWVNaXhlZFxuICAgIH1cbiAgfVxufVxuICAgICAgYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiAnUGFnaW5hdGlvbicsXG4gICAgICBxdWVyeTogYFxue1xuICB1c2VyUGFnaW5hdGlvbihmaWx0ZXI6IHsgZ2VuZGVyOiBtYWxlIH0sIHBlclBhZ2U6IDIsIHBhZ2U6IDIsIHNvcnQ6IF9JRF9BU0MpIHtcbiAgICBpdGVtcyB7XG4gICAgICBuYW1lXG4gICAgICBsYW5ndWFnZXMge1xuICAgICAgICBsYW5ndWFnZVxuICAgICAgICBza2lsbFxuICAgICAgfVxuICAgICAgY29udGFjdHMge1xuICAgICAgICBlbWFpbFxuICAgICAgfVxuICAgICAgZ2VuZGVyXG4gICAgICBhZ2VcbiAgICB9XG4gICAgY291bnRcbiAgICBwYWdlSW5mbyB7XG4gICAgICBjdXJyZW50UGFnZVxuICAgICAgcGVyUGFnZVxuICAgICAgaXRlbUNvdW50XG4gICAgICBwYWdlQ291bnRcbiAgICAgIGhhc1ByZXZpb3VzUGFnZVxuICAgICAgaGFzTmV4dFBhZ2VcbiAgICB9XG4gIH1cbn1cbiAgICAgIGAsXG4gICAgfSxcbiAgXVxuXG5cbi8vIGV4cG9ydCBkZWZhdWx0IHtcbi8vICAgdXJpOiAnL2dxbCcsXG4vLyAgIHNjaGVtYTogY3J1ZFNjaGVtYSxcbi8vICAgdGl0bGU6ICdMaWZlU2NvcGUgR3JhcGhRTCBBUEknLFxuLy8gICBkZXNjcmlwdGlvbjpcbi8vICAgICAnVGhpcyBzY2hlbWEgaW1wbGVtZW50cyBhbGwgZGF0YSBjb2xsZWN0ZWQsIG9yZ2FuaXplZCwgYW5kIGFuYWx5emVkIGJ5IHRoZSBMaWZlU2NvcGUgcGxhdGZvcm0nLFxuLy8gICBnaXRodWI6ICdodHRwczovL2dpdGh1Yi5jb20vYml0c2Nvb3BsYWJzL2xpZmVzY29wZScsXG4vLyAgIHF1ZXJpZXM6IHF1ZXJpZXMsXG4vLyB9O1xuXG5leHBvcnQgY29uc3QgY3J1ZEFQSSA9IHtcbiAgdXJpOiAnL2dxbCcsXG4gIHNjaGVtYTogY3J1ZFNjaGVtYSxcbiAgdGl0bGU6ICdMaWZlU2NvcGUgR3JhcGhRTCBBUEknLFxuICBkZXNjcmlwdGlvbjpcbiAgICAnVGhpcyBzY2hlbWEgaW1wbGVtZW50cyBhbGwgZGF0YSBjb2xsZWN0ZWQsIG9yZ2FuaXplZCwgYW5kIGFuYWx5emVkIGJ5IHRoZSBMaWZlU2NvcGUgcGxhdGZvcm0nLFxuICBnaXRodWI6ICdodHRwczovL2dpdGh1Yi5jb20vYml0c2Nvb3BsYWJzL2xpZmVzY29wZScsXG4gIHF1ZXJpZXM6IHF1ZXJpZXMsXG59O1xuXG4vLyBleHBvcnQgY29uc3Qgc2Vzc2lvbkFQSSA9IHtcbi8vICAgdXJpOiAnL3Nlc3Npb24nLFxuLy8gICBzZXNzaW9uU2NoZW1hLFxuLy8gICB0aXRsZTogJ0xpZmVTY29wZSBTZXNzaW9uIEFQSSdcbi8vIH07Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "queries",
        "title",
        "query",
        "crudAPI",
        "uri",
        "schema",
        "description",
        "github"
      ],
      "mappings": ";;;;;;;AAEA;;;;AAEA;;;;;;AACA;;AAEA,MAAMA,UAAU,CACZ;AACEC,SAAO,YADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;;AAFV,CADY,EAqBZ;AACED,SAAO,eADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;AAFV,CArBY,EAwCZ;AACED,SAAO,iBADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;AAFV,CAxCY,EA2DZ;AACED,SAAO,mCADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFV,CA3DY,EA0FZ;AACED,SAAO,oCADT;AAEEC,SAAQ;;;;;;;;;AAFV,CA1FY,EAsGZ;AACED,SAAO,+CADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFV,CAtGY,EA0IZ;AACED,SAAO,YADT;AAEEC,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFV,CA1IY,CAAhB;;AA2KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,MAAMC,4BAAU;AACrBC,OAAK,MADgB;AAErBC,8BAFqB;AAGrBJ,SAAO,uBAHc;AAIrBK,eACE,8FALmB;AAMrBC,UAAQ,2CANa;AAOrBP,WAASA;AAPY,CAAhB;;AAUP;AACA;AACA;AACA;AACA",
      "file": "index.js",
      "sourceRoot": "/app/schema",
      "sourcesContent": [
        "/* @flow */\n\nimport deepEqual from 'deep-equal';\n\nimport crudSchema from './crud-schema';\n// import sessionSchema from './session-schema';\n\nconst queries = [\n    {\n      title: 'Find by id',\n      query: `\n{\n  userById(_id: \"57bb44dd21d2befb7ca3f010\") {\n    _id\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `,\n    },\n    {\n      title: 'Find one User',\n      query: `\n{\n  userOne(filter: { age: 18 }, sort: _ID_ASC) {\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `,\n    },\n    {\n      title: 'Find many Users',\n      query: `\n{\n  userMany(filter: { gender: male }, limit: 5, sort: _ID_ASC) {\n    name\n    languages {\n      language\n      skill\n    }\n    contacts {\n      email\n    }\n    gender\n    age\n  }\n}\n      `,\n    },\n    {\n      title: 'Find many Users (by geo distance)',\n      query: `\n{\n  distance_5_km: userMany(filter: {\n    geoDistance: {\n      lng: 76.911982,\n      lat: 43.233893,\n      distance: 5000,\n    }\n  }) {\n    name\n    address {\n      geo\n    }\n  }\n  distance_100_km: userMany(filter: {\n    geoDistance: {\n      lng: 76.911982,\n      lat: 43.233893,\n      distance: 100000,\n    }\n  }) {\n    name\n    address {\n      geo\n    }\n  }\n}\n      `,\n    },\n    {\n      title: 'Find User with field of MIXED type',\n      query: `\n{\n  userById(_id: \"57bb44dd21d2befb7ca3f001\") {\n    _id\n    name\n    someMixed\n  }\n}\n      `,\n    },\n    {\n      title: 'Create user mutation (with arg of MIXED type)',\n      query: `\nmutation {\n  userCreate(record: {\n    name: \"My Name\",\n    age: 24,\n    gender: ladyboy,\n    contacts: {\n      email: \"mail@example.com\",\n      phones: [\n        \"111-222-333-444\",\n        \"444-555-666-777\"\n      ]\n    },\n    someMixed: {\n      a: 1,\n      b: 2,\n      c: [ 1, 2, 3, true, false, { sub: 1 }]\n    }\n  }) {\n    recordId\n    record {\n      name\n      age\n      gender\n      contacts {\n        email\n        phones\n      }\n      someMixed\n    }\n  }\n}\n      `,\n    },\n    {\n      title: 'Pagination',\n      query: `\n{\n  userPagination(filter: { gender: male }, perPage: 2, page: 2, sort: _ID_ASC) {\n    items {\n      name\n      languages {\n        language\n        skill\n      }\n      contacts {\n        email\n      }\n      gender\n      age\n    }\n    count\n    pageInfo {\n      currentPage\n      perPage\n      itemCount\n      pageCount\n      hasPreviousPage\n      hasNextPage\n    }\n  }\n}\n      `,\n    },\n  ]\n\n\n// export default {\n//   uri: '/gql',\n//   schema: crudSchema,\n//   title: 'LifeScope GraphQL API',\n//   description:\n//     'This schema implements all data collected, organized, and analyzed by the LifeScope platform',\n//   github: 'https://github.com/bitscooplabs/lifescope',\n//   queries: queries,\n// };\n\nexport const crudAPI = {\n  uri: '/gql',\n  schema: crudSchema,\n  title: 'LifeScope GraphQL API',\n  description:\n    'This schema implements all data collected, organized, and analyzed by the LifeScope platform',\n  github: 'https://github.com/bitscooplabs/lifescope',\n  queries: queries,\n};\n\n// export const sessionAPI = {\n//   uri: '/session',\n//   sessionSchema,\n//   title: 'LifeScope Session API'\n// };"
      ]
    },
    "mtime": 1521758638862
  },
  "{\"filename\":\"/app/schema/schema.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "extends",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "graphql-compose",
            "imported": [
              "SchemaComposer"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SchemaComposer",
                "local": "SchemaComposer"
              }
            ]
          },
          {
            "source": "uuid/v4",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          },
          {
            "source": "../middleware/restrict-to-user",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "restrictToUser"
              }
            ]
          },
          {
            "source": "./models/connections",
            "imported": [
              "ConnectionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ConnectionTC",
                "local": "ConnectionTC"
              }
            ]
          },
          {
            "source": "./models/session",
            "imported": [
              "SessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SessionTC",
                "local": "SessionTC"
              }
            ]
          },
          {
            "source": "./models/user",
            "imported": [
              "UserTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UserTC",
                "local": "UserTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/schema/schema.js",
      "filenameRelative": "/app/schema/schema.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "schema.js",
      "sourceFileName": "schema.js",
      "sourceRoot": "/app/schema",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "schema"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n// import { ContactTC } from './models/contacts';\n// import { ContentTC } from './models/content';\n// import { EventTC } from './models/events';\n// import { LocationTC } from './models/locations';\n// import { ProviderTC } from './models/providers';\n// import { SearchTC } from './models/searches';\n\n// import { TagTC } from './models/tags';\n// import { ThingTC } from './models/things';\n\nvar _graphqlCompose = require('graphql-compose');\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _restrictToUser = require('../middleware/restrict-to-user');\n\nvar _restrictToUser2 = _interopRequireDefault(_restrictToUser);\n\nvar _connections = require('./models/connections');\n\nvar _session = require('./models/session');\n\nvar _user = require('./models/user');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst GQC = new _graphqlCompose.SchemaComposer();\n\nconst Resolver = GQC.Resolver;\n\n// create GraphQL Schema with all available resolvers\n\nGQC.rootQuery().addFields(_extends({\n  //Connections\n  //   connectionOne: ConnectionTC.getResolver('findOne'),\n  //   connectionMany: ConnectionTC.getResolver('findMany'),\n  //   connectionTotal: ConnectionTC.getResolver('count'),\n  //   connectionConnection: ConnectionTC.getResolver('connection'),\n  //   connectionPagination: ConnectionTC.getResolver('pagination'),\n\n  //   //Contacts\n  //   contactOne: ContactTC.getResolver('findOne'),\n  //   contactMany: ContactTC.getResolver('findMany'),\n  //   contactTotal: ContactTC.getResolver('count'),\n  //   contactConnection: ContactTC.getResolver('connection'),\n  //   contactPagination: ContactTC.getResolver('pagination'),\n\n  //   //Content\n  //   contentOne: ContentTC.getResolver('findOne'),\n  //   contentMany: ContentTC.getResolver('findMany'),\n  //   contentTotal: ContentTC.getResolver('count'),\n  //   contentConnection: ContentTC.getResolver('connection'),\n  //   contentPagination: ContentTC.getResolver('pagination'),\n\n  //   //Events\n  //   eventOne: EventTC.getResolver('findOne'),\n  //   eventMany: EventTC.getResolver('findMany'),\n  //   eventTotal: EventTC.getResolver('count'),\n  //   eventConnection: EventTC.getResolver('connection'),\n  //   eventPagination: EventTC.getResolver('pagination'),\n\n  //   //Locations\n  //   locationOne: LocationTC.getResolver('findOne'),\n  //   locationMany: LocationTC.getResolver('findMany'),\n  //   locationTotal: LocationTC.getResolver('count'),\n  //   locationConnection: LocationTC.getResolver('connection'),\n  //   locationPagination: LocationTC.getResolver('pagination'),\n\n  //   //Providers\n  //   providerOne: ProviderTC.getResolver('findOne'),\n  //   providerMany: ProviderTC.getResolver('findMany'),\n  //   providerTotal: ProviderTC.getResolver('count'),\n  //   providerConnection: ProviderTC.getResolver('connection'),\n  //   providerPagination: ProviderTC.getResolver('pagination'),\n\n  //   //Searches\n  //   searchOne: SearchTC.getResolver('findOne'),\n  //   searchMany: SearchTC.getResolver('findMany'),\n  //   searchTotal: SearchTC.getResolver('count'),\n  //   searchConnection: SearchTC.getResolver('connection'),\n  //   searchPagination: SearchTC.getResolver('pagination'),\n\n  //Session\n  sessionOne: _session.SessionTC.getResolver('findOne')\n}, (0, _restrictToUser2.default)(Resolver, {\n  sessionMany: _session.SessionTC.getResolver('findMany')\n}), {\n  //   sessionTotal: SessionTC.getResolver('count'),\n  //   sessionConnection: SessionTC.getResolver('connection'),\n  //   sessionPagination: SessionTC.getResolver('pagination'),\n\n  //   //Tags\n  //   tagOne: TagTC.getResolver('findOne'),\n  //   tagMany: TagTC.getResolver('findMany'),\n  //   tagTotal: TagTC.getResolver('count'),\n  //   tagConnection: TagTC.getResolver('connection'),\n  //   tagPagination: TagTC.getResolver('pagination'),\n  //   //Things\n  //   ThingOne: ThingTC.getResolver('findOne'),\n  //   ThingMany: ThingTC.getResolver('findMany'),\n  //   ThingTotal: ThingTC.getResolver('count'),\n  //   ThingConnection: ThingTC.getResolver('connection'),\n  //   ThingPagination: ThingTC.getResolver('pagination'),\n\n  //Users\n  userOne: _user.UserTC.getResolver('findOne'),\n  userMany: _user.UserTC.getResolver('findMany'), // .debug(), // debug info to console for this resolver\n  userTotal: _user.UserTC.getResolver('count'),\n  userConnection: _user.UserTC.getResolver('connection'),\n  userPagination: _user.UserTC.getResolver('pagination')\n\n}));\n// For debug purposes you may display resolver internals in the following manner:\n// console.log(UserTC.getResolver('findMany').toString());\n\nGQC.rootMutation().addFields(_extends({}, (0, _restrictToUser2.default)(Resolver, {\n  sessionCreate: _session.SessionTC.getResolver('createOne').wrapResolve(next => rp => {\n    rp.args.record.id = (0, _v2.default)().replace(/-/g, '');\n    rp.args.record.user_id_string = rp.context.user._id.toString('hex');\n\n    return next(rp);\n  })\n\n  // initializeConnection: ConnectionTC.getResolver('initializeConnection')\n}))\n\n// Users\n// userCreate: UserTC.getResolver('createOne'),\n// userUpdateOne: UserTC.getResolver('updateOne'),\n// userUpdateMany: UserTC.getResolver('updateMany'),\n// userRemoveOne: UserTC.getResolver('removeOne'),\n// userRemoveMany: UserTC.getResolver('removeMany'),\n);\n\nconst graphqlSchema = GQC.buildSchema();\n\nexports.default = graphqlSchema;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaGVtYS5qcyJdLCJuYW1lcyI6WyJHUUMiLCJSZXNvbHZlciIsInJvb3RRdWVyeSIsImFkZEZpZWxkcyIsInNlc3Npb25PbmUiLCJnZXRSZXNvbHZlciIsInNlc3Npb25NYW55IiwidXNlck9uZSIsInVzZXJNYW55IiwidXNlclRvdGFsIiwidXNlckNvbm5lY3Rpb24iLCJ1c2VyUGFnaW5hdGlvbiIsInJvb3RNdXRhdGlvbiIsInNlc3Npb25DcmVhdGUiLCJ3cmFwUmVzb2x2ZSIsIm5leHQiLCJycCIsImFyZ3MiLCJyZWNvcmQiLCJpZCIsInJlcGxhY2UiLCJ1c2VyX2lkX3N0cmluZyIsImNvbnRleHQiLCJ1c2VyIiwiX2lkIiwidG9TdHJpbmciLCJncmFwaHFsU2NoZW1hIiwiYnVpbGRTY2hlbWEiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFiQTs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7O0FBT0E7O0FBSUE7Ozs7QUFFQSxNQUFNQSxNQUFNLG9DQUFaOztNQUVRQyxRLEdBQWFELEcsQ0FBYkMsUTs7QUFFUjs7QUFDQUQsSUFBSUUsU0FBSixHQUFnQkMsU0FBaEI7QUFDRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUU7QUFDQUMsY0FBWSxtQkFBVUMsV0FBVixDQUFzQixTQUF0QjtBQW5EZCxHQW9ESyw4QkFBZUosUUFBZixFQUF5QjtBQUMxQkssZUFBYSxtQkFBVUQsV0FBVixDQUFzQixVQUF0QjtBQURhLENBQXpCLENBcERMO0FBdURBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUU7QUFDQUUsV0FBUyxhQUFPRixXQUFQLENBQW1CLFNBQW5CLENBekVYO0FBMEVFRyxZQUFVLGFBQU9ILFdBQVAsQ0FBbUIsVUFBbkIsQ0ExRVosRUEwRTRDO0FBQzFDSSxhQUFXLGFBQU9KLFdBQVAsQ0FBbUIsT0FBbkIsQ0EzRWI7QUE0RUVLLGtCQUFnQixhQUFPTCxXQUFQLENBQW1CLFlBQW5CLENBNUVsQjtBQTZFRU0sa0JBQWdCLGFBQU9OLFdBQVAsQ0FBbUIsWUFBbkI7O0FBN0VsQjtBQWdGQTtBQUNBOztBQUVBTCxJQUFJWSxZQUFKLEdBQW1CVCxTQUFuQixjQXdFSyw4QkFBZUYsUUFBZixFQUF5QjtBQUMxQlksaUJBQWUsbUJBQVVSLFdBQVYsQ0FBc0IsV0FBdEIsRUFBbUNTLFdBQW5DLENBQStDQyxRQUFRQyxNQUFNO0FBQzFFQSxPQUFHQyxJQUFILENBQVFDLE1BQVIsQ0FBZUMsRUFBZixHQUFvQixtQkFBT0MsT0FBUCxDQUFlLElBQWYsRUFBcUIsRUFBckIsQ0FBcEI7QUFDQUosT0FBR0MsSUFBSCxDQUFRQyxNQUFSLENBQWVHLGNBQWYsR0FBZ0NMLEdBQUdNLE9BQUgsQ0FBV0MsSUFBWCxDQUFnQkMsR0FBaEIsQ0FBb0JDLFFBQXBCLENBQTZCLEtBQTdCLENBQWhDOztBQUVBLFdBQU9WLEtBQUtDLEVBQUwsQ0FBUDtBQUNELEdBTGM7O0FBT2Y7QUFSMEIsQ0FBekIsQ0F4RUw7O0FBbUZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhGRjs7QUEyRkEsTUFBTVUsZ0JBQWdCMUIsSUFBSTJCLFdBQUosRUFBdEI7O2tCQUVlRCxhIiwiZmlsZSI6InNjaGVtYS5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NjaGVtYSIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCB7IFNjaGVtYUNvbXBvc2VyIH0gZnJvbSAnZ3JhcGhxbC1jb21wb3NlJztcbmltcG9ydCB1dWlkIGZyb20gJ3V1aWQvdjQnO1xuXG5pbXBvcnQgcmVzdHJpY3RUb1VzZXIgZnJvbSAnLi4vbWlkZGxld2FyZS9yZXN0cmljdC10by11c2VyJztcbmltcG9ydCB7IENvbm5lY3Rpb25UQyB9IGZyb20gJy4vbW9kZWxzL2Nvbm5lY3Rpb25zJztcbi8vIGltcG9ydCB7IENvbnRhY3RUQyB9IGZyb20gJy4vbW9kZWxzL2NvbnRhY3RzJztcbi8vIGltcG9ydCB7IENvbnRlbnRUQyB9IGZyb20gJy4vbW9kZWxzL2NvbnRlbnQnO1xuLy8gaW1wb3J0IHsgRXZlbnRUQyB9IGZyb20gJy4vbW9kZWxzL2V2ZW50cyc7XG4vLyBpbXBvcnQgeyBMb2NhdGlvblRDIH0gZnJvbSAnLi9tb2RlbHMvbG9jYXRpb25zJztcbi8vIGltcG9ydCB7IFByb3ZpZGVyVEMgfSBmcm9tICcuL21vZGVscy9wcm92aWRlcnMnO1xuLy8gaW1wb3J0IHsgU2VhcmNoVEMgfSBmcm9tICcuL21vZGVscy9zZWFyY2hlcyc7XG5pbXBvcnQgeyBTZXNzaW9uVEMgfSBmcm9tICcuL21vZGVscy9zZXNzaW9uJztcbi8vIGltcG9ydCB7IFRhZ1RDIH0gZnJvbSAnLi9tb2RlbHMvdGFncyc7XG4vLyBpbXBvcnQgeyBUaGluZ1RDIH0gZnJvbSAnLi9tb2RlbHMvdGhpbmdzJztcblxuaW1wb3J0IHsgVXNlclRDIH0gZnJvbSAnLi9tb2RlbHMvdXNlcic7XG5cbmNvbnN0IEdRQyA9IG5ldyBTY2hlbWFDb21wb3NlcigpO1xuXG5jb25zdCB7IFJlc29sdmVyIH0gPSBHUUM7XG5cbi8vIGNyZWF0ZSBHcmFwaFFMIFNjaGVtYSB3aXRoIGFsbCBhdmFpbGFibGUgcmVzb2x2ZXJzXG5HUUMucm9vdFF1ZXJ5KCkuYWRkRmllbGRzKHtcbiAgLy9Db25uZWN0aW9uc1xuLy8gICBjb25uZWN0aW9uT25lOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgY29ubmVjdGlvbk1hbnk6IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgY29ubmVjdGlvblRvdGFsOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIGNvbm5lY3Rpb25Db25uZWN0aW9uOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgY29ubmVjdGlvblBhZ2luYXRpb246IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbi8vICAgLy9Db250YWN0c1xuLy8gICBjb250YWN0T25lOiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgY29udGFjdE1hbnk6IENvbnRhY3RUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgY29udGFjdFRvdGFsOiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIGNvbnRhY3RDb25uZWN0aW9uOiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgY29udGFjdFBhZ2luYXRpb246IENvbnRhY3RUQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbi8vICAgLy9Db250ZW50XG4vLyAgIGNvbnRlbnRPbmU6IENvbnRlbnRUQy5nZXRSZXNvbHZlcignZmluZE9uZScpLFxuLy8gICBjb250ZW50TWFueTogQ29udGVudFRDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLFxuLy8gICBjb250ZW50VG90YWw6IENvbnRlbnRUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgY29udGVudENvbm5lY3Rpb246IENvbnRlbnRUQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuLy8gICBjb250ZW50UGFnaW5hdGlvbjogQ29udGVudFRDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4gIFxuLy8gICAvL0V2ZW50c1xuLy8gICBldmVudE9uZTogRXZlbnRUQy5nZXRSZXNvbHZlcignZmluZE9uZScpLFxuLy8gICBldmVudE1hbnk6IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JyksXG4vLyAgIGV2ZW50VG90YWw6IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIGV2ZW50Q29ubmVjdGlvbjogRXZlbnRUQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuLy8gICBldmVudFBhZ2luYXRpb246IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ3BhZ2luYXRpb24nKSxcbiAgXG4vLyAgIC8vTG9jYXRpb25zXG4vLyAgIGxvY2F0aW9uT25lOiBMb2NhdGlvblRDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4vLyAgIGxvY2F0aW9uTWFueTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgbG9jYXRpb25Ub3RhbDogTG9jYXRpb25UQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgbG9jYXRpb25Db25uZWN0aW9uOiBMb2NhdGlvblRDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIGxvY2F0aW9uUGFnaW5hdGlvbjogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbi8vICAgLy9Qcm92aWRlcnNcbi8vICAgcHJvdmlkZXJPbmU6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgcHJvdmlkZXJNYW55OiBQcm92aWRlclRDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLFxuLy8gICBwcm92aWRlclRvdGFsOiBQcm92aWRlclRDLmdldFJlc29sdmVyKCdjb3VudCcpLFxuLy8gICBwcm92aWRlckNvbm5lY3Rpb246IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgcHJvdmlkZXJQYWdpbmF0aW9uOiBQcm92aWRlclRDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4gIFxuLy8gICAvL1NlYXJjaGVzXG4vLyAgIHNlYXJjaE9uZTogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgc2VhcmNoTWFueTogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JyksXG4vLyAgIHNlYXJjaFRvdGFsOiBTZWFyY2hUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgc2VhcmNoQ29ubmVjdGlvbjogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgc2VhcmNoUGFnaW5hdGlvbjogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ3BhZ2luYXRpb24nKSxcblxuICAvL1Nlc3Npb25cbiAgc2Vzc2lvbk9uZTogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4gIC4uLnJlc3RyaWN0VG9Vc2VyKFJlc29sdmVyLCB7XG4gICAgc2Vzc2lvbk1hbnk6IFNlc3Npb25UQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbiAgfSksXG4vLyAgIHNlc3Npb25Ub3RhbDogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdjb3VudCcpLFxuLy8gICBzZXNzaW9uQ29ubmVjdGlvbjogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIHNlc3Npb25QYWdpbmF0aW9uOiBTZXNzaW9uVEMuZ2V0UmVzb2x2ZXIoJ3BhZ2luYXRpb24nKSxcbiAgXG4vLyAgIC8vVGFnc1xuLy8gICB0YWdPbmU6IFRhZ1RDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4vLyAgIHRhZ01hbnk6IFRhZ1RDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLFxuLy8gICB0YWdUb3RhbDogVGFnVEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIHRhZ0Nvbm5lY3Rpb246IFRhZ1RDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIHRhZ1BhZ2luYXRpb246IFRhZ1RDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4vLyAgIC8vVGhpbmdzXG4vLyAgIFRoaW5nT25lOiBUaGluZ1RDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4vLyAgIFRoaW5nTWFueTogVGhpbmdUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgVGhpbmdUb3RhbDogVGhpbmdUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgVGhpbmdDb25uZWN0aW9uOiBUaGluZ1RDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIFRoaW5nUGFnaW5hdGlvbjogVGhpbmdUQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbiAgLy9Vc2Vyc1xuICB1c2VyT25lOiBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbiAgdXNlck1hbnk6IFVzZXJUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSwgLy8gLmRlYnVnKCksIC8vIGRlYnVnIGluZm8gdG8gY29uc29sZSBmb3IgdGhpcyByZXNvbHZlclxuICB1c2VyVG90YWw6IFVzZXJUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbiAgdXNlckNvbm5lY3Rpb246IFVzZXJUQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuICB1c2VyUGFnaW5hdGlvbjogVXNlclRDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4gIFxufSk7XG4vLyBGb3IgZGVidWcgcHVycG9zZXMgeW91IG1heSBkaXNwbGF5IHJlc29sdmVyIGludGVybmFscyBpbiB0aGUgZm9sbG93aW5nIG1hbm5lcjpcbi8vIGNvbnNvbGUubG9nKFVzZXJUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKS50b1N0cmluZygpKTtcblxuR1FDLnJvb3RNdXRhdGlvbigpLmFkZEZpZWxkcyh7XG4gIFxuICAvLyBDb25uZWN0aW9uc1xuLy8gICBjb25uZWN0aW9uQ3JlYXRlOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuLy8gICBjb25uZWN0aW9uVXBkYXRlT25lOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU9uZScpLFxuLy8gICBjb25uZWN0aW9uVXBkYXRlTWFueTogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCd1cGRhdGVNYW55JyksXG4vLyAgIGNvbm5lY3Rpb25SZW1vdmVPbmU6IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4vLyAgIGNvbm5lY3Rpb25SZW1vdmVNYW55OiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4vLyAgIC8vIENvbnRhY3RzXG4vLyAgIGNvbnRhY3RDcmVhdGU6IENvbnRhY3RUQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4vLyAgIGNvbnRhY3RVcGRhdGVPbmU6IENvbnRhY3RUQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4vLyAgIGNvbnRhY3RVcGRhdGVNYW55OiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbi8vICAgY29udGFjdFJlbW92ZU9uZTogQ29udGFjdFRDLmdldFJlc29sdmVyKCdyZW1vdmVPbmUnKSxcbi8vICAgY29udGFjdFJlbW92ZU1hbnk6IENvbnRhY3RUQy5nZXRSZXNvbHZlcigncmVtb3ZlTWFueScpLFxuICBcbi8vICAgLy8gQ29udGVudFxuLy8gICBjb250ZW50Q3JlYXRlOiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuLy8gICBjb250ZW50VXBkYXRlT25lOiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU9uZScpLFxuLy8gICBjb250ZW50VXBkYXRlTWFueTogQ29udGVudFRDLmdldFJlc29sdmVyKCd1cGRhdGVNYW55JyksXG4vLyAgIGNvbnRlbnRSZW1vdmVPbmU6IENvbnRlbnRUQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4vLyAgIGNvbnRlbnRSZW1vdmVNYW55OiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4vLyAgIC8vIEV2ZW50c1xuLy8gICBldmVudENyZWF0ZTogRXZlbnRUQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4vLyAgIGV2ZW50VXBkYXRlT25lOiBFdmVudFRDLmdldFJlc29sdmVyKCd1cGRhdGVPbmUnKSxcbi8vICAgZXZlbnRVcGRhdGVNYW55OiBFdmVudFRDLmdldFJlc29sdmVyKCd1cGRhdGVNYW55JyksXG4vLyAgIGV2ZW50UmVtb3ZlT25lOiBFdmVudFRDLmdldFJlc29sdmVyKCdyZW1vdmVPbmUnKSxcbi8vICAgZXZlbnRSZW1vdmVNYW55OiBFdmVudFRDLmdldFJlc29sdmVyKCdyZW1vdmVNYW55JyksXG4gIFxuLy8gICAvLyBMb2NhdGlvbnNcbi8vICAgbG9jYXRpb25DcmVhdGU6IExvY2F0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuLy8gICBsb2NhdGlvblVwZGF0ZU9uZTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4vLyAgIGxvY2F0aW9uVXBkYXRlTWFueTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuLy8gICBsb2NhdGlvblJlbW92ZU9uZTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4vLyAgIGxvY2F0aW9uUmVtb3ZlTWFueTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigncmVtb3ZlTWFueScpLFxuICBcbi8vICAgLy8gUHJvdmlkZXJzXG4vLyAgIHByb3ZpZGVyQ3JlYXRlOiBQcm92aWRlclRDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKSxcbi8vICAgcHJvdmlkZXJVcGRhdGVPbmU6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU9uZScpLFxuLy8gICBwcm92aWRlclVwZGF0ZU1hbnk6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbi8vICAgcHJvdmlkZXJSZW1vdmVPbmU6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuLy8gICBwcm92aWRlclJlbW92ZU1hbnk6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4vLyAgIC8vIFNlYXJjaGVzXG4vLyAgIHNlYXJjaENyZWF0ZTogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuLy8gICBzZWFyY2hVcGRhdGVPbmU6IFNlYXJjaFRDLmdldFJlc29sdmVyKCd1cGRhdGVPbmUnKSxcbi8vICAgc2VhcmNoVXBkYXRlTWFueTogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbi8vICAgc2VhcmNoUmVtb3ZlT25lOiBTZWFyY2hUQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4vLyAgIHNlYXJjaFJlbW92ZU1hbnk6IFNlYXJjaFRDLmdldFJlc29sdmVyKCdyZW1vdmVNYW55JyksXG4gIFxuLy8gICAvLyBTZXNzaW9uXG4vLyAgIHNlc3Npb25DcmVhdGU6IFNlc3Npb25UQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4vLyAgIHNlc3Npb25VcGRhdGVPbmU6IFNlc3Npb25UQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4vLyAgIHNlc3Npb25VcGRhdGVNYW55OiBTZXNzaW9uVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbi8vICAgc2Vzc2lvblJlbW92ZU9uZTogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdyZW1vdmVPbmUnKSxcbi8vICAgc2Vzc2lvblJlbW92ZU1hbnk6IFNlc3Npb25UQy5nZXRSZXNvbHZlcigncmVtb3ZlTWFueScpLFxuICBcbi8vICAgLy8gVGFnc1xuLy8gICB0YWdDcmVhdGU6IFRhZ1RDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKSxcbi8vICAgdGFnVXBkYXRlT25lOiBUYWdUQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4vLyAgIHRhZ1VwZGF0ZU1hbnk6IFRhZ1RDLmdldFJlc29sdmVyKCd1cGRhdGVNYW55JyksXG4vLyAgIHRhZ1JlbW92ZU9uZTogVGFnVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuLy8gICB0YWdSZW1vdmVNYW55OiBUYWdUQy5nZXRSZXNvbHZlcigncmVtb3ZlTWFueScpLFxuICBcbi8vICAgLy8gVGhpbmdzXG4vLyAgIHRoaW5nQ3JlYXRlOiBUaGluZ1RDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKSxcbi8vICAgdGhpbmdVcGRhdGVPbmU6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU9uZScpLFxuLy8gICB0aGluZ1VwZGF0ZU1hbnk6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbi8vICAgdGhpbmdSZW1vdmVPbmU6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuLy8gICB0aGluZ1JlbW92ZU1hbnk6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4gIC4uLnJlc3RyaWN0VG9Vc2VyKFJlc29sdmVyLCB7XG4gICAgc2Vzc2lvbkNyZWF0ZTogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKS53cmFwUmVzb2x2ZShuZXh0ID0+IHJwID0+IHtcbiAgICAgIHJwLmFyZ3MucmVjb3JkLmlkID0gdXVpZCgpLnJlcGxhY2UoLy0vZywgJycpO1xuICAgICAgcnAuYXJncy5yZWNvcmQudXNlcl9pZF9zdHJpbmcgPSBycC5jb250ZXh0LnVzZXIuX2lkLnRvU3RyaW5nKCdoZXgnKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIG5leHQocnApOyBcbiAgICB9KSxcbiAgICBcbiAgICAvLyBpbml0aWFsaXplQ29ubmVjdGlvbjogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCdpbml0aWFsaXplQ29ubmVjdGlvbicpXG4gIH0pLFxuICBcbiAgLy8gVXNlcnNcbiAgLy8gdXNlckNyZWF0ZTogVXNlclRDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKSxcbiAgLy8gdXNlclVwZGF0ZU9uZTogVXNlclRDLmdldFJlc29sdmVyKCd1cGRhdGVPbmUnKSxcbiAgLy8gdXNlclVwZGF0ZU1hbnk6IFVzZXJUQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuICAvLyB1c2VyUmVtb3ZlT25lOiBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuICAvLyB1c2VyUmVtb3ZlTWFueTogVXNlclRDLmdldFJlc29sdmVyKCdyZW1vdmVNYW55JyksXG59KTtcblxuY29uc3QgZ3JhcGhxbFNjaGVtYSA9IEdRQy5idWlsZFNjaGVtYSgpO1xuXG5leHBvcnQgZGVmYXVsdCBncmFwaHFsU2NoZW1hOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "schema.js"
      ],
      "names": [
        "GQC",
        "Resolver",
        "rootQuery",
        "addFields",
        "sessionOne",
        "getResolver",
        "sessionMany",
        "userOne",
        "userMany",
        "userTotal",
        "userConnection",
        "userPagination",
        "rootMutation",
        "sessionCreate",
        "wrapResolve",
        "next",
        "rp",
        "args",
        "record",
        "id",
        "replace",
        "user_id_string",
        "context",
        "user",
        "_id",
        "toString",
        "graphqlSchema",
        "buildSchema"
      ],
      "mappings": ";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAbA;;AACA;;;;AAEA;;;;AACA;;AAOA;;AAIA;;;;AAEA,MAAMA,MAAM,oCAAZ;;MAEQC,Q,GAAaD,G,CAAbC,Q;;AAER;;AACAD,IAAIE,SAAJ,GAAgBC,SAAhB;AACE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACAC,cAAY,mBAAUC,WAAV,CAAsB,SAAtB;AAnDd,GAoDK,8BAAeJ,QAAf,EAAyB;AAC1BK,eAAa,mBAAUD,WAAV,CAAsB,UAAtB;AADa,CAAzB,CApDL;AAuDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACAE,WAAS,aAAOF,WAAP,CAAmB,SAAnB,CAzEX;AA0EEG,YAAU,aAAOH,WAAP,CAAmB,UAAnB,CA1EZ,EA0E4C;AAC1CI,aAAW,aAAOJ,WAAP,CAAmB,OAAnB,CA3Eb;AA4EEK,kBAAgB,aAAOL,WAAP,CAAmB,YAAnB,CA5ElB;AA6EEM,kBAAgB,aAAON,WAAP,CAAmB,YAAnB;;AA7ElB;AAgFA;AACA;;AAEAL,IAAIY,YAAJ,GAAmBT,SAAnB,cAwEK,8BAAeF,QAAf,EAAyB;AAC1BY,iBAAe,mBAAUR,WAAV,CAAsB,WAAtB,EAAmCS,WAAnC,CAA+CC,QAAQC,MAAM;AAC1EA,OAAGC,IAAH,CAAQC,MAAR,CAAeC,EAAf,GAAoB,mBAAOC,OAAP,CAAe,IAAf,EAAqB,EAArB,CAApB;AACAJ,OAAGC,IAAH,CAAQC,MAAR,CAAeG,cAAf,GAAgCL,GAAGM,OAAH,CAAWC,IAAX,CAAgBC,GAAhB,CAAoBC,QAApB,CAA6B,KAA7B,CAAhC;;AAEA,WAAOV,KAAKC,EAAL,CAAP;AACD,GALc;;AAOf;AAR0B,CAAzB,CAxEL;;AAmFE;AACA;AACA;AACA;AACA;AACA;AAxFF;;AA2FA,MAAMU,gBAAgB1B,IAAI2B,WAAJ,EAAtB;;kBAEeD,a",
      "file": "schema.js",
      "sourceRoot": "/app/schema",
      "sourcesContent": [
        "/* @flow */\n\nimport { SchemaComposer } from 'graphql-compose';\nimport uuid from 'uuid/v4';\n\nimport restrictToUser from '../middleware/restrict-to-user';\nimport { ConnectionTC } from './models/connections';\n// import { ContactTC } from './models/contacts';\n// import { ContentTC } from './models/content';\n// import { EventTC } from './models/events';\n// import { LocationTC } from './models/locations';\n// import { ProviderTC } from './models/providers';\n// import { SearchTC } from './models/searches';\nimport { SessionTC } from './models/session';\n// import { TagTC } from './models/tags';\n// import { ThingTC } from './models/things';\n\nimport { UserTC } from './models/user';\n\nconst GQC = new SchemaComposer();\n\nconst { Resolver } = GQC;\n\n// create GraphQL Schema with all available resolvers\nGQC.rootQuery().addFields({\n  //Connections\n//   connectionOne: ConnectionTC.getResolver('findOne'),\n//   connectionMany: ConnectionTC.getResolver('findMany'),\n//   connectionTotal: ConnectionTC.getResolver('count'),\n//   connectionConnection: ConnectionTC.getResolver('connection'),\n//   connectionPagination: ConnectionTC.getResolver('pagination'),\n  \n//   //Contacts\n//   contactOne: ContactTC.getResolver('findOne'),\n//   contactMany: ContactTC.getResolver('findMany'),\n//   contactTotal: ContactTC.getResolver('count'),\n//   contactConnection: ContactTC.getResolver('connection'),\n//   contactPagination: ContactTC.getResolver('pagination'),\n  \n//   //Content\n//   contentOne: ContentTC.getResolver('findOne'),\n//   contentMany: ContentTC.getResolver('findMany'),\n//   contentTotal: ContentTC.getResolver('count'),\n//   contentConnection: ContentTC.getResolver('connection'),\n//   contentPagination: ContentTC.getResolver('pagination'),\n  \n//   //Events\n//   eventOne: EventTC.getResolver('findOne'),\n//   eventMany: EventTC.getResolver('findMany'),\n//   eventTotal: EventTC.getResolver('count'),\n//   eventConnection: EventTC.getResolver('connection'),\n//   eventPagination: EventTC.getResolver('pagination'),\n  \n//   //Locations\n//   locationOne: LocationTC.getResolver('findOne'),\n//   locationMany: LocationTC.getResolver('findMany'),\n//   locationTotal: LocationTC.getResolver('count'),\n//   locationConnection: LocationTC.getResolver('connection'),\n//   locationPagination: LocationTC.getResolver('pagination'),\n  \n//   //Providers\n//   providerOne: ProviderTC.getResolver('findOne'),\n//   providerMany: ProviderTC.getResolver('findMany'),\n//   providerTotal: ProviderTC.getResolver('count'),\n//   providerConnection: ProviderTC.getResolver('connection'),\n//   providerPagination: ProviderTC.getResolver('pagination'),\n  \n//   //Searches\n//   searchOne: SearchTC.getResolver('findOne'),\n//   searchMany: SearchTC.getResolver('findMany'),\n//   searchTotal: SearchTC.getResolver('count'),\n//   searchConnection: SearchTC.getResolver('connection'),\n//   searchPagination: SearchTC.getResolver('pagination'),\n\n  //Session\n  sessionOne: SessionTC.getResolver('findOne'),\n  ...restrictToUser(Resolver, {\n    sessionMany: SessionTC.getResolver('findMany'),\n  }),\n//   sessionTotal: SessionTC.getResolver('count'),\n//   sessionConnection: SessionTC.getResolver('connection'),\n//   sessionPagination: SessionTC.getResolver('pagination'),\n  \n//   //Tags\n//   tagOne: TagTC.getResolver('findOne'),\n//   tagMany: TagTC.getResolver('findMany'),\n//   tagTotal: TagTC.getResolver('count'),\n//   tagConnection: TagTC.getResolver('connection'),\n//   tagPagination: TagTC.getResolver('pagination'),\n//   //Things\n//   ThingOne: ThingTC.getResolver('findOne'),\n//   ThingMany: ThingTC.getResolver('findMany'),\n//   ThingTotal: ThingTC.getResolver('count'),\n//   ThingConnection: ThingTC.getResolver('connection'),\n//   ThingPagination: ThingTC.getResolver('pagination'),\n  \n  //Users\n  userOne: UserTC.getResolver('findOne'),\n  userMany: UserTC.getResolver('findMany'), // .debug(), // debug info to console for this resolver\n  userTotal: UserTC.getResolver('count'),\n  userConnection: UserTC.getResolver('connection'),\n  userPagination: UserTC.getResolver('pagination'),\n  \n});\n// For debug purposes you may display resolver internals in the following manner:\n// console.log(UserTC.getResolver('findMany').toString());\n\nGQC.rootMutation().addFields({\n  \n  // Connections\n//   connectionCreate: ConnectionTC.getResolver('createOne'),\n//   connectionUpdateOne: ConnectionTC.getResolver('updateOne'),\n//   connectionUpdateMany: ConnectionTC.getResolver('updateMany'),\n//   connectionRemoveOne: ConnectionTC.getResolver('removeOne'),\n//   connectionRemoveMany: ConnectionTC.getResolver('removeMany'),\n  \n//   // Contacts\n//   contactCreate: ContactTC.getResolver('createOne'),\n//   contactUpdateOne: ContactTC.getResolver('updateOne'),\n//   contactUpdateMany: ContactTC.getResolver('updateMany'),\n//   contactRemoveOne: ContactTC.getResolver('removeOne'),\n//   contactRemoveMany: ContactTC.getResolver('removeMany'),\n  \n//   // Content\n//   contentCreate: ContentTC.getResolver('createOne'),\n//   contentUpdateOne: ContentTC.getResolver('updateOne'),\n//   contentUpdateMany: ContentTC.getResolver('updateMany'),\n//   contentRemoveOne: ContentTC.getResolver('removeOne'),\n//   contentRemoveMany: ContentTC.getResolver('removeMany'),\n  \n//   // Events\n//   eventCreate: EventTC.getResolver('createOne'),\n//   eventUpdateOne: EventTC.getResolver('updateOne'),\n//   eventUpdateMany: EventTC.getResolver('updateMany'),\n//   eventRemoveOne: EventTC.getResolver('removeOne'),\n//   eventRemoveMany: EventTC.getResolver('removeMany'),\n  \n//   // Locations\n//   locationCreate: LocationTC.getResolver('createOne'),\n//   locationUpdateOne: LocationTC.getResolver('updateOne'),\n//   locationUpdateMany: LocationTC.getResolver('updateMany'),\n//   locationRemoveOne: LocationTC.getResolver('removeOne'),\n//   locationRemoveMany: LocationTC.getResolver('removeMany'),\n  \n//   // Providers\n//   providerCreate: ProviderTC.getResolver('createOne'),\n//   providerUpdateOne: ProviderTC.getResolver('updateOne'),\n//   providerUpdateMany: ProviderTC.getResolver('updateMany'),\n//   providerRemoveOne: ProviderTC.getResolver('removeOne'),\n//   providerRemoveMany: ProviderTC.getResolver('removeMany'),\n  \n//   // Searches\n//   searchCreate: SearchTC.getResolver('createOne'),\n//   searchUpdateOne: SearchTC.getResolver('updateOne'),\n//   searchUpdateMany: SearchTC.getResolver('updateMany'),\n//   searchRemoveOne: SearchTC.getResolver('removeOne'),\n//   searchRemoveMany: SearchTC.getResolver('removeMany'),\n  \n//   // Session\n//   sessionCreate: SessionTC.getResolver('createOne'),\n//   sessionUpdateOne: SessionTC.getResolver('updateOne'),\n//   sessionUpdateMany: SessionTC.getResolver('updateMany'),\n//   sessionRemoveOne: SessionTC.getResolver('removeOne'),\n//   sessionRemoveMany: SessionTC.getResolver('removeMany'),\n  \n//   // Tags\n//   tagCreate: TagTC.getResolver('createOne'),\n//   tagUpdateOne: TagTC.getResolver('updateOne'),\n//   tagUpdateMany: TagTC.getResolver('updateMany'),\n//   tagRemoveOne: TagTC.getResolver('removeOne'),\n//   tagRemoveMany: TagTC.getResolver('removeMany'),\n  \n//   // Things\n//   thingCreate: ThingTC.getResolver('createOne'),\n//   thingUpdateOne: ThingTC.getResolver('updateOne'),\n//   thingUpdateMany: ThingTC.getResolver('updateMany'),\n//   thingRemoveOne: ThingTC.getResolver('removeOne'),\n//   thingRemoveMany: ThingTC.getResolver('removeMany'),\n  \n  ...restrictToUser(Resolver, {\n    sessionCreate: SessionTC.getResolver('createOne').wrapResolve(next => rp => {\n      rp.args.record.id = uuid().replace(/-/g, '');\n      rp.args.record.user_id_string = rp.context.user._id.toString('hex');\n      \n      return next(rp); \n    }),\n    \n    // initializeConnection: ConnectionTC.getResolver('initializeConnection')\n  }),\n  \n  // Users\n  // userCreate: UserTC.getResolver('createOne'),\n  // userUpdateOne: UserTC.getResolver('updateOne'),\n  // userUpdateMany: UserTC.getResolver('updateMany'),\n  // userRemoveOne: UserTC.getResolver('removeOne'),\n  // userRemoveMany: UserTC.getResolver('removeMany'),\n});\n\nconst graphqlSchema = GQC.buildSchema();\n\nexport default graphqlSchema;"
      ]
    },
    "mtime": 1521747791939
  },
  "{\"filename\":\"/app/schema/models/user.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          },
          {
            "source": "../../lib/util/uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "UserSchema",
            "User",
            "UserTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UserSchema",
              "exported": "UserSchema"
            },
            {
              "kind": "local",
              "local": "User",
              "exported": "User"
            },
            {
              "kind": "local",
              "local": "UserTC",
              "exported": "UserTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/user.js",
      "filenameRelative": "/app/schema/models/user.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "user.js",
      "sourceFileName": "user.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "user"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserTC = exports.User = exports.UserSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nvar _uuid = require('../../lib/types/uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst AccountTypeSchema = new _mongoose2.default.Schema({\n  language: String,\n  skill: {\n    type: String,\n    enum: ['free', 'plus', 'pro']\n  }\n}, {\n  _id: false\n});\n\nconst AddressSchema = new _mongoose2.default.Schema({\n  street: String,\n  geo: {\n    type: [Number], // [<longitude>, <latitude>]\n    index: '2dsphere' // create the geospatial index\n  }\n});\n\nconst UserSchema = exports.UserSchema = new _mongoose2.default.Schema({\n  meta: {\n    type: Object\n  },\n  _id: {\n    type: Buffer\n  },\n  id: {\n    type: String,\n    get: function get() {\n      return this._id.toString('hex');\n    },\n    set: function set(val) {\n      if (val && this._conditions && this._conditions.id) {\n        this._conditions._id = (0, _uuid2.default)(val);\n\n        delete this._conditions.id;\n      }\n    }\n  },\n  name: {\n    type: String,\n    index: true\n  },\n  is_active: {\n    type: Boolean,\n    index: true\n  },\n  joined: {\n    type: Date,\n    index: false\n  },\n  last_login: {\n    type: Date,\n    index: false\n  },\n  settings: {\n    explorer: {\n      initial_searches: {\n        type: Boolean,\n        index: false\n      }\n    }\n  },\n  social_accounts: {\n    type: Array,\n    index: false\n  },\n  subscriptions: {\n    type: Array,\n    index: false\n  },\n  age: {\n    type: Number,\n    index: true\n  },\n  accountType: {\n    type: [AccountTypeSchema],\n    default: []\n  },\n  contacts: {\n    // another mongoose way for providing embedded documents\n    email: String,\n    phones: [String] // array of strings\n  },\n  gender: {\n    // enum field with values\n    type: String,\n    enum: ['male', 'female', 'ladyboy', 'ai', 'animal', 'mineral', 'other']\n  },\n  address: {\n    type: AddressSchema\n  },\n  otherData: {\n    type: _mongoose2.default.Schema.Types.Mixed,\n    description: 'Some dynamic data'\n  }\n}, {\n  collection: 'users'\n  //     toObject: {\n  //       getters: true,\n  //       transform: function(doc, ret) {\n  //         console.log('Transforming UUID to buffer');\n  //         ret._id = Buffer.from(ret._id, 'hex');\n\n  //         return ret;\n  //      }\n  //     },\n  //     toJSON: {\n  //       getters: true,\n  //       transform: function(doc, ret) {\n  //         console.log('Transforming UUID to string');\n  //         ret._id = ret._id.toString('hex');\n\n  //         return ret;\n  //       }\n  //     }\n});\n\n// UserSchema.virtual('_id')\n//   .set(function(uuid4ID) {\n//     this._id = Buffer.from(uuid4ID, 'hex')[0];;\n//   })\n//   .get(function() {\n//     return this._id.toString('hex');\n//   });\n\nUserSchema.index({ gender: 1, age: -1 });\n\nconst User = exports.User = _mongoose2.default.model('User', UserSchema);\n\nconst UserTC = exports.UserTC = (0, _node2.default)(User);\n\n// UserTC.addFields({\n//   _id: { // extended\n//     type: 'String', // String, Int, Float, Boolean, ID, Json, array []\n//     description: 'uuid4 id',\n//     resolve: (source, args, context, info) => {\n//       return source._id.toString('hex');\n//     },\n//   }\n// });\n\n\n// UserTC.addFields({\n//   id: {\n//     type: 'String', \n//     description: 'uuid4 id',\n//     resolve: (source, args, context, info) => {\n//       return source._id.toString('hex');\n//     },\n//   }\n// });\n\nUserTC.setResolver('findMany', UserTC.getResolver('findMany').addFilterArg({\n  name: 'geoDistance',\n  type: `input GeoDistance {\n      lng: Float!\n      lat: Float!\n      # Distance in meters\n      distance: Float!\n    }`,\n  description: 'Search by distance in meters',\n  query: (rawQuery, value, resolveParams) => {\n    // eslint-disable-line\n    if (!value.lng || !value.lat || !value.distance) return;\n    // read more https://docs.mongodb.com/manual/tutorial/query-a-2dsphere-index/\n    rawQuery['address.geo'] = {\n      $near: {\n        $geometry: {\n          type: 'Point',\n          coordinates: [value.lng, value.lat]\n        },\n        $maxDistance: value.distance // <distance in meters>\n      }\n    };\n  }\n})\n// /* FOR DEBUG */\n//   .debug()\n// /* OR MORE PRECISELY */\n//   .debugParams()\n//   .debugPayload()\n//   .debugExecTime()\n);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiQWNjb3VudFR5cGVTY2hlbWEiLCJTY2hlbWEiLCJsYW5ndWFnZSIsIlN0cmluZyIsInNraWxsIiwidHlwZSIsImVudW0iLCJfaWQiLCJBZGRyZXNzU2NoZW1hIiwic3RyZWV0IiwiZ2VvIiwiTnVtYmVyIiwiaW5kZXgiLCJVc2VyU2NoZW1hIiwibWV0YSIsIk9iamVjdCIsIkJ1ZmZlciIsImlkIiwiZ2V0IiwidG9TdHJpbmciLCJzZXQiLCJ2YWwiLCJfY29uZGl0aW9ucyIsIm5hbWUiLCJpc19hY3RpdmUiLCJCb29sZWFuIiwiam9pbmVkIiwiRGF0ZSIsImxhc3RfbG9naW4iLCJzZXR0aW5ncyIsImV4cGxvcmVyIiwiaW5pdGlhbF9zZWFyY2hlcyIsInNvY2lhbF9hY2NvdW50cyIsIkFycmF5Iiwic3Vic2NyaXB0aW9ucyIsImFnZSIsImFjY291bnRUeXBlIiwiZGVmYXVsdCIsImNvbnRhY3RzIiwiZW1haWwiLCJwaG9uZXMiLCJnZW5kZXIiLCJhZGRyZXNzIiwib3RoZXJEYXRhIiwiVHlwZXMiLCJNaXhlZCIsImRlc2NyaXB0aW9uIiwiY29sbGVjdGlvbiIsIlVzZXIiLCJtb2RlbCIsIlVzZXJUQyIsInNldFJlc29sdmVyIiwiZ2V0UmVzb2x2ZXIiLCJhZGRGaWx0ZXJBcmciLCJxdWVyeSIsInJhd1F1ZXJ5IiwidmFsdWUiLCJyZXNvbHZlUGFyYW1zIiwibG5nIiwibGF0IiwiZGlzdGFuY2UiLCIkbmVhciIsIiRnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwiJG1heERpc3RhbmNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxNQUFNQSxvQkFBb0IsSUFBSSxtQkFBU0MsTUFBYixDQUN4QjtBQUNFQyxZQUFVQyxNQURaO0FBRUVDLFNBQU87QUFDTEMsVUFBTUYsTUFERDtBQUVMRyxVQUFNLENBQUMsTUFBRCxFQUFTLE1BQVQsRUFBaUIsS0FBakI7QUFGRDtBQUZULENBRHdC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QUFmOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBRSxPQUFPQyxXQUFQLENBQ0UsVUFERixFQUVFRCxPQUFPRSxXQUFQLENBQW1CLFVBQW5CLEVBQStCQyxZQUEvQixDQUE0QztBQUMxQzlCLFFBQU0sYUFEb0M7QUFFMUNsQixRQUFPOzs7OztNQUZtQztBQVExQ3lDLGVBQWEsOEJBUjZCO0FBUzFDUSxTQUFPLENBQUNDLFFBQUQsRUFBV0MsS0FBWCxFQUFrQkMsYUFBbEIsS0FBb0M7QUFBRTtBQUMzQyxRQUFJLENBQUNELE1BQU1FLEdBQVAsSUFBYyxDQUFDRixNQUFNRyxHQUFyQixJQUE0QixDQUFDSCxNQUFNSSxRQUF2QyxFQUFpRDtBQUNqRDtBQUNBTCxhQUFTLGFBQVQsSUFBMEI7QUFDeEJNLGFBQU87QUFDTEMsbUJBQVc7QUFDVHpELGdCQUFNLE9BREc7QUFFVDBELHVCQUFhLENBQUNQLE1BQU1FLEdBQVAsRUFBWUYsTUFBTUcsR0FBbEI7QUFGSixTQUROO0FBS0xLLHNCQUFjUixNQUFNSSxRQUxmLENBS3lCO0FBTHpCO0FBRGlCLEtBQTFCO0FBU0Q7QUFyQnlDLENBQTVDO0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlCRiIsImZpbGUiOiJ1c2VyLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NoZW1hL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY29tcG9zZVdpdGhNb25nb29zZSBmcm9tICdncmFwaHFsLWNvbXBvc2UtbW9uZ29vc2Uvbm9kZTgnO1xuaW1wb3J0IHV1aWQgZnJvbSAnLi4vLi4vbGliL3R5cGVzL3V1aWQnO1xuXG5jb25zdCBBY2NvdW50VHlwZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICBsYW5ndWFnZTogU3RyaW5nLFxuICAgIHNraWxsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBlbnVtOiBbJ2ZyZWUnLCAncGx1cycsICdwcm8nXSxcbiAgICB9LFxuICB9LFxuICB7XG4gICAgX2lkOiBmYWxzZSxcbiAgfVxuKTtcblxuY29uc3QgQWRkcmVzc1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBzdHJlZXQ6IFN0cmluZyxcbiAgZ2VvOiB7XG4gICAgdHlwZTogW051bWJlcl0sIC8vIFs8bG9uZ2l0dWRlPiwgPGxhdGl0dWRlPl1cbiAgICBpbmRleDogJzJkc3BoZXJlJywgLy8gY3JlYXRlIHRoZSBnZW9zcGF0aWFsIGluZGV4XG4gIH0sXG59KTtcblxuXG5leHBvcnQgY29uc3QgVXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICBtZXRhOiB7XG4gICAgICB0eXBlOiBPYmplY3RcbiAgICB9LFxuICAgIF9pZDp7XG4gICAgICB0eXBlOiBCdWZmZXJcbiAgICB9LFxuICAgIGlkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWQudG9TdHJpbmcoJ2hleCcpXG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgaWYgKHZhbCAmJiB0aGlzLl9jb25kaXRpb25zICYmIHRoaXMuX2NvbmRpdGlvbnMuaWQpIHtcbiAgICAgICAgICB0aGlzLl9jb25kaXRpb25zLl9pZCA9IHV1aWQodmFsKTtcbiAgICAgICAgICBcbiAgICAgICAgICBkZWxldGUgdGhpcy5fY29uZGl0aW9ucy5pZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgbmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IHRydWUsXG4gICAgfSxcbiAgICBpc19hY3RpdmU6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBpbmRleDogdHJ1ZSxcbiAgICB9LFxuICAgIGpvaW5lZDoge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgbGFzdF9sb2dpbjoge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgc2V0dGluZ3M6IHtcbiAgICAgIGV4cGxvcmVyOiB7XG4gICAgICAgIGluaXRpYWxfc2VhcmNoZXM6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBzb2NpYWxfYWNjb3VudHM6IHtcbiAgICAgIHR5cGU6IEFycmF5LFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBzdWJzY3JpcHRpb25zOiB7XG4gICAgICB0eXBlOiBBcnJheSxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgYWdlOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBpbmRleDogdHJ1ZSxcbiAgICB9LFxuICAgIGFjY291bnRUeXBlOiB7XG4gICAgICB0eXBlOiBbQWNjb3VudFR5cGVTY2hlbWFdLFxuICAgICAgZGVmYXVsdDogW10sXG4gICAgfSwgXG4gICAgY29udGFjdHM6IHtcbiAgICAgIC8vIGFub3RoZXIgbW9uZ29vc2Ugd2F5IGZvciBwcm92aWRpbmcgZW1iZWRkZWQgZG9jdW1lbnRzXG4gICAgICBlbWFpbDogU3RyaW5nLFxuICAgICAgcGhvbmVzOiBbU3RyaW5nXSwgLy8gYXJyYXkgb2Ygc3RyaW5nc1xuICAgIH0sXG4gICAgZ2VuZGVyOiB7XG4gICAgICAvLyBlbnVtIGZpZWxkIHdpdGggdmFsdWVzXG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBlbnVtOiBbJ21hbGUnLCAnZmVtYWxlJywgJ2xhZHlib3knLCAnYWknLCAnYW5pbWFsJywgJ21pbmVyYWwnLCAnb3RoZXInXSxcbiAgICB9LFxuICAgIGFkZHJlc3M6IHtcbiAgICAgIHR5cGU6IEFkZHJlc3NTY2hlbWEsXG4gICAgfSxcbiAgICBvdGhlckRhdGE6IHtcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5NaXhlZCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU29tZSBkeW5hbWljIGRhdGEnLFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjb2xsZWN0aW9uOiAndXNlcnMnLFxuLy8gICAgIHRvT2JqZWN0OiB7XG4vLyAgICAgICBnZXR0ZXJzOiB0cnVlLFxuLy8gICAgICAgdHJhbnNmb3JtOiBmdW5jdGlvbiAoZG9jLCByZXQpIHtcbi8vICAgICAgICAgY29uc29sZS5sb2coJ1RyYW5zZm9ybWluZyBVVUlEIHRvIGJ1ZmZlcicpO1xuLy8gICAgICAgICByZXQuX2lkID0gQnVmZmVyLmZyb20ocmV0Ll9pZCwgJ2hleCcpO1xuXG4vLyAgICAgICAgIHJldHVybiByZXQ7XG4vLyAgICAgIH1cbi8vICAgICB9LFxuLy8gICAgIHRvSlNPTjoge1xuLy8gICAgICAgZ2V0dGVyczogdHJ1ZSxcbi8vICAgICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKGRvYywgcmV0KSB7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKCdUcmFuc2Zvcm1pbmcgVVVJRCB0byBzdHJpbmcnKTtcbi8vICAgICAgICAgcmV0Ll9pZCA9IHJldC5faWQudG9TdHJpbmcoJ2hleCcpO1xuXG4vLyAgICAgICAgIHJldHVybiByZXQ7XG4vLyAgICAgICB9XG4vLyAgICAgfVxuICB9XG4pO1xuXG4vLyBVc2VyU2NoZW1hLnZpcnR1YWwoJ19pZCcpXG4vLyAgIC5zZXQoZnVuY3Rpb24gKHV1aWQ0SUQpIHtcbi8vICAgICB0aGlzLl9pZCA9IEJ1ZmZlci5mcm9tKHV1aWQ0SUQsICdoZXgnKVswXTs7XG4vLyAgIH0pXG4vLyAgIC5nZXQoZnVuY3Rpb24gKCkge1xuLy8gICAgIHJldHVybiB0aGlzLl9pZC50b1N0cmluZygnaGV4Jyk7XG4vLyAgIH0pO1xuXG5Vc2VyU2NoZW1hLmluZGV4KHsgZ2VuZGVyOiAxLCBhZ2U6IC0xIH0pO1xuXG5leHBvcnQgY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgVXNlclNjaGVtYSk7XG5cbmV4cG9ydCBjb25zdCBVc2VyVEMgPSBjb21wb3NlV2l0aE1vbmdvb3NlKFVzZXIpO1xuXG4vLyBVc2VyVEMuYWRkRmllbGRzKHtcbi8vICAgX2lkOiB7IC8vIGV4dGVuZGVkXG4vLyAgICAgdHlwZTogJ1N0cmluZycsIC8vIFN0cmluZywgSW50LCBGbG9hdCwgQm9vbGVhbiwgSUQsIEpzb24sIGFycmF5IFtdXG4vLyAgICAgZGVzY3JpcHRpb246ICd1dWlkNCBpZCcsXG4vLyAgICAgcmVzb2x2ZTogKHNvdXJjZSwgYXJncywgY29udGV4dCwgaW5mbykgPT4ge1xuLy8gICAgICAgcmV0dXJuIHNvdXJjZS5faWQudG9TdHJpbmcoJ2hleCcpO1xuLy8gICAgIH0sXG4vLyAgIH1cbi8vIH0pO1xuXG5cbi8vIFVzZXJUQy5hZGRGaWVsZHMoe1xuLy8gICBpZDoge1xuLy8gICAgIHR5cGU6ICdTdHJpbmcnLCBcbi8vICAgICBkZXNjcmlwdGlvbjogJ3V1aWQ0IGlkJyxcbi8vICAgICByZXNvbHZlOiAoc291cmNlLCBhcmdzLCBjb250ZXh0LCBpbmZvKSA9PiB7XG4vLyAgICAgICByZXR1cm4gc291cmNlLl9pZC50b1N0cmluZygnaGV4Jyk7XG4vLyAgICAgfSxcbi8vICAgfVxuLy8gfSk7XG5cblVzZXJUQy5zZXRSZXNvbHZlcihcbiAgJ2ZpbmRNYW55JyxcbiAgVXNlclRDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLmFkZEZpbHRlckFyZyh7XG4gICAgbmFtZTogJ2dlb0Rpc3RhbmNlJyxcbiAgICB0eXBlOiBgaW5wdXQgR2VvRGlzdGFuY2Uge1xuICAgICAgbG5nOiBGbG9hdCFcbiAgICAgIGxhdDogRmxvYXQhXG4gICAgICAjIERpc3RhbmNlIGluIG1ldGVyc1xuICAgICAgZGlzdGFuY2U6IEZsb2F0IVxuICAgIH1gLFxuICAgIGRlc2NyaXB0aW9uOiAnU2VhcmNoIGJ5IGRpc3RhbmNlIGluIG1ldGVycycsXG4gICAgcXVlcnk6IChyYXdRdWVyeSwgdmFsdWUsIHJlc29sdmVQYXJhbXMpID0+IHsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgaWYgKCF2YWx1ZS5sbmcgfHwgIXZhbHVlLmxhdCB8fCAhdmFsdWUuZGlzdGFuY2UpIHJldHVybjtcbiAgICAgIC8vIHJlYWQgbW9yZSBodHRwczovL2RvY3MubW9uZ29kYi5jb20vbWFudWFsL3R1dG9yaWFsL3F1ZXJ5LWEtMmRzcGhlcmUtaW5kZXgvXG4gICAgICByYXdRdWVyeVsnYWRkcmVzcy5nZW8nXSA9IHtcbiAgICAgICAgJG5lYXI6IHtcbiAgICAgICAgICAkZ2VvbWV0cnk6IHtcbiAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgICAgICBjb29yZGluYXRlczogW3ZhbHVlLmxuZywgdmFsdWUubGF0XSxcbiAgICAgICAgICB9LFxuICAgICAgICAgICRtYXhEaXN0YW5jZTogdmFsdWUuZGlzdGFuY2UsIC8vIDxkaXN0YW5jZSBpbiBtZXRlcnM+XG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0sXG4gIH0pXG4gIC8vIC8qIEZPUiBERUJVRyAqL1xuICAvLyAgIC5kZWJ1ZygpXG4gIC8vIC8qIE9SIE1PUkUgUFJFQ0lTRUxZICovXG4gIC8vICAgLmRlYnVnUGFyYW1zKClcbiAgLy8gICAuZGVidWdQYXlsb2FkKClcbiAgLy8gICAuZGVidWdFeGVjVGltZSgpXG4pOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "AccountTypeSchema",
        "Schema",
        "language",
        "String",
        "skill",
        "type",
        "enum",
        "_id",
        "AddressSchema",
        "street",
        "geo",
        "Number",
        "index",
        "UserSchema",
        "meta",
        "Object",
        "Buffer",
        "id",
        "get",
        "toString",
        "set",
        "val",
        "_conditions",
        "name",
        "is_active",
        "Boolean",
        "joined",
        "Date",
        "last_login",
        "settings",
        "explorer",
        "initial_searches",
        "social_accounts",
        "Array",
        "subscriptions",
        "age",
        "accountType",
        "default",
        "contacts",
        "email",
        "phones",
        "gender",
        "address",
        "otherData",
        "Types",
        "Mixed",
        "description",
        "collection",
        "User",
        "model",
        "UserTC",
        "setResolver",
        "getResolver",
        "addFilterArg",
        "query",
        "rawQuery",
        "value",
        "resolveParams",
        "lng",
        "lat",
        "distance",
        "$near",
        "$geometry",
        "coordinates",
        "$maxDistance"
      ],
      "mappings": "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",
      "file": "user.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\nimport uuid from '../../lib/types/uuid';\n\nconst AccountTypeSchema = new mongoose.Schema(\n  {\n    language: String,\n    skill: {\n      type: String,\n      enum: ['free', 'plus', 'pro'],\n    },\n  },\n  {\n    _id: false,\n  }\n);\n\nconst AddressSchema = new mongoose.Schema({\n  street: String,\n  geo: {\n    type: [Number], // [<longitude>, <latitude>]\n    index: '2dsphere', // create the geospatial index\n  },\n});\n\n\nexport const UserSchema = new mongoose.Schema(\n  {\n    meta: {\n      type: Object\n    },\n    _id:{\n      type: Buffer\n    },\n    id: {\n      type: String,\n      get: function() {\n        return this._id.toString('hex')\n      },\n      set: function(val) {\n        if (val && this._conditions && this._conditions.id) {\n          this._conditions._id = uuid(val);\n          \n          delete this._conditions.id;\n        }\n      }\n    },\n    name: {\n      type: String,\n      index: true,\n    },\n    is_active: {\n      type: Boolean,\n      index: true,\n    },\n    joined: {\n      type: Date,\n      index: false\n    },\n    last_login: {\n      type: Date,\n      index: false\n    },\n    settings: {\n      explorer: {\n        initial_searches: {\n          type: Boolean,\n          index: false\n        }\n      }\n    },\n    social_accounts: {\n      type: Array,\n      index: false\n    },\n    subscriptions: {\n      type: Array,\n      index: false\n    },\n    age: {\n      type: Number,\n      index: true,\n    },\n    accountType: {\n      type: [AccountTypeSchema],\n      default: [],\n    }, \n    contacts: {\n      // another mongoose way for providing embedded documents\n      email: String,\n      phones: [String], // array of strings\n    },\n    gender: {\n      // enum field with values\n      type: String,\n      enum: ['male', 'female', 'ladyboy', 'ai', 'animal', 'mineral', 'other'],\n    },\n    address: {\n      type: AddressSchema,\n    },\n    otherData: {\n      type: mongoose.Schema.Types.Mixed,\n      description: 'Some dynamic data',\n    },\n  },\n  {\n    collection: 'users',\n//     toObject: {\n//       getters: true,\n//       transform: function(doc, ret) {\n//         console.log('Transforming UUID to buffer');\n//         ret._id = Buffer.from(ret._id, 'hex');\n\n//         return ret;\n//      }\n//     },\n//     toJSON: {\n//       getters: true,\n//       transform: function(doc, ret) {\n//         console.log('Transforming UUID to string');\n//         ret._id = ret._id.toString('hex');\n\n//         return ret;\n//       }\n//     }\n  }\n);\n\n// UserSchema.virtual('_id')\n//   .set(function(uuid4ID) {\n//     this._id = Buffer.from(uuid4ID, 'hex')[0];;\n//   })\n//   .get(function() {\n//     return this._id.toString('hex');\n//   });\n\nUserSchema.index({ gender: 1, age: -1 });\n\nexport const User = mongoose.model('User', UserSchema);\n\nexport const UserTC = composeWithMongoose(User);\n\n// UserTC.addFields({\n//   _id: { // extended\n//     type: 'String', // String, Int, Float, Boolean, ID, Json, array []\n//     description: 'uuid4 id',\n//     resolve: (source, args, context, info) => {\n//       return source._id.toString('hex');\n//     },\n//   }\n// });\n\n\n// UserTC.addFields({\n//   id: {\n//     type: 'String', \n//     description: 'uuid4 id',\n//     resolve: (source, args, context, info) => {\n//       return source._id.toString('hex');\n//     },\n//   }\n// });\n\nUserTC.setResolver(\n  'findMany',\n  UserTC.getResolver('findMany').addFilterArg({\n    name: 'geoDistance',\n    type: `input GeoDistance {\n      lng: Float!\n      lat: Float!\n      # Distance in meters\n      distance: Float!\n    }`,\n    description: 'Search by distance in meters',\n    query: (rawQuery, value, resolveParams) => { // eslint-disable-line\n      if (!value.lng || !value.lat || !value.distance) return;\n      // read more https://docs.mongodb.com/manual/tutorial/query-a-2dsphere-index/\n      rawQuery['address.geo'] = {\n        $near: {\n          $geometry: {\n            type: 'Point',\n            coordinates: [value.lng, value.lat],\n          },\n          $maxDistance: value.distance, // <distance in meters>\n        },\n      };\n    },\n  })\n  // /* FOR DEBUG */\n  //   .debug()\n  // /* OR MORE PRECISELY */\n  //   .debugParams()\n  //   .debugPayload()\n  //   .debugExecTime()\n);"
      ]
    },
    "mtime": 1521659680836
  },
  "{\"filename\":\"/app/schema/models/session.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../../lib/util/uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          },
          {
            "source": "uuid/v4",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "nodeUUID"
              }
            ]
          },
          {
            "source": "./user",
            "imported": [
              "UserTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UserTC",
                "local": "UserTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "SessionSchema",
            "Session",
            "SessionTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "SessionSchema",
              "exported": "SessionSchema"
            },
            {
              "kind": "local",
              "local": "Session",
              "exported": "Session"
            },
            {
              "kind": "local",
              "local": "SessionTC",
              "exported": "SessionTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/session.js",
      "filenameRelative": "/app/schema/models/session.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "session.js",
      "sourceFileName": "session.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "session"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SessionTC = exports.Session = exports.SessionSchema = undefined;\n\nvar _uuid = require('../../lib/types/uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _user = require('./user');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst SessionSchema = exports.SessionSchema = new _mongoose2.default.Schema({\n  _id: {\n    type: Buffer\n  },\n  id: {\n    type: String,\n    get: function get() {\n      if (this._id) {\n        return this._id.toString('hex');\n      }\n    },\n    set: function set(val) {\n      if (this._conditions && this._conditions.id) {\n        this._conditions._id = (0, _uuid2.default)(val);\n\n        delete this._conditions.id;\n      }\n\n      this._id = (0, _uuid2.default)(val);\n    }\n  },\n  created: {\n    type: Date\n  },\n  csrf_secret: {\n    type: String\n  },\n  expires: {\n    type: Date\n  },\n  ip: {\n    type: String\n  },\n  meta: {\n    agent: {\n      type: String\n    },\n    browser: {\n      family: {\n        type: String\n      },\n      version: {\n        type: String\n      }\n    },\n    device: {\n      family: {\n        type: String\n      },\n      version: {\n        type: String\n      }\n    },\n    os: {\n      family: {\n        type: String\n      },\n      version: {\n        type: String\n      }\n    }\n  },\n  persist: {\n    type: Boolean\n  },\n  token: {\n    type: String\n  },\n  ttl: {\n    type: Date\n  },\n  user_id: {\n    type: Buffer\n  },\n  user_id_string: {\n    type: String,\n    get: function get() {\n      return this._id.toString('hex');\n    },\n    set: function set(val) {\n      if (val && this._conditions && this._conditions.user_id_string) {\n        this._conditions.user_id = (0, _uuid2.default)(val);\n\n        delete this._conditions.user_id_string;\n      }\n\n      this.user_id = (0, _uuid2.default)(val);\n    }\n  }\n}, {\n  collection: 'sessions'\n});\n\nconst Session = exports.Session = _mongoose2.default.model('Session', SessionSchema);\n\nconst SessionTC = exports.SessionTC = (0, _node2.default)(Session);\n\nSessionTC.addRelation('user', {\n  resolver: () => _user.UserTC.getResolver('findOne'),\n  prepareArgs: {\n    filter: source => ({ id: source.user_id.toString('hex') })\n  },\n  projection: {\n    id: true,\n    is_active: true,\n    user_id: true\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlc3Npb24uanMiXSwibmFtZXMiOlsiU2Vzc2lvblNjaGVtYSIsIlNjaGVtYSIsIl9pZCIsInR5cGUiLCJCdWZmZXIiLCJpZCIsIlN0cmluZyIsImdldCIsInRvU3RyaW5nIiwic2V0IiwidmFsIiwiX2NvbmRpdGlvbnMiLCJjcmVhdGVkIiwiRGF0ZSIsImNzcmZfc2VjcmV0IiwiZXhwaXJlcyIsImlwIiwibWV0YSIsImFnZW50IiwiYnJvd3NlciIsImZhbWlseSIsInZlcnNpb24iLCJkZXZpY2UiLCJvcyIsInBlcnNpc3QiLCJCb29sZWFuIiwidG9rZW4iLCJ0dGwiLCJ1c2VyX2lkIiwidXNlcl9pZF9zdHJpbmciLCJjb2xsZWN0aW9uIiwiU2Vzc2lvbiIsIm1vZGVsIiwiU2Vzc2lvblRDIiwiYWRkUmVsYXRpb24iLCJyZXNvbHZlciIsImdldFJlc29sdmVyIiwicHJlcGFyZUFyZ3MiLCJmaWx0ZXIiLCJzb3VyY2UiLCJwcm9qZWN0aW9uIiwiaXNfYWN0aXZlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUE7Ozs7QUFFQTs7OztBQUVPLE1BQU1BLHdDQUFnQixJQUFJLG1CQUFTQyxNQUFiLENBQzNCO0FBQ0VDLE9BQUs7QUFDSEMsVUFBTUM7QUFESCxHQURQO0FBSUVDLE1BQUk7QUFDRkYsVUFBTUcsTUFESjtBQUVGQyxTQUFLLGVBQVc7QUFDZCxVQUFJLEtBQUtMLEdBQVQsRUFBYztBQUNaLGVBQU8sS0FBS0EsR0FBTCxDQUFTTSxRQUFULENBQWtCLEtBQWxCLENBQVA7QUFDRDtBQUNGLEtBTkM7QUFPRkMsU0FBSyxhQUFTQyxHQUFULEVBQWM7QUFDakIsVUFBSSxLQUFLQyxXQUFMLElBQW9CLEtBQUtBLFdBQUwsQ0FBaUJOLEVBQXpDLEVBQTZDO0FBQzNDLGFBQUtNLFdBQUwsQ0FBaUJULEdBQWpCLEdBQXVCLG9CQUFLUSxHQUFMLENBQXZCOztBQUVBLGVBQU8sS0FBS0MsV0FBTCxDQUFpQk4sRUFBeEI7QUFDRDs7QUFFRCxXQUFLSCxHQUFMLEdBQVcsb0JBQUtRLEdBQUwsQ0FBWDtBQUNEO0FBZkMsR0FKTjtBQXFCRUUsV0FBUztBQUNQVCxVQUFNVTtBQURDLEdBckJYO0FBd0JFQyxlQUFhO0FBQ1hYLFVBQU1HO0FBREssR0F4QmY7QUEyQkVTLFdBQVM7QUFDUFosVUFBTVU7QUFEQyxHQTNCWDtBQThCRUcsTUFBSTtBQUNGYixVQUFNRztBQURKLEdBOUJOO0FBaUNFVyxRQUFNO0FBQ0pDLFdBQU87QUFDTGYsWUFBTUc7QUFERCxLQURIO0FBSUphLGFBQVM7QUFDUEMsY0FBUTtBQUNOakIsY0FBTUc7QUFEQSxPQUREO0FBSVBlLGVBQVM7QUFDUGxCLGNBQU1HO0FBREM7QUFKRixLQUpMO0FBWUpnQixZQUFRO0FBQ05GLGNBQVE7QUFDTmpCLGNBQU1HO0FBREEsT0FERjtBQUlOZSxlQUFTO0FBQ1BsQixjQUFNRztBQURDO0FBSkgsS0FaSjtBQW9CSmlCLFFBQUk7QUFDRkgsY0FBUTtBQUNOakIsY0FBTUc7QUFEQSxPQUROO0FBSUZlLGVBQVM7QUFDUGxCLGNBQU1HO0FBREM7QUFKUDtBQXBCQSxHQWpDUjtBQThERWtCLFdBQVM7QUFDUHJCLFVBQU1zQjtBQURDLEdBOURYO0FBaUVFQyxTQUFPO0FBQ0x2QixVQUFNRztBQURELEdBakVUO0FBb0VFcUIsT0FBSztBQUNIeEIsVUFBTVU7QUFESCxHQXBFUDtBQXVFRWUsV0FBUztBQUNQekIsVUFBTUM7QUFEQyxHQXZFWDtBQTBFRXlCLGtCQUFnQjtBQUNkMUIsVUFBTUcsTUFEUTtBQUVkQyxTQUFLLGVBQVc7QUFDZCxhQUFPLEtBQUtMLEdBQUwsQ0FBU00sUUFBVCxDQUFrQixLQUFsQixDQUFQO0FBQ0QsS0FKYTtBQUtkQyxTQUFLLGFBQVNDLEdBQVQsRUFBYztBQUNqQixVQUFJQSxPQUFPLEtBQUtDLFdBQVosSUFBMkIsS0FBS0EsV0FBTCxDQUFpQmtCLGNBQWhELEVBQWdFO0FBQzlELGFBQUtsQixXQUFMLENBQWlCaUIsT0FBakIsR0FBMkIsb0JBQUtsQixHQUFMLENBQTNCOztBQUVBLGVBQU8sS0FBS0MsV0FBTCxDQUFpQmtCLGNBQXhCO0FBQ0Q7O0FBRUQsV0FBS0QsT0FBTCxHQUFlLG9CQUFLbEIsR0FBTCxDQUFmO0FBQ0Q7QUFiYTtBQTFFbEIsQ0FEMkIsRUEyRjNCO0FBQ0VvQixjQUFZO0FBRGQsQ0EzRjJCLENBQXRCOztBQWdHQSxNQUFNQyw0QkFBVSxtQkFBU0MsS0FBVCxDQUFlLFNBQWYsRUFBMEJoQyxhQUExQixDQUFoQjs7QUFFQSxNQUFNaUMsZ0NBQVksb0JBQW9CRixPQUFwQixDQUFsQjs7QUFFUEUsVUFBVUMsV0FBVixDQUFzQixNQUF0QixFQUE4QjtBQUM1QkMsWUFBVSxNQUFNLGFBQU9DLFdBQVAsQ0FBbUIsU0FBbkIsQ0FEWTtBQUU1QkMsZUFBYTtBQUNYQyxZQUFRQyxXQUFXLEVBQUVsQyxJQUFJa0MsT0FBT1gsT0FBUCxDQUFlcEIsUUFBZixDQUF3QixLQUF4QixDQUFOLEVBQVg7QUFERyxHQUZlO0FBSzVCZ0MsY0FBWTtBQUNWbkMsUUFBSSxJQURNO0FBRVZvQyxlQUFXLElBRkQ7QUFHVmIsYUFBUztBQUhDO0FBTGdCLENBQTlCIiwiZmlsZSI6InNlc3Npb24uanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuaW1wb3J0IHV1aWQgZnJvbSAnLi4vLi4vbGliL3R5cGVzL3V1aWQnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBjb21wb3NlV2l0aE1vbmdvb3NlIGZyb20gJ2dyYXBocWwtY29tcG9zZS1tb25nb29zZS9ub2RlOCc7XG5cbmltcG9ydCBub2RlVVVJRCBmcm9tICd1dWlkL3Y0JztcblxuaW1wb3J0IHsgVXNlclRDIH0gZnJvbSAnLi91c2VyJztcblxuZXhwb3J0IGNvbnN0IFNlc3Npb25TY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgX2lkOiB7XG4gICAgICB0eXBlOiBCdWZmZXJcbiAgICB9LFxuICAgIGlkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5faWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5faWQudG9TdHJpbmcoJ2hleCcpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmRpdGlvbnMgJiYgdGhpcy5fY29uZGl0aW9ucy5pZCkge1xuICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbnMuX2lkID0gdXVpZCh2YWwpO1xuICAgICAgICAgIFxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jb25kaXRpb25zLmlkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pZCA9IHV1aWQodmFsKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNyZWF0ZWQ6IHtcbiAgICAgIHR5cGU6IERhdGVcbiAgICB9LFxuICAgIGNzcmZfc2VjcmV0OiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIGV4cGlyZXM6IHtcbiAgICAgIHR5cGU6IERhdGVcbiAgICB9LFxuICAgIGlwOiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIG1ldGE6IHtcbiAgICAgIGFnZW50OiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyBcbiAgICAgIH0sXG4gICAgICBicm93c2VyOiB7XG4gICAgICAgIGZhbWlseToge1xuICAgICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgICB9LFxuICAgICAgICB2ZXJzaW9uOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgZGV2aWNlOiB7XG4gICAgICAgIGZhbWlseToge1xuICAgICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgICB9LFxuICAgICAgICB2ZXJzaW9uOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgb3M6IHtcbiAgICAgICAgZmFtaWx5OiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICAgIH0sXG4gICAgICAgIHZlcnNpb246IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBwZXJzaXN0OiB7XG4gICAgICB0eXBlOiBCb29sZWFuXG4gICAgfSxcbiAgICB0b2tlbjoge1xuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSxcbiAgICB0dGw6IHtcbiAgICAgIHR5cGU6IERhdGVcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgIHR5cGU6IEJ1ZmZlclxuICAgIH0sXG4gICAgdXNlcl9pZF9zdHJpbmc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZC50b1N0cmluZygnaGV4JylcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBpZiAodmFsICYmIHRoaXMuX2NvbmRpdGlvbnMgJiYgdGhpcy5fY29uZGl0aW9ucy51c2VyX2lkX3N0cmluZykge1xuICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbnMudXNlcl9pZCA9IHV1aWQodmFsKTtcbiAgICAgICAgICBcbiAgICAgICAgICBkZWxldGUgdGhpcy5fY29uZGl0aW9ucy51c2VyX2lkX3N0cmluZztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy51c2VyX2lkID0gdXVpZCh2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAge1xuICAgIGNvbGxlY3Rpb246ICdzZXNzaW9ucycsXG4gIH1cbik7XG5cbmV4cG9ydCBjb25zdCBTZXNzaW9uID0gbW9uZ29vc2UubW9kZWwoJ1Nlc3Npb24nLCBTZXNzaW9uU2NoZW1hKTtcblxuZXhwb3J0IGNvbnN0IFNlc3Npb25UQyA9IGNvbXBvc2VXaXRoTW9uZ29vc2UoU2Vzc2lvbik7XG5cblNlc3Npb25UQy5hZGRSZWxhdGlvbigndXNlcicsIHtcbiAgcmVzb2x2ZXI6ICgpID0+IFVzZXJUQy5nZXRSZXNvbHZlcignZmluZE9uZScpLFxuICBwcmVwYXJlQXJnczoge1xuICAgIGZpbHRlcjogc291cmNlID0+ICh7IGlkOiBzb3VyY2UudXNlcl9pZC50b1N0cmluZygnaGV4JykgfSksXG4gIH0sXG4gIHByb2plY3Rpb246IHtcbiAgICBpZDogdHJ1ZSxcbiAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgdXNlcl9pZDogdHJ1ZSBcbiAgfSxcbn0pOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "session.js"
      ],
      "names": [
        "SessionSchema",
        "Schema",
        "_id",
        "type",
        "Buffer",
        "id",
        "String",
        "get",
        "toString",
        "set",
        "val",
        "_conditions",
        "created",
        "Date",
        "csrf_secret",
        "expires",
        "ip",
        "meta",
        "agent",
        "browser",
        "family",
        "version",
        "device",
        "os",
        "persist",
        "Boolean",
        "token",
        "ttl",
        "user_id",
        "user_id_string",
        "collection",
        "Session",
        "model",
        "SessionTC",
        "addRelation",
        "resolver",
        "getResolver",
        "prepareArgs",
        "filter",
        "source",
        "projection",
        "is_active"
      ],
      "mappings": ";;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AAEO,MAAMA,wCAAgB,IAAI,mBAASC,MAAb,CAC3B;AACEC,OAAK;AACHC,UAAMC;AADH,GADP;AAIEC,MAAI;AACFF,UAAMG,MADJ;AAEFC,SAAK,eAAW;AACd,UAAI,KAAKL,GAAT,EAAc;AACZ,eAAO,KAAKA,GAAL,CAASM,QAAT,CAAkB,KAAlB,CAAP;AACD;AACF,KANC;AAOFC,SAAK,aAASC,GAAT,EAAc;AACjB,UAAI,KAAKC,WAAL,IAAoB,KAAKA,WAAL,CAAiBN,EAAzC,EAA6C;AAC3C,aAAKM,WAAL,CAAiBT,GAAjB,GAAuB,oBAAKQ,GAAL,CAAvB;;AAEA,eAAO,KAAKC,WAAL,CAAiBN,EAAxB;AACD;;AAED,WAAKH,GAAL,GAAW,oBAAKQ,GAAL,CAAX;AACD;AAfC,GAJN;AAqBEE,WAAS;AACPT,UAAMU;AADC,GArBX;AAwBEC,eAAa;AACXX,UAAMG;AADK,GAxBf;AA2BES,WAAS;AACPZ,UAAMU;AADC,GA3BX;AA8BEG,MAAI;AACFb,UAAMG;AADJ,GA9BN;AAiCEW,QAAM;AACJC,WAAO;AACLf,YAAMG;AADD,KADH;AAIJa,aAAS;AACPC,cAAQ;AACNjB,cAAMG;AADA,OADD;AAIPe,eAAS;AACPlB,cAAMG;AADC;AAJF,KAJL;AAYJgB,YAAQ;AACNF,cAAQ;AACNjB,cAAMG;AADA,OADF;AAINe,eAAS;AACPlB,cAAMG;AADC;AAJH,KAZJ;AAoBJiB,QAAI;AACFH,cAAQ;AACNjB,cAAMG;AADA,OADN;AAIFe,eAAS;AACPlB,cAAMG;AADC;AAJP;AApBA,GAjCR;AA8DEkB,WAAS;AACPrB,UAAMsB;AADC,GA9DX;AAiEEC,SAAO;AACLvB,UAAMG;AADD,GAjET;AAoEEqB,OAAK;AACHxB,UAAMU;AADH,GApEP;AAuEEe,WAAS;AACPzB,UAAMC;AADC,GAvEX;AA0EEyB,kBAAgB;AACd1B,UAAMG,MADQ;AAEdC,SAAK,eAAW;AACd,aAAO,KAAKL,GAAL,CAASM,QAAT,CAAkB,KAAlB,CAAP;AACD,KAJa;AAKdC,SAAK,aAASC,GAAT,EAAc;AACjB,UAAIA,OAAO,KAAKC,WAAZ,IAA2B,KAAKA,WAAL,CAAiBkB,cAAhD,EAAgE;AAC9D,aAAKlB,WAAL,CAAiBiB,OAAjB,GAA2B,oBAAKlB,GAAL,CAA3B;;AAEA,eAAO,KAAKC,WAAL,CAAiBkB,cAAxB;AACD;;AAED,WAAKD,OAAL,GAAe,oBAAKlB,GAAL,CAAf;AACD;AAba;AA1ElB,CAD2B,EA2F3B;AACEoB,cAAY;AADd,CA3F2B,CAAtB;;AAgGA,MAAMC,4BAAU,mBAASC,KAAT,CAAe,SAAf,EAA0BhC,aAA1B,CAAhB;;AAEA,MAAMiC,gCAAY,oBAAoBF,OAApB,CAAlB;;AAEPE,UAAUC,WAAV,CAAsB,MAAtB,EAA8B;AAC5BC,YAAU,MAAM,aAAOC,WAAP,CAAmB,SAAnB,CADY;AAE5BC,eAAa;AACXC,YAAQC,WAAW,EAAElC,IAAIkC,OAAOX,OAAP,CAAepB,QAAf,CAAwB,KAAxB,CAAN,EAAX;AADG,GAFe;AAK5BgC,cAAY;AACVnC,QAAI,IADM;AAEVoC,eAAW,IAFD;AAGVb,aAAS;AAHC;AALgB,CAA9B",
      "file": "session.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\nimport uuid from '../../lib/types/uuid';\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\n\nimport nodeUUID from 'uuid/v4';\n\nimport { UserTC } from './user';\n\nexport const SessionSchema = new mongoose.Schema(\n  {\n    _id: {\n      type: Buffer\n    },\n    id: {\n      type: String,\n      get: function() {\n        if (this._id) {\n          return this._id.toString('hex');\n        }\n      },\n      set: function(val) {\n        if (this._conditions && this._conditions.id) {\n          this._conditions._id = uuid(val);\n          \n          delete this._conditions.id;\n        }\n        \n        this._id = uuid(val);\n      }\n    },\n    created: {\n      type: Date\n    },\n    csrf_secret: {\n      type: String\n    },\n    expires: {\n      type: Date\n    },\n    ip: {\n      type: String\n    },\n    meta: {\n      agent: {\n        type: String \n      },\n      browser: {\n        family: {\n          type: String\n        },\n        version: {\n          type: String\n        },\n      },\n      device: {\n        family: {\n          type: String\n        },\n        version: {\n          type: String\n        },\n      },\n      os: {\n        family: {\n          type: String\n        },\n        version: {\n          type: String\n        },\n      },\n    },\n    persist: {\n      type: Boolean\n    },\n    token: {\n      type: String\n    },\n    ttl: {\n      type: Date\n    },\n    user_id: {\n      type: Buffer\n    },\n    user_id_string: {\n      type: String,\n      get: function() {\n        return this._id.toString('hex')\n      },\n      set: function(val) {\n        if (val && this._conditions && this._conditions.user_id_string) {\n          this._conditions.user_id = uuid(val);\n          \n          delete this._conditions.user_id_string;\n        }\n        \n        this.user_id = uuid(val);\n      }\n    }\n  },\n  {\n    collection: 'sessions',\n  }\n);\n\nexport const Session = mongoose.model('Session', SessionSchema);\n\nexport const SessionTC = composeWithMongoose(Session);\n\nSessionTC.addRelation('user', {\n  resolver: () => UserTC.getResolver('findOne'),\n  prepareArgs: {\n    filter: source => ({ id: source.user_id.toString('hex') }),\n  },\n  projection: {\n    id: true,\n    is_active: true,\n    user_id: true \n  },\n});"
      ]
    },
    "mtime": 1521761995822
  },
  "{\"filename\":\"/app/middleware/authorization.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/middleware\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "./session",
            "imported": [
              "SessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SessionTC",
                "local": "SessionTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "req",
            "res",
            "next"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "req",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "res",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "next",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/middleware/authorization.js",
      "filenameRelative": "/app/middleware/authorization.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "authorization.js",
      "sourceFileName": "authorization.js",
      "sourceRoot": "/app/middleware",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/middleware",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "authorization"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function(req, res, next) {\n\tlet cookieConsent = _config2.default.cookieConsent;\n\n\tconsole.log(req);\n\n\tif (!req.cookies['cookieconsent']) {\n\t\tif (req.cookies['sessionid']) {\n\t\t\tres.clearCookie('sessionid', {\n\t\t\t\tdomain: _config2.default.domain,\n\t\t\t\tsecure: true,\n\t\t\t\thttpOnly: true\n\t\t\t});\n\t\t}\n\t}\n\n\t// let $match = {\n\t//   $match: {\n\t//     token: req.cookies['sessionid'],\n\t//     expires: {\n\t//       $gt: moment.utc().toDate()\n\t//     },\n\t//     logout: null\n\t//   }\n\t// };\n\n\tlet result = _session.SessionTC.getResolver('findMany').resolve({\n\t\targs: {\n\t\t\ttoken: req.cookies['sessionid'],\n\t\t\texpires: {\n\t\t\t\t$gt: _moment2.default.utc().toDate()\n\t\t\t},\n\t\t\tlogout: null\n\t\t}\n\t});\n\n\tconsole.log(result);\n\n\t//   mongo.db('live').collection('sessions').aggregate([$match, $lookup, $project]).toArray()\n\t//     .then(function(sessions) {\n\t//       if (sessions.length > 1) {\n\t//         return Promise.reject(new Error('Duplicate session.'));\n\t//       }\n\n\t//       if (sessions.length === 0) {\n\t//         req.session = null;\n\t//       }\n\t//       else {\n\t//         let session = _.omit(sessions[0], 'users');\n\t//         let user = sessions[0].users[0];\n\n\t//         req.session = session;\n\t//         req.user = user || null;\n\t//       }\n\n\t//       next();\n\t//     })\n\t//     .catch(function(err) {\n\t//       next(err);\n\t//     });\n};\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _config = require('config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _session = require('./session');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nlet $lookup = {\n\t$lookup: {\n\t\tfrom: 'users',\n\t\tlocalField: 'user_id',\n\t\tforeignField: '_id',\n\t\tas: 'users'\n\t}\n};\n\nlet $project = {\n\t$project: {\n\t\t_id: false,\n\t\ttoken: true,\n\t\tcsrf_secret: true,\n\t\texpires: true,\n\t\t'users._id': true,\n\t\t'users.handle': true,\n\t\t'users.email': true,\n\t\t'users.last_name': true,\n\t\t'users.first_name': true,\n\t\t'users.last_login': true,\n\t\t'users.settings': true\n\t}\n};\n\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiXSwibmFtZXMiOlsicmVxIiwicmVzIiwibmV4dCIsImNvb2tpZUNvbnNlbnQiLCJjb25zb2xlIiwibG9nIiwiY29va2llcyIsImNsZWFyQ29va2llIiwiZG9tYWluIiwic2VjdXJlIiwiaHR0cE9ubHkiLCJyZXN1bHQiLCJnZXRSZXNvbHZlciIsInJlc29sdmUiLCJhcmdzIiwidG9rZW4iLCJleHBpcmVzIiwiJGd0IiwidXRjIiwidG9EYXRlIiwibG9nb3V0IiwiJGxvb2t1cCIsImZyb20iLCJsb2NhbEZpZWxkIiwiZm9yZWlnbkZpZWxkIiwiYXMiLCIkcHJvamVjdCIsIl9pZCIsImNzcmZfc2VjcmV0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7a0JBaUNlLFVBQVNBLEdBQVQsRUFBY0MsR0FBZCxFQUFtQkMsSUFBbkIsRUFBeUI7QUFDdEMsS0FBSUMsZ0JBQWdCLGlCQUFPQSxhQUEzQjs7QUFFQUMsU0FBUUMsR0FBUixDQUFZTCxHQUFaOztBQUVELEtBQUksQ0FBQ0EsSUFBSU0sT0FBSixDQUFZLGVBQVosQ0FBTCxFQUFtQztBQUNsQyxNQUFJTixJQUFJTSxPQUFKLENBQVksV0FBWixDQUFKLEVBQThCO0FBQzdCTCxPQUFJTSxXQUFKLENBQWdCLFdBQWhCLEVBQTZCO0FBQzVCQyxZQUFRLGlCQUFPQSxNQURhO0FBRTVCQyxZQUFRLElBRm9CO0FBRzVCQyxjQUFVO0FBSGtCLElBQTdCO0FBS0E7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSUMsU0FBUyxtQkFBVUMsV0FBVixDQUFzQixVQUF0QixFQUFrQ0MsT0FBbEMsQ0FBMEM7QUFDckRDLFFBQU07QUFDSkMsVUFBT2YsSUFBSU0sT0FBSixDQUFZLFdBQVosQ0FESDtBQUVKVSxZQUFTO0FBQ1BDLFNBQUssaUJBQU9DLEdBQVAsR0FBYUMsTUFBYjtBQURFLElBRkw7QUFLSkMsV0FBUTtBQUxKO0FBRCtDLEVBQTFDLENBQWI7O0FBVUFoQixTQUFRQyxHQUFSLENBQVlNLE1BQVo7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQyxDOztBQTVGRDs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7OztBQUdBLElBQUlVLFVBQVU7QUFDYkEsVUFBUztBQUNSQyxRQUFNLE9BREU7QUFFUkMsY0FBWSxTQUZKO0FBR1JDLGdCQUFjLEtBSE47QUFJUkMsTUFBSTtBQUpJO0FBREksQ0FBZDs7QUFTQSxJQUFJQyxXQUFXO0FBQ2RBLFdBQVU7QUFDVEMsT0FBSyxLQURJO0FBRVRaLFNBQU8sSUFGRTtBQUdUYSxlQUFhLElBSEo7QUFJVFosV0FBUyxJQUpBO0FBS1QsZUFBYSxJQUxKO0FBTVQsa0JBQWdCLElBTlA7QUFPVCxpQkFBZSxJQVBOO0FBUVQscUJBQW1CLElBUlY7QUFTVCxzQkFBb0IsSUFUWDtBQVVULHNCQUFvQixJQVZYO0FBV1Qsb0JBQWtCO0FBWFQ7QUFESSxDQUFmOztBQTRFQyIsImZpbGUiOiJhdXRob3JpemF0aW9uLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvbWlkZGxld2FyZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgY29uZmlnIGZyb20gJ2NvbmZpZyc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5cbmltcG9ydCB7IFNlc3Npb25UQyB9IGZyb20gJy4vc2Vzc2lvbic7XG5cblxubGV0ICRsb29rdXAgPSB7XG5cdCRsb29rdXA6IHtcblx0XHRmcm9tOiAndXNlcnMnLFxuXHRcdGxvY2FsRmllbGQ6ICd1c2VyX2lkJyxcblx0XHRmb3JlaWduRmllbGQ6ICdfaWQnLFxuXHRcdGFzOiAndXNlcnMnXG5cdH1cbn07XG5cbmxldCAkcHJvamVjdCA9IHtcblx0JHByb2plY3Q6IHtcblx0XHRfaWQ6IGZhbHNlLFxuXHRcdHRva2VuOiB0cnVlLFxuXHRcdGNzcmZfc2VjcmV0OiB0cnVlLFxuXHRcdGV4cGlyZXM6IHRydWUsXG5cdFx0J3VzZXJzLl9pZCc6IHRydWUsXG5cdFx0J3VzZXJzLmhhbmRsZSc6IHRydWUsXG5cdFx0J3VzZXJzLmVtYWlsJzogdHJ1ZSxcblx0XHQndXNlcnMubGFzdF9uYW1lJzogdHJ1ZSxcblx0XHQndXNlcnMuZmlyc3RfbmFtZSc6IHRydWUsXG5cdFx0J3VzZXJzLmxhc3RfbG9naW4nOiB0cnVlLFxuXHRcdCd1c2Vycy5zZXR0aW5ncyc6IHRydWVcblx0fVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICBsZXQgY29va2llQ29uc2VudCA9IGNvbmZpZy5jb29raWVDb25zZW50O1xuICBcbiAgY29uc29sZS5sb2cocmVxKTtcblxuXHRpZiAoIXJlcS5jb29raWVzWydjb29raWVjb25zZW50J10pIHtcblx0XHRpZiAocmVxLmNvb2tpZXNbJ3Nlc3Npb25pZCddKSB7XG5cdFx0XHRyZXMuY2xlYXJDb29raWUoJ3Nlc3Npb25pZCcsIHtcblx0XHRcdFx0ZG9tYWluOiBjb25maWcuZG9tYWluLFxuXHRcdFx0XHRzZWN1cmU6IHRydWUsXG5cdFx0XHRcdGh0dHBPbmx5OiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cbiAgXG4gIC8vIGxldCAkbWF0Y2ggPSB7XG4gIC8vICAgJG1hdGNoOiB7XG4gIC8vICAgICB0b2tlbjogcmVxLmNvb2tpZXNbJ3Nlc3Npb25pZCddLFxuICAvLyAgICAgZXhwaXJlczoge1xuICAvLyAgICAgICAkZ3Q6IG1vbWVudC51dGMoKS50b0RhdGUoKVxuICAvLyAgICAgfSxcbiAgLy8gICAgIGxvZ291dDogbnVsbFxuICAvLyAgIH1cbiAgLy8gfTtcbiAgXG4gIGxldCByZXN1bHQgPSBTZXNzaW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JykucmVzb2x2ZSh7XG4gICAgYXJnczoge1xuICAgICAgdG9rZW46IHJlcS5jb29raWVzWydzZXNzaW9uaWQnXSxcbiAgICAgIGV4cGlyZXM6IHtcbiAgICAgICAgJGd0OiBtb21lbnQudXRjKCkudG9EYXRlKClcbiAgICAgIH0sXG4gICAgICBsb2dvdXQ6IG51bGxcbiAgICB9XG4gIH0pO1xuICBcbiAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuLy8gICBtb25nby5kYignbGl2ZScpLmNvbGxlY3Rpb24oJ3Nlc3Npb25zJykuYWdncmVnYXRlKFskbWF0Y2gsICRsb29rdXAsICRwcm9qZWN0XSkudG9BcnJheSgpXG4vLyAgICAgLnRoZW4oZnVuY3Rpb24oc2Vzc2lvbnMpIHtcbi8vICAgICAgIGlmIChzZXNzaW9ucy5sZW5ndGggPiAxKSB7XG4vLyAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0R1cGxpY2F0ZSBzZXNzaW9uLicpKTtcbi8vICAgICAgIH1cblxuLy8gICAgICAgaWYgKHNlc3Npb25zLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICByZXEuc2Vzc2lvbiA9IG51bGw7XG4vLyAgICAgICB9XG4vLyAgICAgICBlbHNlIHtcbi8vICAgICAgICAgbGV0IHNlc3Npb24gPSBfLm9taXQoc2Vzc2lvbnNbMF0sICd1c2VycycpO1xuLy8gICAgICAgICBsZXQgdXNlciA9IHNlc3Npb25zWzBdLnVzZXJzWzBdO1xuXG4vLyAgICAgICAgIHJlcS5zZXNzaW9uID0gc2Vzc2lvbjtcbi8vICAgICAgICAgcmVxLnVzZXIgPSB1c2VyIHx8IG51bGw7XG4vLyAgICAgICB9XG5cbi8vICAgICAgIG5leHQoKTtcbi8vICAgICB9KVxuLy8gICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbi8vICAgICAgIG5leHQoZXJyKTtcbi8vICAgICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "authorization.js"
      ],
      "names": [
        "req",
        "res",
        "next",
        "cookieConsent",
        "console",
        "log",
        "cookies",
        "clearCookie",
        "domain",
        "secure",
        "httpOnly",
        "result",
        "getResolver",
        "resolve",
        "args",
        "token",
        "expires",
        "$gt",
        "utc",
        "toDate",
        "logout",
        "$lookup",
        "from",
        "localField",
        "foreignField",
        "as",
        "$project",
        "_id",
        "csrf_secret"
      ],
      "mappings": ";;;;;;kBAiCe,UAASA,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACtC,KAAIC,gBAAgB,iBAAOA,aAA3B;;AAEAC,SAAQC,GAAR,CAAYL,GAAZ;;AAED,KAAI,CAACA,IAAIM,OAAJ,CAAY,eAAZ,CAAL,EAAmC;AAClC,MAAIN,IAAIM,OAAJ,CAAY,WAAZ,CAAJ,EAA8B;AAC7BL,OAAIM,WAAJ,CAAgB,WAAhB,EAA6B;AAC5BC,YAAQ,iBAAOA,MADa;AAE5BC,YAAQ,IAFoB;AAG5BC,cAAU;AAHkB,IAA7B;AAKA;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAIC,SAAS,mBAAUC,WAAV,CAAsB,UAAtB,EAAkCC,OAAlC,CAA0C;AACrDC,QAAM;AACJC,UAAOf,IAAIM,OAAJ,CAAY,WAAZ,CADH;AAEJU,YAAS;AACPC,SAAK,iBAAOC,GAAP,GAAaC,MAAb;AADE,IAFL;AAKJC,WAAQ;AALJ;AAD+C,EAA1C,CAAb;;AAUAhB,SAAQC,GAAR,CAAYM,MAAZ;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACC,C;;AA5FD;;;;AACA;;;;AACA;;;;AAEA;;;;AAGA,IAAIU,UAAU;AACbA,UAAS;AACRC,QAAM,OADE;AAERC,cAAY,SAFJ;AAGRC,gBAAc,KAHN;AAIRC,MAAI;AAJI;AADI,CAAd;;AASA,IAAIC,WAAW;AACdA,WAAU;AACTC,OAAK,KADI;AAETZ,SAAO,IAFE;AAGTa,eAAa,IAHJ;AAITZ,WAAS,IAJA;AAKT,eAAa,IALJ;AAMT,kBAAgB,IANP;AAOT,iBAAe,IAPN;AAQT,qBAAmB,IARV;AAST,sBAAoB,IATX;AAUT,sBAAoB,IAVX;AAWT,oBAAkB;AAXT;AADI,CAAf;;AA4EC",
      "file": "authorization.js",
      "sourceRoot": "/app/middleware",
      "sourcesContent": [
        "import _ from 'lodash';\nimport config from 'config';\nimport moment from 'moment';\n\nimport { SessionTC } from './session';\n\n\nlet $lookup = {\n\t$lookup: {\n\t\tfrom: 'users',\n\t\tlocalField: 'user_id',\n\t\tforeignField: '_id',\n\t\tas: 'users'\n\t}\n};\n\nlet $project = {\n\t$project: {\n\t\t_id: false,\n\t\ttoken: true,\n\t\tcsrf_secret: true,\n\t\texpires: true,\n\t\t'users._id': true,\n\t\t'users.handle': true,\n\t\t'users.email': true,\n\t\t'users.last_name': true,\n\t\t'users.first_name': true,\n\t\t'users.last_login': true,\n\t\t'users.settings': true\n\t}\n};\n\n\nexport default function(req, res, next) {\n  let cookieConsent = config.cookieConsent;\n  \n  console.log(req);\n\n\tif (!req.cookies['cookieconsent']) {\n\t\tif (req.cookies['sessionid']) {\n\t\t\tres.clearCookie('sessionid', {\n\t\t\t\tdomain: config.domain,\n\t\t\t\tsecure: true,\n\t\t\t\thttpOnly: true\n\t\t\t});\n\t\t}\n\t}\n  \n  // let $match = {\n  //   $match: {\n  //     token: req.cookies['sessionid'],\n  //     expires: {\n  //       $gt: moment.utc().toDate()\n  //     },\n  //     logout: null\n  //   }\n  // };\n  \n  let result = SessionTC.getResolver('findMany').resolve({\n    args: {\n      token: req.cookies['sessionid'],\n      expires: {\n        $gt: moment.utc().toDate()\n      },\n      logout: null\n    }\n  });\n  \n  console.log(result);\n\n//   mongo.db('live').collection('sessions').aggregate([$match, $lookup, $project]).toArray()\n//     .then(function(sessions) {\n//       if (sessions.length > 1) {\n//         return Promise.reject(new Error('Duplicate session.'));\n//       }\n\n//       if (sessions.length === 0) {\n//         req.session = null;\n//       }\n//       else {\n//         let session = _.omit(sessions[0], 'users');\n//         let user = sessions[0].users[0];\n\n//         req.session = session;\n//         req.user = user || null;\n//       }\n\n//       next();\n//     })\n//     .catch(function(err) {\n//       next(err);\n//     });\n};\n"
      ]
    },
    "mtime": 1521502980823
  },
  "{\"filename\":\"/app/middleware/cookie-authorization.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/middleware\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "../schema/models/sessions",
            "imported": [
              "SessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SessionTC",
                "local": "SessionTC"
              }
            ]
          },
          {
            "source": "../schema/models/users",
            "imported": [
              "UserTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UserTC",
                "local": "UserTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/middleware/cookie-authorization.js",
      "filenameRelative": "/app/middleware/cookie-authorization.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "cookie-authorization.js",
      "sourceFileName": "cookie-authorization.js",
      "sourceRoot": "/app/middleware",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/middleware",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "cookie-authorization"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _config = require('config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _sessions = require('../schema/models/sessions');\n\nvar _users = require('../schema/models/users');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function() { var gen = fn.apply(this, arguments); return new Promise(function(resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function(value) { step(\"next\", value); }, function(err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nlet $lookup = {\n  $lookup: {\n    from: 'users',\n    localField: 'user_id',\n    foreignField: '_id',\n    as: 'users'\n  }\n};\n\nlet $project = {\n  $project: {\n    _id: false,\n    token: true,\n    csrf_secret: true,\n    expires: true,\n    'users._id': true,\n    'users.handle': true,\n    'users.email': true,\n    'users.last_name': true,\n    'users.first_name': true,\n    'users.last_login': true,\n    'users.settings': true\n  }\n};\n\nexports.default = (() => {\n  var _ref = _asyncToGenerator(function* (req, res, next) {\n    let cookieConsent = _config2.default.cookieConsent;\n\n    if (!req.cookies['cookieconsent']) {\n      if (req.cookies['sessionid']) {\n        res.clearCookie('sessionid', {\n          domain: _config2.default.domain,\n          secure: true,\n          httpOnly: true\n        });\n      }\n    }\n\n    let sessionResult = yield _sessions.SessionTC.getResolver('findMany').resolve({\n      args: {\n        filter: {\n          token: req.cookies['sessionid'],\n          expires: {\n            $gt: _moment2.default.utc().toDate()\n          },\n          logout: null\n        }\n      },\n      projection: {\n        id: true,\n        token: true,\n        csrf_secret: true,\n        expires: true,\n        user_id: true\n      }\n    });\n\n    if (sessionResult.length > 1) {\n      return Promise.reject(new Error('Duplicate session.'));\n    }\n\n    if (sessionResult.length === 0) {\n      req.session = null;\n    } else {\n      let userResult = yield _users.UserTC.getResolver('findOne').resolve({\n        args: {\n          filter: {\n            id: sessionResult[0].user_id.toString('hex')\n          }\n        }\n      });\n\n      let session = sessionResult[0];\n      let user = userResult;\n\n      req.session = session;\n      req.user = user || null;\n    }\n\n    // res.cookie(config.sessions.cookieName, '2EFCEBCFA93E42C7A722023AC5A664EE254502B5C96A41F9B0DDB43F2CEEC2697070D8997FAB4039A2FBDD788DA766CE', {\n    //   domain: 'lifescope-api.glitch.me',\n    //   secure: true,\n    //   httpOnly: true,\n    //   expires: 0\n    // });\n\n    next();\n  });\n\n  return function(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvb2tpZS1hdXRob3JpemF0aW9uLmpzIl0sIm5hbWVzIjpbIiRsb29rdXAiLCJmcm9tIiwibG9jYWxGaWVsZCIsImZvcmVpZ25GaWVsZCIsImFzIiwiJHByb2plY3QiLCJfaWQiLCJ0b2tlbiIsImNzcmZfc2VjcmV0IiwiZXhwaXJlcyIsInJlcSIsInJlcyIsIm5leHQiLCJjb29raWVDb25zZW50IiwiY29va2llcyIsImNsZWFyQ29va2llIiwiZG9tYWluIiwic2VjdXJlIiwiaHR0cE9ubHkiLCJzZXNzaW9uUmVzdWx0IiwiZ2V0UmVzb2x2ZXIiLCJyZXNvbHZlIiwiYXJncyIsImZpbHRlciIsIiRndCIsInV0YyIsInRvRGF0ZSIsImxvZ291dCIsInByb2plY3Rpb24iLCJpZCIsInVzZXJfaWQiLCJsZW5ndGgiLCJQcm9taXNlIiwicmVqZWN0IiwiRXJyb3IiLCJzZXNzaW9uIiwidXNlclJlc3VsdCIsInRvU3RyaW5nIiwidXNlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUE7O0FBQ0E7Ozs7OztBQUdBLElBQUlBLFVBQVU7QUFDYkEsV0FBUztBQUNSQyxVQUFNLE9BREU7QUFFUkMsZ0JBQVksU0FGSjtBQUdSQyxrQkFBYyxLQUhOO0FBSVJDLFFBQUk7QUFKSTtBQURJLENBQWQ7O0FBU0EsSUFBSUMsV0FBVztBQUNkQSxZQUFVO0FBQ1RDLFNBQUssS0FESTtBQUVUQyxXQUFPLElBRkU7QUFHVEMsaUJBQWEsSUFISjtBQUlUQyxhQUFTLElBSkE7QUFLVCxpQkFBYSxJQUxKO0FBTVQsb0JBQWdCLElBTlA7QUFPVCxtQkFBZSxJQVBOO0FBUVQsdUJBQW1CLElBUlY7QUFTVCx3QkFBb0IsSUFUWDtBQVVULHdCQUFvQixJQVZYO0FBV1Qsc0JBQWtCO0FBWFQ7QUFESSxDQUFmOzs7K0JBaUJlLFdBQWVDLEdBQWYsRUFBb0JDLEdBQXBCLEVBQXlCQyxJQUF6QixFQUErQjtBQUM1QyxRQUFJQyxnQkFBZ0IsaUJBQU9BLGFBQTNCOztBQUVELFFBQUksQ0FBQ0gsSUFBSUksT0FBSixDQUFZLGVBQVosQ0FBTCxFQUFtQztBQUNsQyxVQUFJSixJQUFJSSxPQUFKLENBQVksV0FBWixDQUFKLEVBQThCO0FBQzdCSCxZQUFJSSxXQUFKLENBQWdCLFdBQWhCLEVBQTZCO0FBQzVCQyxrQkFBUSxpQkFBT0EsTUFEYTtBQUU1QkMsa0JBQVEsSUFGb0I7QUFHNUJDLG9CQUFVO0FBSGtCLFNBQTdCO0FBS0E7QUFDRDs7QUFFQSxRQUFJQyxnQkFBZ0IsTUFBTSxvQkFBVUMsV0FBVixDQUFzQixVQUF0QixFQUFrQ0MsT0FBbEMsQ0FBMEM7QUFDbEVDLFlBQU07QUFDSkMsZ0JBQVE7QUFDTmhCLGlCQUFPRyxJQUFJSSxPQUFKLENBQVksV0FBWixDQUREO0FBRU5MLG1CQUFTO0FBQ1BlLGlCQUFLLGlCQUFPQyxHQUFQLEdBQWFDLE1BQWI7QUFERSxXQUZIO0FBS05DLGtCQUFRO0FBTEY7QUFESixPQUQ0RDtBQVVsRUMsa0JBQVk7QUFDVkMsWUFBSSxJQURNO0FBRVZ0QixlQUFPLElBRkc7QUFHVkMscUJBQWEsSUFISDtBQUlWQyxpQkFBUyxJQUpDO0FBS1ZxQixpQkFBUztBQUxDO0FBVnNELEtBQTFDLENBQTFCOztBQW1CQSxRQUFJWCxjQUFjWSxNQUFkLEdBQXVCLENBQTNCLEVBQThCO0FBQzVCLGFBQU9DLFFBQVFDLE1BQVIsQ0FBZSxJQUFJQyxLQUFKLENBQVUsb0JBQVYsQ0FBZixDQUFQO0FBQ0Q7O0FBRUQsUUFBSWYsY0FBY1ksTUFBZCxLQUF5QixDQUE3QixFQUFnQztBQUM5QnJCLFVBQUl5QixPQUFKLEdBQWMsSUFBZDtBQUNELEtBRkQsTUFHSztBQUNILFVBQUlDLGFBQWEsTUFBTSxjQUFPaEIsV0FBUCxDQUFtQixTQUFuQixFQUE4QkMsT0FBOUIsQ0FBc0M7QUFDM0RDLGNBQU07QUFDSkMsa0JBQVE7QUFDTk0sZ0JBQUlWLGNBQWMsQ0FBZCxFQUFpQlcsT0FBakIsQ0FBeUJPLFFBQXpCLENBQWtDLEtBQWxDO0FBREU7QUFESjtBQURxRCxPQUF0QyxDQUF2Qjs7QUFTQSxVQUFJRixVQUFVaEIsY0FBYyxDQUFkLENBQWQ7QUFDQSxVQUFJbUIsT0FBT0YsVUFBWDs7QUFFQTFCLFVBQUl5QixPQUFKLEdBQWNBLE9BQWQ7QUFDQXpCLFVBQUk0QixJQUFKLEdBQVdBLFFBQVEsSUFBbkI7QUFDRDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUExQjtBQUNELEciLCJmaWxlIjoiY29va2llLWF1dGhvcml6YXRpb24uanMiLCJzb3VyY2VSb290IjoiL2FwcC9taWRkbGV3YXJlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBjb25maWcgZnJvbSAnY29uZmlnJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuaW1wb3J0IHsgU2Vzc2lvblRDIH0gZnJvbSAnLi4vc2NoZW1hL21vZGVscy9zZXNzaW9ucyc7XG5pbXBvcnQgeyBVc2VyVEMgfSBmcm9tICcuLi9zY2hlbWEvbW9kZWxzL3VzZXJzJztcblxuXG5sZXQgJGxvb2t1cCA9IHtcblx0JGxvb2t1cDoge1xuXHRcdGZyb206ICd1c2VycycsXG5cdFx0bG9jYWxGaWVsZDogJ3VzZXJfaWQnLFxuXHRcdGZvcmVpZ25GaWVsZDogJ19pZCcsXG5cdFx0YXM6ICd1c2Vycydcblx0fVxufTtcblxubGV0ICRwcm9qZWN0ID0ge1xuXHQkcHJvamVjdDoge1xuXHRcdF9pZDogZmFsc2UsXG5cdFx0dG9rZW46IHRydWUsXG5cdFx0Y3NyZl9zZWNyZXQ6IHRydWUsXG5cdFx0ZXhwaXJlczogdHJ1ZSxcblx0XHQndXNlcnMuX2lkJzogdHJ1ZSxcblx0XHQndXNlcnMuaGFuZGxlJzogdHJ1ZSxcblx0XHQndXNlcnMuZW1haWwnOiB0cnVlLFxuXHRcdCd1c2Vycy5sYXN0X25hbWUnOiB0cnVlLFxuXHRcdCd1c2Vycy5maXJzdF9uYW1lJzogdHJ1ZSxcblx0XHQndXNlcnMubGFzdF9sb2dpbic6IHRydWUsXG5cdFx0J3VzZXJzLnNldHRpbmdzJzogdHJ1ZVxuXHR9XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGxldCBjb29raWVDb25zZW50ID0gY29uZmlnLmNvb2tpZUNvbnNlbnQ7XG5cblx0aWYgKCFyZXEuY29va2llc1snY29va2llY29uc2VudCddKSB7XG5cdFx0aWYgKHJlcS5jb29raWVzWydzZXNzaW9uaWQnXSkge1xuXHRcdFx0cmVzLmNsZWFyQ29va2llKCdzZXNzaW9uaWQnLCB7XG5cdFx0XHRcdGRvbWFpbjogY29uZmlnLmRvbWFpbixcblx0XHRcdFx0c2VjdXJlOiB0cnVlLFxuXHRcdFx0XHRodHRwT25seTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG4gIFxuICBsZXQgc2Vzc2lvblJlc3VsdCA9IGF3YWl0IFNlc3Npb25UQy5nZXRSZXNvbHZlcignZmluZE1hbnknKS5yZXNvbHZlKHtcbiAgICBhcmdzOiB7XG4gICAgICBmaWx0ZXI6IHtcbiAgICAgICAgdG9rZW46IHJlcS5jb29raWVzWydzZXNzaW9uaWQnXSxcbiAgICAgICAgZXhwaXJlczoge1xuICAgICAgICAgICRndDogbW9tZW50LnV0YygpLnRvRGF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIGxvZ291dDogbnVsbFxuICAgICAgfVxuICAgIH0sXG4gICAgcHJvamVjdGlvbjogeyBcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgdG9rZW46IHRydWUsXG4gICAgICBjc3JmX3NlY3JldDogdHJ1ZSxcbiAgICAgIGV4cGlyZXM6IHRydWUsXG4gICAgICB1c2VyX2lkOiB0cnVlLFxuICAgIH1cbiAgfSk7XG4gIFxuICBpZiAoc2Vzc2lvblJlc3VsdC5sZW5ndGggPiAxKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignRHVwbGljYXRlIHNlc3Npb24uJykpO1xuICB9XG4gIFxuICBpZiAoc2Vzc2lvblJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICByZXEuc2Vzc2lvbiA9IG51bGw7XG4gIH1cbiAgZWxzZSB7XG4gICAgbGV0IHVzZXJSZXN1bHQgPSBhd2FpdCBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKS5yZXNvbHZlKHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlsdGVyOiB7XG4gICAgICAgICAgaWQ6IHNlc3Npb25SZXN1bHRbMF0udXNlcl9pZC50b1N0cmluZygnaGV4JylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICBcbiAgICBcbiAgICBsZXQgc2Vzc2lvbiA9IHNlc3Npb25SZXN1bHRbMF1cbiAgICBsZXQgdXNlciA9IHVzZXJSZXN1bHQ7XG4gICAgXG4gICAgcmVxLnNlc3Npb24gPSBzZXNzaW9uO1xuICAgIHJlcS51c2VyID0gdXNlciB8fCBudWxsO1xuICB9XG5cbiAgLy8gcmVzLmNvb2tpZShjb25maWcuc2Vzc2lvbnMuY29va2llTmFtZSwgJzJFRkNFQkNGQTkzRTQyQzdBNzIyMDIzQUM1QTY2NEVFMjU0NTAyQjVDOTZBNDFGOUIwRERCNDNGMkNFRUMyNjk3MDcwRDg5OTdGQUI0MDM5QTJGQkRENzg4REE3NjZDRScsIHtcbiAgLy8gICBkb21haW46ICdsaWZlc2NvcGUtYXBpLmdsaXRjaC5tZScsXG4gIC8vICAgc2VjdXJlOiB0cnVlLFxuICAvLyAgIGh0dHBPbmx5OiB0cnVlLFxuICAvLyAgIGV4cGlyZXM6IDBcbiAgLy8gfSk7XG4gIFxuICBuZXh0KCk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "cookie-authorization.js"
      ],
      "names": [
        "$lookup",
        "from",
        "localField",
        "foreignField",
        "as",
        "$project",
        "_id",
        "token",
        "csrf_secret",
        "expires",
        "req",
        "res",
        "next",
        "cookieConsent",
        "cookies",
        "clearCookie",
        "domain",
        "secure",
        "httpOnly",
        "sessionResult",
        "getResolver",
        "resolve",
        "args",
        "filter",
        "$gt",
        "utc",
        "toDate",
        "logout",
        "projection",
        "id",
        "user_id",
        "length",
        "Promise",
        "reject",
        "Error",
        "session",
        "userResult",
        "toString",
        "user"
      ],
      "mappings": ";;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;AACA;;;;;;AAGA,IAAIA,UAAU;AACbA,WAAS;AACRC,UAAM,OADE;AAERC,gBAAY,SAFJ;AAGRC,kBAAc,KAHN;AAIRC,QAAI;AAJI;AADI,CAAd;;AASA,IAAIC,WAAW;AACdA,YAAU;AACTC,SAAK,KADI;AAETC,WAAO,IAFE;AAGTC,iBAAa,IAHJ;AAITC,aAAS,IAJA;AAKT,iBAAa,IALJ;AAMT,oBAAgB,IANP;AAOT,mBAAe,IAPN;AAQT,uBAAmB,IARV;AAST,wBAAoB,IATX;AAUT,wBAAoB,IAVX;AAWT,sBAAkB;AAXT;AADI,CAAf;;;+BAiBe,WAAeC,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AAC5C,QAAIC,gBAAgB,iBAAOA,aAA3B;;AAED,QAAI,CAACH,IAAII,OAAJ,CAAY,eAAZ,CAAL,EAAmC;AAClC,UAAIJ,IAAII,OAAJ,CAAY,WAAZ,CAAJ,EAA8B;AAC7BH,YAAII,WAAJ,CAAgB,WAAhB,EAA6B;AAC5BC,kBAAQ,iBAAOA,MADa;AAE5BC,kBAAQ,IAFoB;AAG5BC,oBAAU;AAHkB,SAA7B;AAKA;AACD;;AAEA,QAAIC,gBAAgB,MAAM,oBAAUC,WAAV,CAAsB,UAAtB,EAAkCC,OAAlC,CAA0C;AAClEC,YAAM;AACJC,gBAAQ;AACNhB,iBAAOG,IAAII,OAAJ,CAAY,WAAZ,CADD;AAENL,mBAAS;AACPe,iBAAK,iBAAOC,GAAP,GAAaC,MAAb;AADE,WAFH;AAKNC,kBAAQ;AALF;AADJ,OAD4D;AAUlEC,kBAAY;AACVC,YAAI,IADM;AAEVtB,eAAO,IAFG;AAGVC,qBAAa,IAHH;AAIVC,iBAAS,IAJC;AAKVqB,iBAAS;AALC;AAVsD,KAA1C,CAA1B;;AAmBA,QAAIX,cAAcY,MAAd,GAAuB,CAA3B,EAA8B;AAC5B,aAAOC,QAAQC,MAAR,CAAe,IAAIC,KAAJ,CAAU,oBAAV,CAAf,CAAP;AACD;;AAED,QAAIf,cAAcY,MAAd,KAAyB,CAA7B,EAAgC;AAC9BrB,UAAIyB,OAAJ,GAAc,IAAd;AACD,KAFD,MAGK;AACH,UAAIC,aAAa,MAAM,cAAOhB,WAAP,CAAmB,SAAnB,EAA8BC,OAA9B,CAAsC;AAC3DC,cAAM;AACJC,kBAAQ;AACNM,gBAAIV,cAAc,CAAd,EAAiBW,OAAjB,CAAyBO,QAAzB,CAAkC,KAAlC;AADE;AADJ;AADqD,OAAtC,CAAvB;;AASA,UAAIF,UAAUhB,cAAc,CAAd,CAAd;AACA,UAAImB,OAAOF,UAAX;;AAEA1B,UAAIyB,OAAJ,GAAcA,OAAd;AACAzB,UAAI4B,IAAJ,GAAWA,QAAQ,IAAnB;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA1B;AACD,G",
      "file": "cookie-authorization.js",
      "sourceRoot": "/app/middleware",
      "sourcesContent": [
        "import _ from 'lodash';\nimport config from 'config';\nimport moment from 'moment';\n\nimport { SessionTC } from '../schema/models/sessions';\nimport { UserTC } from '../schema/models/users';\n\n\nlet $lookup = {\n\t$lookup: {\n\t\tfrom: 'users',\n\t\tlocalField: 'user_id',\n\t\tforeignField: '_id',\n\t\tas: 'users'\n\t}\n};\n\nlet $project = {\n\t$project: {\n\t\t_id: false,\n\t\ttoken: true,\n\t\tcsrf_secret: true,\n\t\texpires: true,\n\t\t'users._id': true,\n\t\t'users.handle': true,\n\t\t'users.email': true,\n\t\t'users.last_name': true,\n\t\t'users.first_name': true,\n\t\t'users.last_login': true,\n\t\t'users.settings': true\n\t}\n};\n\n\nexport default async function(req, res, next) {\n  let cookieConsent = config.cookieConsent;\n\n\tif (!req.cookies['cookieconsent']) {\n\t\tif (req.cookies['sessionid']) {\n\t\t\tres.clearCookie('sessionid', {\n\t\t\t\tdomain: config.domain,\n\t\t\t\tsecure: true,\n\t\t\t\thttpOnly: true\n\t\t\t});\n\t\t}\n\t}\n  \n  let sessionResult = await SessionTC.getResolver('findMany').resolve({\n    args: {\n      filter: {\n        token: req.cookies['sessionid'],\n        expires: {\n          $gt: moment.utc().toDate()\n        },\n        logout: null\n      }\n    },\n    projection: { \n      id: true,\n      token: true,\n      csrf_secret: true,\n      expires: true,\n      user_id: true,\n    }\n  });\n  \n  if (sessionResult.length > 1) {\n    return Promise.reject(new Error('Duplicate session.'));\n  }\n  \n  if (sessionResult.length === 0) {\n    req.session = null;\n  }\n  else {\n    let userResult = await UserTC.getResolver('findOne').resolve({\n      args: {\n        filter: {\n          id: sessionResult[0].user_id.toString('hex')\n        }\n      }\n    });\n  \n    \n    let session = sessionResult[0]\n    let user = userResult;\n    \n    req.session = session;\n    req.user = user || null;\n  }\n\n  // res.cookie(config.sessions.cookieName, '2EFCEBCFA93E42C7A722023AC5A664EE254502B5C96A41F9B0DDB43F2CEEC2697070D8997FAB4039A2FBDD788DA766CE', {\n  //   domain: 'lifescope-api.glitch.me',\n  //   secure: true,\n  //   httpOnly: true,\n  //   expires: 0\n  // });\n  \n  next();\n};\n"
      ]
    },
    "mtime": 1521832131918
  },
  "{\"filename\":\"/app/schema/models/connections.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          },
          {
            "source": "config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "http-errors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "httpErrors"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "uuid/v4",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "nodeUUID"
              }
            ]
          },
          {
            "source": "./association-sessions",
            "imported": [
              "AssociationSessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "AssociationSessionTC",
                "local": "AssociationSessionTC"
              }
            ]
          },
          {
            "source": "./providers",
            "imported": [
              "ProviderTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ProviderTC",
                "local": "ProviderTC"
              }
            ]
          },
          {
            "source": "../../lib/util/uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ConnectionsSchema",
            "Connection",
            "ConnectionTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ConnectionsSchema",
              "exported": "ConnectionsSchema"
            },
            {
              "kind": "local",
              "local": "Connection",
              "exported": "Connection"
            },
            {
              "kind": "local",
              "local": "ConnectionTC",
              "exported": "ConnectionTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/connections.js",
      "filenameRelative": "/app/schema/models/connections.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "connections.js",
      "sourceFileName": "connections.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "connections"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ConnectionTC = exports.Connection = exports.ConnectionsSchema = undefined;\n\nlet insertAssociationSessions = (() => {\n  var _ref3 = _asyncToGenerator(function* (context, authObj) {\n    if (context.req.user == null) {\n      // Only run if the user is not logged in\n      let connectionId = authObj.id;\n\n      let id = (0, _uuid2.default)();\n      let token = (0, _uuid2.default)();\n      let expiration = _moment2.default.utc().add(600, 'seconds').toDate();\n      // We don't need to have a different cookie for each provider.\n      // Review if we do need to have a different cookie for each provider.\n      let cookieName = 'login_assoc';\n\n      yield _associationSessions.AssociationSessionTC.getResolver('createOne').resolve({\n        args: {\n          record: {\n            id: id,\n            token_string: token,\n            connection_id_string: connectionId,\n            ttl: expiration\n          }\n        }\n      });\n\n      // Create cookie so user can login/signup after Oauth validation.\n      context.res.cookie(cookieName, token.toString('hex'), {\n        domain: _config2.default.domain,\n        secure: true,\n        httpOnly: true,\n        expires: expiration\n      });\n    }\n\n    return Promise.resolve();\n  });\n\n  return function insertAssociationSessions(_x3, _x4) {\n    return _ref3.apply(this, arguments);\n  };\n})();\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nvar _config = require('config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _httpErrors = require('http-errors');\n\nvar _httpErrors2 = _interopRequireDefault(_httpErrors);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _associationSessions = require('./association-sessions');\n\nvar _providers = require('./providers');\n\nvar _uuid = require('../../lib/types/uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function() { var gen = fn.apply(this, arguments); return new Promise(function(resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function(value) { step(\"next\", value); }, function(err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst ConnectionsSchema = exports.ConnectionsSchema = new _mongoose2.default.Schema({\n  _id: {\n    type: Buffer\n  },\n  id: {\n    type: String,\n    get: function get() {\n      if (this._id) {\n        return this._id.toString('hex');\n      }\n    },\n    set: function set(val) {\n      if (this._conditions && this._conditions.id) {\n        this._conditions._id = (0, _uuid2.default)(val);\n\n        delete this._conditions.id;\n      }\n\n      this._id = (0, _uuid2.default)(val);\n    }\n  },\n  auth: {\n    status: {\n      authorized: {\n        type: Boolean,\n        index: false\n      },\n      complete: {\n        type: Boolean,\n        index: false\n      }\n    }\n  },\n  enabled: {\n    type: Boolean,\n    index: false\n  },\n\n  endpoint_data: {\n    direct_messages_received: {\n      since_id: {\n        type: String,\n        index: false\n      }\n    },\n    direct_messages_sent: {\n      since_id: {\n        type: String,\n        index: false\n      }\n    },\n    drive_changes: {\n      page_token: {\n        type: String,\n        index: false\n      }\n    },\n    edits: {\n      cursor: {\n        type: String,\n        index: false\n      }\n    },\n\n    events: {\n      since: {\n        type: Number,\n        index: false\n      }\n    },\n\n    gmail_inbox: {\n      page_token: {\n        type: String,\n        index: false\n      },\n      q: {\n        type: String,\n        index: false\n      }\n    },\n\n    posts: {\n      min_id: {\n        type: String,\n        index: false\n      },\n      since: {\n        type: Number,\n        index: false\n      }\n    },\n\n    tweets: {\n      since_id: {\n        type: String,\n        index: false\n      }\n    }\n  },\n\n  frequency: {\n    type: Number,\n    index: false\n  },\n\n  last_run: {\n    type: Date,\n    index: false\n  },\n\n  permissions: {\n    achievements: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    boards: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    comments: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    direct_messages_received: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    direct_messages_sent: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    drive_changes: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    edits: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    events: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    games_owned: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    gilded_comments: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    gmail_inbox: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    messages_received: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    messages_sent: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    pins: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    playlists: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    posts: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    saved_albums: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    saved_comments: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    saved_tracks: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    submitted: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    threads_downvoted: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    threads_upvoted: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    },\n    tweets: {\n      enabled: {\n        type: Boolean,\n        index: false\n      },\n      frequency: {\n        type: Number,\n        index: false\n      }\n    }\n  },\n\n  provider_id: {\n    type: Buffer,\n    index: false\n  },\n  provider_id_string: {\n    type: String,\n    get: function get() {\n      return this.provider_id.toString('hex');\n    },\n    set: function set(val) {\n      if (val && this._conditions && this._conditions.provider_id_string) {\n        this._conditions.provider_id = (0, _uuid2.default)(val);\n\n        delete this._conditions.provider_id_string;\n      }\n\n      this.provider_id = (0, _uuid2.default)(val);\n    }\n  },\n  provider_name: {\n    type: String,\n    index: false\n  },\n  remote_connection_id: {\n    type: Buffer,\n    index: false\n  },\n  remote_connection_id_string: {\n    type: String,\n    get: function get() {\n      return this.remote_connection_id.toString('hex');\n    },\n    set: function set(val) {\n      if (val && this._conditions && this._conditions.remote_connection_id_string) {\n        this._conditions.remote_connection_id = (0, _uuid2.default)(val);\n\n        delete this._conditions.remote_connection_id_string;\n      }\n\n      this.remote_connection_id = (0, _uuid2.default)(val);\n    }\n  },\n  status: {\n    type: String,\n    index: false\n  },\n  user_id: {\n    type: Buffer,\n    index: false\n  },\n  user_id_string: {\n    type: String,\n    get: function get() {\n      return this._id.toString('hex');\n    },\n    set: function set(val) {\n      if (val && this._conditions && this._conditions.user_id_string) {\n        this._conditions.user_id = (0, _uuid2.default)(val);\n\n        delete this._conditions.user_id_string;\n      }\n\n      this.user_id = (0, _uuid2.default)(val);\n    }\n  }\n}, {\n  collection: 'connections'\n});\n\nconst Connection = exports.Connection = _mongoose2.default.model('Connections', ConnectionsSchema);\n\nconst ConnectionTC = exports.ConnectionTC = (0, _node2.default)(Connection);\n\nConnectionTC.addResolver({\n  name: 'initializeConnection',\n  kind: 'mutation',\n  type: ConnectionTC.getResolver('createOne').getType(),\n  args: {\n    provider_id_string: 'String!',\n    name: 'String'\n  },\n  resolve: (() => {\n    var _ref = _asyncToGenerator(function* ({ source, args, context, info }) {\n      let bitscoop = env.bitscoop;\n\n      yield env.validate('#/types/uuid4', args.provider_id_string).catch(function(err) {\n        throw new Error('provider_id_string must be a 32-character UUID4 without dashes');\n      });\n\n      let provider = yield _providers.ProviderTC.getResolver('findOne').resolve({\n        args: {\n          filter: {\n            id: args.provider_id_string\n          }\n        },\n        projection: {\n          sources: true,\n          remote_map_id: true,\n          reme_map_id_string: true\n        }\n      });\n\n      if (provider == null) {\n        throw new _httpErrors2.default(404);\n      }\n\n      let remoteProvider = yield bitscoop.getMap(provider.remote_map_id.toString('hex'));\n\n      let endpoints = [];\n      let connection = {\n        frequency: 1,\n        enabled: true,\n        permissions: {},\n\n        provider: provider,\n        remote_provider: remoteProvider,\n        provider_id: provider._id\n      };\n\n      // Store valid endpoints.\n      _lodash2.default.each(provider.sources, function(source, name) {\n        if (_lodash2.default.has(context.req.body, name)) {\n          connection.permissions[name] = {\n            enabled: true,\n            frequency: 1\n          };\n\n          endpoints.push(source.mapping);\n        }\n      });\n\n      endpoints = _lodash2.default.uniq(endpoints);\n\n      let authObj = yield bitscoop.createConnection(provider.remote_map_id.toString('hex'), {\n        name: args.name,\n        endpoints: endpoints,\n        redirect_url: remoteProvider.auth.redirect_url + '?map_id=' + provider.remote_map_id.toString('hex')\n      });\n\n      console.log(authObj);\n      yield insertAssociationSessions(context, authObj);\n\n      yield ConnectionTC.getResolver('createOne').resolve({\n        args: {\n          record: {\n            id: (0, _uuid2.default)(),\n            auth: {\n              status: {\n                complete: false\n              }\n            },\n            frequency: 1,\n            enabled: true,\n            permissions: connection.permissions,\n            provider_name: connection.remote_provider.name,\n            provider_id: connection.provider_id,\n            remote_connection_id: (0, _uuid2.default)(authObj.id)\n          }\n        }\n      });\n\n      context.res.redirect(authObj.redirectUrl);\n    });\n\n    return function resolve(_x) {\n      return _ref.apply(this, arguments);\n    };\n  })()\n});\n\nConnectionTC.addResolver({\n  name: 'completeConnection',\n  kind: 'query',\n  type: ConnectionTC.getResolver('createOne').getType(),\n  args: {\n    provider_id_string: 'String!',\n    name: 'String'\n  },\n  resolve: (() => {\n    var _ref2 = _asyncToGenerator(function* ({ source, args, context, info }) {\n      console.log('Resolving Connection Creation');\n      console.log(args);\n      let bitscoop = env.bitscoop;\n\n      yield env.validate('#/types/uuid4', args.provider_id_string).catch(function(err) {\n        console.log(err);\n        throw new Error('provider_id_string must be a 32-character UUID4 without dashes');\n      });\n\n      let provider = yield _providers.ProviderTC.getResolver('findOne').resolve({\n        args: {\n          filter: {\n            id: args.provider_id_string\n          }\n        },\n        projection: {\n          sources: true,\n          remote_map_id: true,\n          reme_map_id_string: true\n        }\n      });\n\n      if (provider == null) {\n        throw new _httpErrors2.default(404);\n      }\n\n      let remoteProvider = yield bitscoop.getMap(provider.remote_map_id.toString('hex'));\n\n      let endpoints = [];\n      let connection = {\n        frequency: 1,\n        enabled: true,\n        permissions: {},\n\n        provider: provider,\n        remote_provider: remoteProvider,\n        provider_id: provider._id\n      };\n\n      // Store valid endpoints.\n      _lodash2.default.each(provider.sources, function(source, name) {\n        if (_lodash2.default.has(context.req.body, name)) {\n          connection.permissions[name] = {\n            enabled: true,\n            frequency: 1\n          };\n\n          endpoints.push(source.mapping);\n        }\n      });\n\n      endpoints = _lodash2.default.uniq(endpoints);\n\n      let authObj = yield bitscoop.createConnection(provider.remote_map_id.toString('hex'), {\n        name: args.name,\n        endpoints: endpoints,\n        redirect_url: remoteProvider.auth.redirect_url + '?map_id=' + provider.remote_map_id.toString('hex')\n      });\n\n      yield insertAssociationSessions(context, authObj);\n\n      yield ConnectionTC.getResolver('createOne').resolve({\n        args: {\n          record: {\n            id: (0, _uuid2.default)(),\n            auth: {\n              status: {\n                complete: false\n              }\n            },\n            frequency: 1,\n            enabled: true,\n            permissions: connection.permissions,\n            provider_name: connection.remote_provider.name,\n            provider_id: connection.provider_id,\n            remote_connection_id: (0, _uuid2.default)(authObj.id)\n          }\n        }\n      });\n\n      // Promise.all([\n      //   validate\n      // ])\n    });\n\n    return function resolve(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  })()\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbm5lY3Rpb25zLmpzIl0sIm5hbWVzIjpbImNvbnRleHQiLCJhdXRoT2JqIiwicmVxIiwidXNlciIsImNvbm5lY3Rpb25JZCIsImlkIiwidG9rZW4iLCJleHBpcmF0aW9uIiwidXRjIiwiYWRkIiwidG9EYXRlIiwiY29va2llTmFtZSIsImdldFJlc29sdmVyIiwicmVzb2x2ZSIsImFyZ3MiLCJyZWNvcmQiLCJ0b2tlbl9zdHJpbmciLCJjb25uZWN0aW9uX2lkX3N0cmluZyIsInR0bCIsInJlcyIsImNvb2tpZSIsInRvU3RyaW5nIiwiZG9tYWluIiwic2VjdXJlIiwiaHR0cE9ubHkiLCJleHBpcmVzIiwiUHJvbWlzZSIsImluc2VydEFzc29jaWF0aW9uU2Vzc2lvbnMiLCJDb25uZWN0aW9uc1NjaGVtYSIsIlNjaGVtYSIsIl9pZCIsInR5cGUiLCJCdWZmZXIiLCJTdHJpbmciLCJnZXQiLCJzZXQiLCJ2YWwiLCJfY29uZGl0aW9ucyIsImF1dGgiLCJzdGF0dXMiLCJhdXRob3JpemVkIiwiQm9vbGVhbiIsImluZGV4IiwiY29tcGxldGUiLCJlbmFibGVkIiwiZW5kcG9pbnRfZGF0YSIsImRpcmVjdF9tZXNzYWdlc19yZWNlaXZlZCIsInNpbmNlX2lkIiwiZGlyZWN0X21lc3NhZ2VzX3NlbnQiLCJkcml2ZV9jaGFuZ2VzIiwicGFnZV90b2tlbiIsImVkaXRzIiwiY3Vyc29yIiwiZXZlbnRzIiwic2luY2UiLCJOdW1iZXIiLCJnbWFpbF9pbmJveCIsInEiLCJwb3N0cyIsIm1pbl9pZCIsInR3ZWV0cyIsImZyZXF1ZW5jeSIsImxhc3RfcnVuIiwiRGF0ZSIsInBlcm1pc3Npb25zIiwiYWNoaWV2ZW1lbnRzIiwiYm9hcmRzIiwiY29tbWVudHMiLCJnYW1lc19vd25lZCIsImdpbGRlZF9jb21tZW50cyIsIm1lc3NhZ2VzX3JlY2VpdmVkIiwibWVzc2FnZXNfc2VudCIsInBpbnMiLCJwbGF5bGlzdHMiLCJzYXZlZF9hbGJ1bXMiLCJzYXZlZF9jb21tZW50cyIsInNhdmVkX3RyYWNrcyIsInN1Ym1pdHRlZCIsInRocmVhZHNfZG93bnZvdGVkIiwidGhyZWFkc191cHZvdGVkIiwicHJvdmlkZXJfaWQiLCJwcm92aWRlcl9pZF9zdHJpbmciLCJwcm92aWRlcl9uYW1lIiwicmVtb3RlX2Nvbm5lY3Rpb25faWQiLCJyZW1vdGVfY29ubmVjdGlvbl9pZF9zdHJpbmciLCJ1c2VyX2lkIiwidXNlcl9pZF9zdHJpbmciLCJjb2xsZWN0aW9uIiwiQ29ubmVjdGlvbiIsIm1vZGVsIiwiQ29ubmVjdGlvblRDIiwiYWRkUmVzb2x2ZXIiLCJuYW1lIiwia2luZCIsImdldFR5cGUiLCJzb3VyY2UiLCJpbmZvIiwiYml0c2Nvb3AiLCJlbnYiLCJ2YWxpZGF0ZSIsImNhdGNoIiwiZXJyIiwiRXJyb3IiLCJwcm92aWRlciIsImZpbHRlciIsInByb2plY3Rpb24iLCJzb3VyY2VzIiwicmVtb3RlX21hcF9pZCIsInJlbWVfbWFwX2lkX3N0cmluZyIsInJlbW90ZVByb3ZpZGVyIiwiZ2V0TWFwIiwiZW5kcG9pbnRzIiwiY29ubmVjdGlvbiIsInJlbW90ZV9wcm92aWRlciIsImVhY2giLCJoYXMiLCJib2R5IiwicHVzaCIsIm1hcHBpbmciLCJ1bmlxIiwiY3JlYXRlQ29ubmVjdGlvbiIsInJlZGlyZWN0X3VybCIsImNvbnNvbGUiLCJsb2ciLCJyZWRpcmVjdCIsInJlZGlyZWN0VXJsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztnQ0FvbkJBLFdBQXlDQSxPQUF6QyxFQUFrREMsT0FBbEQsRUFBMkQ7QUFDdkQsUUFBSUQsUUFBUUUsR0FBUixDQUFZQyxJQUFaLElBQW9CLElBQXhCLEVBQThCO0FBQzVCO0FBQ0EsVUFBSUMsZUFBZUgsUUFBUUksRUFBM0I7O0FBRUEsVUFBSUEsS0FBSyxxQkFBVDtBQUNBLFVBQUlDLFFBQVEscUJBQVo7QUFDQSxVQUFJQyxhQUFhLGlCQUFPQyxHQUFQLEdBQWFDLEdBQWIsQ0FBaUIsR0FBakIsRUFBc0IsU0FBdEIsRUFBaUNDLE1BQWpDLEVBQWpCO0FBQ0E7QUFDRjtB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MEU7QUFHcEZVLHNCQUFjWixlQUFldkUsSUFBZixDQUFvQm1GLFlBQXBCLEdBQW1DLFVBQW5DLEdBQWdEbEIsU0FBU0ksYUFBVCxDQUF1QnRGLFFBQXZCLENBQWdDLEtBQWhDO0FBSHNCLE9BQWxFLENBQXBCOztBQU1BLFlBQU1NLDBCQUEwQjNCLE9BQTFCLEVBQW1DQyxPQUFuQyxDQUFOOztBQUVBLFlBQU15RixhQUFhOUUsV0FBYixDQUF5QixXQUF6QixFQUFzQ0MsT0FBdEMsQ0FBOEM7QUFDbERDLGNBQU07QUFDSkMsa0JBQVE7QUFDTlYsZ0JBQUkscUJBREU7QUFFTmlDLGtCQUFNO0FBQ0ZDLHNCQUFRO0FBQ0pJLDBCQUFVO0FBRE47QUFETixhQUZBO0FBT05rQix1QkFBVyxDQVBMO0FBUU5qQixxQkFBUyxJQVJIO0FBU05vQix5QkFBYWdELFdBQVdoRCxXQVRsQjtBQVVOa0IsMkJBQWU4QixXQUFXQyxlQUFYLENBQTJCckIsSUFWcEM7QUFXTloseUJBQWFnQyxXQUFXaEMsV0FYbEI7QUFZTkcsa0NBQXNCLG9CQUFLbEYsUUFBUUksRUFBYjtBQVpoQjtBQURKO0FBRDRDLE9BQTlDLENBQU47O0FBbUJBO0FBQ0E7QUFDQTtBQUNELEtBckZEOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUnVCLENBQXpCIiwiZmlsZSI6ImNvbm5lY3Rpb25zLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NoZW1hL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgY29tcG9zZVdpdGhNb25nb29zZSBmcm9tICdncmFwaHFsLWNvbXBvc2UtbW9uZ29vc2Uvbm9kZTgnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICdjb25maWcnO1xuaW1wb3J0IGh0dHBFcnJvcnMgZnJvbSAnaHR0cC1lcnJvcnMnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBub2RlVVVJRCBmcm9tICd1dWlkL3Y0JztcblxuaW1wb3J0IHsgQXNzb2NpYXRpb25TZXNzaW9uVEMgfSBmcm9tICcuL2Fzc29jaWF0aW9uLXNlc3Npb25zJztcbmltcG9ydCB7IFByb3ZpZGVyVEMgfSBmcm9tICcuL3Byb3ZpZGVycyc7XG5cbmltcG9ydCB1dWlkIGZyb20gJy4uLy4uL2xpYi90eXBlcy91dWlkJztcblxuZXhwb3J0IGNvbnN0IENvbm5lY3Rpb25zU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIF9pZDoge1xuICAgICAgdHlwZTogQnVmZmVyXG4gICAgfSxcbiAgICBpZDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2lkLnRvU3RyaW5nKCdoZXgnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb25kaXRpb25zICYmIHRoaXMuX2NvbmRpdGlvbnMuaWQpIHtcbiAgICAgICAgICB0aGlzLl9jb25kaXRpb25zLl9pZCA9IHV1aWQodmFsKTtcbiAgICAgICAgICBcbiAgICAgICAgICBkZWxldGUgdGhpcy5fY29uZGl0aW9ucy5pZDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5faWQgPSB1dWlkKHZhbCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBhdXRoOiB7XG4gICAgICBzdGF0dXM6IHtcbiAgICAgICAgYXV0aG9yaXplZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBsZXRlOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgZW5hYmxlZDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgZW5kcG9pbnRfZGF0YToge1xuICAgICAgZGlyZWN0X21lc3NhZ2VzX3JlY2VpdmVkOiB7XG4gICAgICAgIHNpbmNlX2lkOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGlyZWN0X21lc3NhZ2VzX3NlbnQ6IHtcbiAgICAgICAgc2luY2VfaWQ6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkcml2ZV9jaGFuZ2VzOiB7XG4gICAgICAgIHBhZ2VfdG9rZW46IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlZGl0czoge1xuICAgICAgICBjdXJzb3I6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIFxuICAgICAgZXZlbnRzOiB7XG4gICAgICAgIHNpbmNlOiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgXG4gICAgICBcbiAgICAgIGdtYWlsX2luYm94OiB7XG4gICAgICAgIHBhZ2VfdG9rZW46IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHE6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIHBvc3RzOiB7XG4gICAgICAgIG1pbl9pZDoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgc2luY2U6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIHR3ZWV0czoge1xuICAgICAgICBzaW5jZV9pZDoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICBpbmRleDogZmFsc2UgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgfSxcbiAgfSxcbiAgICBcbiAgICBmcmVxdWVuY3k6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgbGFzdF9ydW46IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICBhY2hpZXZlbWVudHM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBib2FyZHM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbW1lbnRzOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkaXJlY3RfbWVzc2FnZXNfcmVjZWl2ZWQ6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRpcmVjdF9tZXNzYWdlc19zZW50OiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkcml2ZV9jaGFuZ2VzOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlZGl0czoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXZlbnRzOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBnYW1lc19vd25lZDoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZ2lsZGVkX2NvbW1lbnRzOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBnbWFpbF9pbmJveDoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgbWVzc2FnZXNfcmVjZWl2ZWQ6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2VzX3NlbnQ6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHBpbnM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHBsYXlsaXN0czoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcG9zdHM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNhdmVkX2FsYnVtczoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2F2ZWRfY29tbWVudHM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNhdmVkX3RyYWNrczoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc3VibWl0dGVkOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB0aHJlYWRzX2Rvd252b3RlZDoge1xuICAgICAgICBlbmFibGVkOiB7XG4gICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZnJlcXVlbmN5OiB7XG4gICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdGhyZWFkc191cHZvdGVkOiB7XG4gICAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcmVxdWVuY3k6IHtcbiAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB0d2VldHM6IHtcbiAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGZyZXF1ZW5jeToge1xuICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9LFxuICAgIFxuICAgIHByb3ZpZGVyX2lkOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHByb3ZpZGVyX2lkX3N0cmluZzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJfaWQudG9TdHJpbmcoJ2hleCcpXG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgaWYgKHZhbCAmJiB0aGlzLl9jb25kaXRpb25zICYmIHRoaXMuX2NvbmRpdGlvbnMucHJvdmlkZXJfaWRfc3RyaW5nKSB7XG4gICAgICAgICAgdGhpcy5fY29uZGl0aW9ucy5wcm92aWRlcl9pZCA9IHV1aWQodmFsKTtcbiAgICAgICAgICBcbiAgICAgICAgICBkZWxldGUgdGhpcy5fY29uZGl0aW9ucy5wcm92aWRlcl9pZF9zdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMucHJvdmlkZXJfaWQgPSB1dWlkKHZhbCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBwcm92aWRlcl9uYW1lOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHJlbW90ZV9jb25uZWN0aW9uX2lkOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHJlbW90ZV9jb25uZWN0aW9uX2lkX3N0cmluZzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlX2Nvbm5lY3Rpb25faWQudG9TdHJpbmcoJ2hleCcpXG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgaWYgKHZhbCAmJiB0aGlzLl9jb25kaXRpb25zICYmIHRoaXMuX2NvbmRpdGlvbnMucmVtb3RlX2Nvbm5lY3Rpb25faWRfc3RyaW5nKSB7XG4gICAgICAgICAgdGhpcy5fY29uZGl0aW9ucy5yZW1vdGVfY29ubmVjdGlvbl9pZCA9IHV1aWQodmFsKTtcbiAgICAgICAgICBcbiAgICAgICAgICBkZWxldGUgdGhpcy5fY29uZGl0aW9ucy5yZW1vdGVfY29ubmVjdGlvbl9pZF9zdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVtb3RlX2Nvbm5lY3Rpb25faWQgPSB1dWlkKHZhbCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBzdGF0dXM6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgdXNlcl9pZDoge1xuICAgICAgdHlwZTogQnVmZmVyLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICB1c2VyX2lkX3N0cmluZzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkLnRvU3RyaW5nKCdoZXgnKVxuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIGlmICh2YWwgJiYgdGhpcy5fY29uZGl0aW9ucyAmJiB0aGlzLl9jb25kaXRpb25zLnVzZXJfaWRfc3RyaW5nKSB7XG4gICAgICAgICAgdGhpcy5fY29uZGl0aW9ucy51c2VyX2lkID0gdXVpZCh2YWwpO1xuICAgICAgICAgIFxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jb25kaXRpb25zLnVzZXJfaWRfc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnVzZXJfaWQgPSB1dWlkKHZhbCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICB7XG4gICAgY29sbGVjdGlvbjogJ2Nvbm5lY3Rpb25zJyxcbiAgfVxuKTtcbiAgXG5cbmV4cG9ydCBjb25zdCBDb25uZWN0aW9uID0gbW9uZ29vc2UubW9kZWwoJ0Nvbm5lY3Rpb25zJywgQ29ubmVjdGlvbnNTY2hlbWEpO1xuXG5leHBvcnQgY29uc3QgQ29ubmVjdGlvblRDID0gY29tcG9zZVdpdGhNb25nb29zZShDb25uZWN0aW9uKTtcblxuQ29ubmVjdGlvblRDLmFkZFJlc29sdmVyKHtcbiAgbmFtZTogJ2luaXRpYWxpemVDb25uZWN0aW9uJyxcbiAga2luZDogJ211dGF0aW9uJyxcbiAgdHlwZTogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKS5nZXRUeXBlKCksXG4gIGFyZ3M6IHtcbiAgICBwcm92aWRlcl9pZF9zdHJpbmc6ICdTdHJpbmchJyxcbiAgICBuYW1lOiAnU3RyaW5nJ1xuICB9LFxuICByZXNvbHZlOiBhc3luYyAoeyBzb3VyY2UsIGFyZ3MsIGNvbnRleHQsIGluZm8gfSkgPT4ge1xuICAgIGxldCBiaXRzY29vcCA9IGVudi5iaXRzY29vcDtcbiAgICBcbiAgICBhd2FpdCBlbnYudmFsaWRhdGUoJyMvdHlwZXMvdXVpZDQnLCBhcmdzLnByb3ZpZGVyX2lkX3N0cmluZylcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcm92aWRlcl9pZF9zdHJpbmcgbXVzdCBiZSBhIDMyLWNoYXJhY3RlciBVVUlENCB3aXRob3V0IGRhc2hlcycpXG4gICAgICB9KVxuICAgIFxuICAgIGxldCBwcm92aWRlciA9IGF3YWl0IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKS5yZXNvbHZlKHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlsdGVyOiB7XG4gICAgICAgICAgaWQ6IGFyZ3MucHJvdmlkZXJfaWRfc3RyaW5nXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwcm9qZWN0aW9uOiB7XG4gICAgICAgIHNvdXJjZXM6IHRydWUsXG4gICAgICAgIHJlbW90ZV9tYXBfaWQ6IHRydWUsXG4gICAgICAgIHJlbWVfbWFwX2lkX3N0cmluZzogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGlmIChwcm92aWRlciA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgaHR0cEVycm9ycyg0MDQpO1xuICAgIH1cbiAgICBcbiAgICBsZXQgcmVtb3RlUHJvdmlkZXIgPSBhd2FpdCBiaXRzY29vcC5nZXRNYXAocHJvdmlkZXIucmVtb3RlX21hcF9pZC50b1N0cmluZygnaGV4JykpO1xuICAgIFxuICAgIGxldCBlbmRwb2ludHMgPSBbXTtcbiAgICBsZXQgY29ubmVjdGlvbiA9IHtcbiAgICAgIGZyZXF1ZW5jeTogMSxcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBwZXJtaXNzaW9uczoge30sXG5cbiAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcbiAgICAgIHJlbW90ZV9wcm92aWRlcjogcmVtb3RlUHJvdmlkZXIsXG4gICAgICBwcm92aWRlcl9pZDogcHJvdmlkZXIuX2lkXG4gICAgfTtcblxuICAgIC8vIFN0b3JlIHZhbGlkIGVuZHBvaW50cy5cbiAgICBfLmVhY2gocHJvdmlkZXIuc291cmNlcywgZnVuY3Rpb24oc291cmNlLCBuYW1lKSB7XG4gICAgICBpZiAoXy5oYXMoY29udGV4dC5yZXEuYm9keSwgbmFtZSkpIHtcbiAgICAgICAgY29ubmVjdGlvbi5wZXJtaXNzaW9uc1tuYW1lXSA9IHtcbiAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgIGZyZXF1ZW5jeTogMVxuICAgICAgICB9O1xuXG4gICAgICAgIGVuZHBvaW50cy5wdXNoKHNvdXJjZS5tYXBwaW5nKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGVuZHBvaW50cyA9IF8udW5pcShlbmRwb2ludHMpO1xuXG4gICAgbGV0IGF1dGhPYmogPSBhd2FpdCBiaXRzY29vcC5jcmVhdGVDb25uZWN0aW9uKHByb3ZpZGVyLnJlbW90ZV9tYXBfaWQudG9TdHJpbmcoJ2hleCcpLCB7XG4gICAgICBuYW1lOiBhcmdzLm5hbWUsXG4gICAgICBlbmRwb2ludHM6ZW5kcG9pbnRzLFxuICAgICAgcmVkaXJlY3RfdXJsOiByZW1vdGVQcm92aWRlci5hdXRoLnJlZGlyZWN0X3VybCArICc/bWFwX2lkPScgKyBwcm92aWRlci5yZW1vdGVfbWFwX2lkLnRvU3RyaW5nKCdoZXgnKVxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coYXV0aE9iaik7XG4gICAgYXdhaXQgaW5zZXJ0QXNzb2NpYXRpb25TZXNzaW9ucyhjb250ZXh0LCBhdXRoT2JqKTtcbiAgICBcbiAgICBhd2FpdCBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLnJlc29sdmUoe1xuICAgICAgYXJnczoge1xuICAgICAgICByZWNvcmQ6IHtcbiAgICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICAgIGF1dGg6IHtcbiAgICAgICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZmFsc2VcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZnJlcXVlbmN5OiAxLFxuICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgcGVybWlzc2lvbnM6IGNvbm5lY3Rpb24ucGVybWlzc2lvbnMsXG4gICAgICAgICAgcHJvdmlkZXJfbmFtZTogY29ubmVjdGlvbi5yZW1vdGVfcHJvdmlkZXIubmFtZSxcbiAgICAgICAgICBwcm92aWRlcl9pZDogY29ubmVjdGlvbi5wcm92aWRlcl9pZCxcbiAgICAgICAgICByZW1vdGVfY29ubmVjdGlvbl9pZDogdXVpZChhdXRoT2JqLmlkKSxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnRleHQucmVzLnJlZGlyZWN0KGF1dGhPYmoucmVkaXJlY3RVcmwpO1xuICB9XG59KTsgXG5cbkNvbm5lY3Rpb25UQy5hZGRSZXNvbHZlcih7XG4gIG5hbWU6ICdjb21wbGV0ZUNvbm5lY3Rpb24nLFxuICBraW5kOiAncXVlcnknLFxuICB0eXBlOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLmdldFR5cGUoKSxcbiAgYXJnczoge1xuICAgIHByb3ZpZGVyX2lkX3N0cmluZzogJ1N0cmluZyEnLFxuICAgIG5hbWU6ICdTdHJpbmcnXG4gIH0sXG4gIHJlc29sdmU6IGFzeW5jICh7IHNvdXJjZSwgYXJncywgY29udGV4dCwgaW5mbyB9KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1Jlc29sdmluZyBDb25uZWN0aW9uIENyZWF0aW9uJyk7XG4gICAgY29uc29sZS5sb2coYXJncyk7XG4gICAgbGV0IGJpdHNjb29wID0gZW52LmJpdHNjb29wO1xuICAgIFxuICAgIGF3YWl0IGVudi52YWxpZGF0ZSgnIy90eXBlcy91dWlkNCcsIGFyZ3MucHJvdmlkZXJfaWRfc3RyaW5nKVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb3ZpZGVyX2lkX3N0cmluZyBtdXN0IGJlIGEgMzItY2hhcmFjdGVyIFVVSUQ0IHdpdGhvdXQgZGFzaGVzJylcbiAgICAgIH0pXG4gICAgXG4gICAgbGV0IHByb3ZpZGVyID0gYXdhaXQgUHJvdmlkZXJUQy5nZXRSZXNvbHZlcignZmluZE9uZScpLnJlc29sdmUoe1xuICAgICAgYXJnczoge1xuICAgICAgICBmaWx0ZXI6IHtcbiAgICAgICAgICBpZDogYXJncy5wcm92aWRlcl9pZF9zdHJpbmdcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHByb2plY3Rpb246IHtcbiAgICAgICAgc291cmNlczogdHJ1ZSxcbiAgICAgICAgcmVtb3RlX21hcF9pZDogdHJ1ZSxcbiAgICAgICAgcmVtZV9tYXBfaWRfc3RyaW5nOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHByb3ZpZGVyID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBodHRwRXJyb3JzKDQwNCk7XG4gICAgfVxuICAgIFxuICAgIGxldCByZW1vdGVQcm92aWRlciA9IGF3YWl0IGJpdHNjb29wLmdldE1hcChwcm92aWRlci5yZW1vdGVfbWFwX2lkLnRvU3RyaW5nKCdoZXgnKSk7XG4gICAgXG4gICAgbGV0IGVuZHBvaW50cyA9IFtdO1xuICAgIGxldCBjb25uZWN0aW9uID0ge1xuICAgICAgZnJlcXVlbmN5OiAxLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIHBlcm1pc3Npb25zOiB7fSxcblxuICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuICAgICAgcmVtb3RlX3Byb3ZpZGVyOiByZW1vdGVQcm92aWRlcixcbiAgICAgIHByb3ZpZGVyX2lkOiBwcm92aWRlci5faWRcbiAgICB9O1xuXG4gICAgLy8gU3RvcmUgdmFsaWQgZW5kcG9pbnRzLlxuICAgIF8uZWFjaChwcm92aWRlci5zb3VyY2VzLCBmdW5jdGlvbihzb3VyY2UsIG5hbWUpIHtcbiAgICAgIGlmIChfLmhhcyhjb250ZXh0LnJlcS5ib2R5LCBuYW1lKSkge1xuICAgICAgICBjb25uZWN0aW9uLnBlcm1pc3Npb25zW25hbWVdID0ge1xuICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgZnJlcXVlbmN5OiAxXG4gICAgICAgIH07XG5cbiAgICAgICAgZW5kcG9pbnRzLnB1c2goc291cmNlLm1hcHBpbmcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZW5kcG9pbnRzID0gXy51bmlxKGVuZHBvaW50cyk7XG5cbiAgICBsZXQgYXV0aE9iaiA9IGF3YWl0IGJpdHNjb29wLmNyZWF0ZUNvbm5lY3Rpb24ocHJvdmlkZXIucmVtb3RlX21hcF9pZC50b1N0cmluZygnaGV4JyksIHtcbiAgICAgIG5hbWU6IGFyZ3MubmFtZSxcbiAgICAgIGVuZHBvaW50czplbmRwb2ludHMsXG4gICAgICByZWRpcmVjdF91cmw6IHJlbW90ZVByb3ZpZGVyLmF1dGgucmVkaXJlY3RfdXJsICsgJz9tYXBfaWQ9JyArIHByb3ZpZGVyLnJlbW90ZV9tYXBfaWQudG9TdHJpbmcoJ2hleCcpXG4gICAgfSk7XG5cbiAgICBhd2FpdCBpbnNlcnRBc3NvY2lhdGlvblNlc3Npb25zKGNvbnRleHQsIGF1dGhPYmopO1xuICAgIFxuICAgIGF3YWl0IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJykucmVzb2x2ZSh7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIHJlY29yZDoge1xuICAgICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgICAgYXV0aDoge1xuICAgICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmYWxzZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmcmVxdWVuY3k6IDEsXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBwZXJtaXNzaW9uczogY29ubmVjdGlvbi5wZXJtaXNzaW9ucyxcbiAgICAgICAgICBwcm92aWRlcl9uYW1lOiBjb25uZWN0aW9uLnJlbW90ZV9wcm92aWRlci5uYW1lLFxuICAgICAgICAgIHByb3ZpZGVyX2lkOiBjb25uZWN0aW9uLnByb3ZpZGVyX2lkLFxuICAgICAgICAgIHJlbW90ZV9jb25uZWN0aW9uX2lkOiB1dWlkKGF1dGhPYmouaWQpLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gUHJvbWlzZS5hbGwoW1xuICAgIC8vICAgdmFsaWRhdGVcbiAgICAvLyBdKVxuICB9XG59KTsgXG5cblxuYXN5bmMgZnVuY3Rpb24gaW5zZXJ0QXNzb2NpYXRpb25TZXNzaW9ucyhjb250ZXh0LCBhdXRoT2JqKSB7XG4gICAgaWYgKGNvbnRleHQucmVxLnVzZXIgPT0gbnVsbCkgeyAgICBcbiAgICAgIC8vIE9ubHkgcnVuIGlmIHRoZSB1c2VyIGlzIG5vdCBsb2dnZWQgaW5cbiAgICAgIGxldCBjb25uZWN0aW9uSWQgPSBhdXRoT2JqLmlkO1xuXG4gICAgICBsZXQgaWQgPSB1dWlkKCk7XG4gICAgICBsZXQgdG9rZW4gPSB1dWlkKCk7XG4gICAgICBsZXQgZXhwaXJhdGlvbiA9IG1vbWVudC51dGMoKS5hZGQoNjAwLCAnc2Vjb25kcycpLnRvRGF0ZSgpO1xuICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBoYXZlIGEgZGlmZmVyZW50IGNvb2tpZSBmb3IgZWFjaCBwcm92aWRlci5cblx0XHQgIC8vIFJldmlldyBpZiB3ZSBkbyBuZWVkIHRvIGhhdmUgYSBkaWZmZXJlbnQgY29va2llIGZvciBlYWNoIHByb3ZpZGVyLlxuICAgICAgbGV0IGNvb2tpZU5hbWUgPSAnbG9naW5fYXNzb2MnO1xuXG4gICAgICBhd2FpdCBBc3NvY2lhdGlvblNlc3Npb25UQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJykucmVzb2x2ZSh7XG4gICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICByZWNvcmQ6IHtcbiAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgIHRva2VuX3N0cmluZzogdG9rZW4sXG4gICAgICAgICAgICBjb25uZWN0aW9uX2lkX3N0cmluZzogY29ubmVjdGlvbklkLFxuICAgICAgICAgICAgdHRsOiBleHBpcmF0aW9uXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgY29va2llIHNvIHVzZXIgY2FuIGxvZ2luL3NpZ251cCBhZnRlciBPYXV0aCB2YWxpZGF0aW9uLlxuICAgICAgICBjb250ZXh0LnJlcy5jb29raWUoY29va2llTmFtZSwgdG9rZW4udG9TdHJpbmcoJ2hleCcpLCB7XG4gICAgICAgICAgICBkb21haW46IGNvbmZpZy5kb21haW4sXG4gICAgICAgICAgICBzZWN1cmU6IHRydWUsXG4gICAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICAgIGV4cGlyZXM6IGV4cGlyYXRpb25cbiAgICAgICAgfSk7XG4gICAgfVxuICBcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "connections.js"
      ],
      "names": [
        "context",
        "authObj",
        "req",
        "user",
        "connectionId",
        "id",
        "token",
        "expiration",
        "utc",
        "add",
        "toDate",
        "cookieName",
        "getResolver",
        "resolve",
        "args",
        "record",
        "token_string",
        "connection_id_string",
        "ttl",
        "res",
        "cookie",
        "toString",
        "domain",
        "secure",
        "httpOnly",
        "expires",
        "Promise",
        "insertAssociationSessions",
        "ConnectionsSchema",
        "Schema",
        "_id",
        "type",
        "Buffer",
        "String",
        "get",
        "set",
        "val",
        "_conditions",
        "auth",
        "status",
        "authorized",
        "Boolean",
        "index",
        "complete",
        "enabled",
        "endpoint_data",
        "direct_messages_received",
        "since_id",
        "direct_messages_sent",
        "drive_changes",
        "page_token",
        "edits",
        "cursor",
        "events",
        "since",
        "Number",
        "gmail_inbox",
        "q",
        "posts",
        "min_id",
        "tweets",
        "frequency",
        "last_run",
        "Date",
        "permissions",
        "achievements",
        "boards",
        "comments",
        "games_owned",
        "gilded_comments",
        "messages_received",
        "messages_sent",
        "pins",
        "playlists",
        "saved_albums",
        "saved_comments",
        "saved_tracks",
        "submitted",
        "threads_downvoted",
        "threads_upvoted",
        "provider_id",
        "provider_id_string",
        "provider_name",
        "remote_connection_id",
        "remote_connection_id_string",
        "user_id",
        "user_id_string",
        "collection",
        "Connection",
        "model",
        "ConnectionTC",
        "addResolver",
        "name",
        "kind",
        "getType",
        "source",
        "info",
        "bitscoop",
        "env",
        "validate",
        "catch",
        "err",
        "Error",
        "provider",
        "filter",
        "projection",
        "sources",
        "remote_map_id",
        "reme_map_id_string",
        "remoteProvider",
        "getMap",
        "endpoints",
        "connection",
        "remote_provider",
        "each",
        "has",
        "body",
        "push",
        "mapping",
        "uniq",
        "createConnection",
        "redirect_url",
        "console",
        "log",
        "redirect",
        "redirectUrl"
      ],
      "mappings": "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",
      "file": "connections.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\nimport _ from 'lodash';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\nimport config from 'config';\nimport httpErrors from 'http-errors';\nimport moment from 'moment';\nimport mongoose from 'mongoose';\nimport nodeUUID from 'uuid/v4';\n\nimport { AssociationSessionTC } from './association-sessions';\nimport { ProviderTC } from './providers';\n\nimport uuid from '../../lib/types/uuid';\n\nexport const ConnectionsSchema = new mongoose.Schema(\n  {\n    _id: {\n      type: Buffer\n    },\n    id: {\n      type: String,\n      get: function() {\n        if (this._id) {\n          return this._id.toString('hex');\n        }\n      },\n      set: function(val) {\n        if (this._conditions && this._conditions.id) {\n          this._conditions._id = uuid(val);\n          \n          delete this._conditions.id;\n        }\n        \n        this._id = uuid(val);\n      }\n    },\n    auth: {\n      status: {\n        authorized: {\n          type: Boolean,\n          index: false\n        },\n        complete: {\n          type: Boolean,\n          index: false\n        }\n      }\n    },\n    enabled: {\n      type: Boolean,\n      index: false\n    },\n    \n    endpoint_data: {\n      direct_messages_received: {\n        since_id: {\n          type: String,\n          index: false\n        }\n      },\n      direct_messages_sent: {\n        since_id: {\n          type: String,\n          index: false\n        }\n      },\n      drive_changes: {\n        page_token: {\n          type: String,\n          index: false\n        }\n      },\n      edits: {\n        cursor: {\n          type: String,\n          index: false\n        }\n      },\n\n      \n      events: {\n        since: {\n          type: Number,\n          index: false\n        }\n      },\n      \n      \n      gmail_inbox: {\n        page_token: {\n          type: String,\n          index: false\n        },\n        q: {\n          type: String,\n          index: false\n        }\n      },\n      \n      posts: {\n        min_id: {\n          type: String,\n          index: false\n        },\n        since: {\n          type: Number,\n          index: false\n        }\n      },\n      \n      tweets: {\n        since_id: {\n          type: String,\n          index: false         \n        }\n      },\n  },\n    \n    frequency: {\n      type: Number,\n      index: false\n    },\n    \n    last_run: {\n      type: Date,\n      index: false\n    },\n    \n    permissions: {\n      achievements: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        \n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      boards: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      comments: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      direct_messages_received: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      direct_messages_sent: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      drive_changes: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      edits: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      events: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      games_owned: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      gilded_comments: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      gmail_inbox: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      messages_received: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      messages_sent: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      pins: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      playlists: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      posts: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      saved_albums: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      saved_comments: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      saved_tracks: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      submitted: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      threads_downvoted: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      threads_upvoted: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n      tweets: {\n        enabled: {\n          type: Boolean,\n          index: false\n        },\n        frequency: {\n          type: Number,\n          index: false\n        }\n      },\n    },\n    \n    provider_id: {\n      type: Buffer,\n      index: false\n    },\n    provider_id_string: {\n      type: String,\n      get: function() {\n        return this.provider_id.toString('hex')\n      },\n      set: function(val) {\n        if (val && this._conditions && this._conditions.provider_id_string) {\n          this._conditions.provider_id = uuid(val);\n          \n          delete this._conditions.provider_id_string;\n        }\n        \n        this.provider_id = uuid(val);\n      }\n    },\n    provider_name: {\n      type: String,\n      index: false\n    },\n    remote_connection_id: {\n      type: Buffer,\n      index: false\n    },\n    remote_connection_id_string: {\n      type: String,\n      get: function() {\n        return this.remote_connection_id.toString('hex')\n      },\n      set: function(val) {\n        if (val && this._conditions && this._conditions.remote_connection_id_string) {\n          this._conditions.remote_connection_id = uuid(val);\n          \n          delete this._conditions.remote_connection_id_string;\n        }\n        \n        this.remote_connection_id = uuid(val);\n      }\n    },\n    status: {\n      type: String,\n      index: false\n    },\n    user_id: {\n      type: Buffer,\n      index: false\n    },\n    user_id_string: {\n      type: String,\n      get: function() {\n        return this._id.toString('hex')\n      },\n      set: function(val) {\n        if (val && this._conditions && this._conditions.user_id_string) {\n          this._conditions.user_id = uuid(val);\n          \n          delete this._conditions.user_id_string;\n        }\n        \n        this.user_id = uuid(val);\n      }\n    }\n  },\n  {\n    collection: 'connections',\n  }\n);\n  \n\nexport const Connection = mongoose.model('Connections', ConnectionsSchema);\n\nexport const ConnectionTC = composeWithMongoose(Connection);\n\nConnectionTC.addResolver({\n  name: 'initializeConnection',\n  kind: 'mutation',\n  type: ConnectionTC.getResolver('createOne').getType(),\n  args: {\n    provider_id_string: 'String!',\n    name: 'String'\n  },\n  resolve: async ({ source, args, context, info }) => {\n    let bitscoop = env.bitscoop;\n    \n    await env.validate('#/types/uuid4', args.provider_id_string)\n      .catch(function(err) {\n        throw new Error('provider_id_string must be a 32-character UUID4 without dashes')\n      })\n    \n    let provider = await ProviderTC.getResolver('findOne').resolve({\n      args: {\n        filter: {\n          id: args.provider_id_string\n        }\n      },\n      projection: {\n        sources: true,\n        remote_map_id: true,\n        reme_map_id_string: true\n      }\n    });\n    \n    if (provider == null) {\n      throw new httpErrors(404);\n    }\n    \n    let remoteProvider = await bitscoop.getMap(provider.remote_map_id.toString('hex'));\n    \n    let endpoints = [];\n    let connection = {\n      frequency: 1,\n      enabled: true,\n      permissions: {},\n\n      provider: provider,\n      remote_provider: remoteProvider,\n      provider_id: provider._id\n    };\n\n    // Store valid endpoints.\n    _.each(provider.sources, function(source, name) {\n      if (_.has(context.req.body, name)) {\n        connection.permissions[name] = {\n          enabled: true,\n          frequency: 1\n        };\n\n        endpoints.push(source.mapping);\n      }\n    });\n\n    endpoints = _.uniq(endpoints);\n\n    let authObj = await bitscoop.createConnection(provider.remote_map_id.toString('hex'), {\n      name: args.name,\n      endpoints:endpoints,\n      redirect_url: remoteProvider.auth.redirect_url + '?map_id=' + provider.remote_map_id.toString('hex')\n    });\n\n    console.log(authObj);\n    await insertAssociationSessions(context, authObj);\n    \n    await ConnectionTC.getResolver('createOne').resolve({\n      args: {\n        record: {\n          id: uuid(),\n          auth: {\n              status: {\n                  complete: false\n              }\n          },\n          frequency: 1,\n          enabled: true,\n          permissions: connection.permissions,\n          provider_name: connection.remote_provider.name,\n          provider_id: connection.provider_id,\n          remote_connection_id: uuid(authObj.id),\n        }\n      }\n    });\n    \n    context.res.redirect(authObj.redirectUrl);\n  }\n}); \n\nConnectionTC.addResolver({\n  name: 'completeConnection',\n  kind: 'query',\n  type: ConnectionTC.getResolver('createOne').getType(),\n  args: {\n    provider_id_string: 'String!',\n    name: 'String'\n  },\n  resolve: async ({ source, args, context, info }) => {\n    console.log('Resolving Connection Creation');\n    console.log(args);\n    let bitscoop = env.bitscoop;\n    \n    await env.validate('#/types/uuid4', args.provider_id_string)\n      .catch(function(err) {\n        console.log(err);\n        throw new Error('provider_id_string must be a 32-character UUID4 without dashes')\n      })\n    \n    let provider = await ProviderTC.getResolver('findOne').resolve({\n      args: {\n        filter: {\n          id: args.provider_id_string\n        }\n      },\n      projection: {\n        sources: true,\n        remote_map_id: true,\n        reme_map_id_string: true\n      }\n    });\n    \n    if (provider == null) {\n      throw new httpErrors(404);\n    }\n    \n    let remoteProvider = await bitscoop.getMap(provider.remote_map_id.toString('hex'));\n    \n    let endpoints = [];\n    let connection = {\n      frequency: 1,\n      enabled: true,\n      permissions: {},\n\n      provider: provider,\n      remote_provider: remoteProvider,\n      provider_id: provider._id\n    };\n\n    // Store valid endpoints.\n    _.each(provider.sources, function(source, name) {\n      if (_.has(context.req.body, name)) {\n        connection.permissions[name] = {\n          enabled: true,\n          frequency: 1\n        };\n\n        endpoints.push(source.mapping);\n      }\n    });\n\n    endpoints = _.uniq(endpoints);\n\n    let authObj = await bitscoop.createConnection(provider.remote_map_id.toString('hex'), {\n      name: args.name,\n      endpoints:endpoints,\n      redirect_url: remoteProvider.auth.redirect_url + '?map_id=' + provider.remote_map_id.toString('hex')\n    });\n\n    await insertAssociationSessions(context, authObj);\n    \n    await ConnectionTC.getResolver('createOne').resolve({\n      args: {\n        record: {\n          id: uuid(),\n          auth: {\n              status: {\n                  complete: false\n              }\n          },\n          frequency: 1,\n          enabled: true,\n          permissions: connection.permissions,\n          provider_name: connection.remote_provider.name,\n          provider_id: connection.provider_id,\n          remote_connection_id: uuid(authObj.id),\n        }\n      }\n    });\n    \n    // Promise.all([\n    //   validate\n    // ])\n  }\n}); \n\n\nasync function insertAssociationSessions(context, authObj) {\n    if (context.req.user == null) {    \n      // Only run if the user is not logged in\n      let connectionId = authObj.id;\n\n      let id = uuid();\n      let token = uuid();\n      let expiration = moment.utc().add(600, 'seconds').toDate();\n      // We don't need to have a different cookie for each provider.\n\t\t  // Review if we do need to have a different cookie for each provider.\n      let cookieName = 'login_assoc';\n\n      await AssociationSessionTC.getResolver('createOne').resolve({\n        args: {\n          record: {\n            id: id,\n            token_string: token,\n            connection_id_string: connectionId,\n            ttl: expiration\n          }\n        }\n      })\n      \n      // Create cookie so user can login/signup after Oauth validation.\n        context.res.cookie(cookieName, token.toString('hex'), {\n            domain: config.domain,\n            secure: true,\n            httpOnly: true,\n            expires: expiration\n        });\n    }\n  \n    return Promise.resolve();\n}\n"
      ]
    },
    "mtime": 1521833594845
  },
  "{\"filename\":\"/app/schema/models/contacts.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ContactsSchema",
            "Contacts",
            "ContactTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ContactsSchema",
              "exported": "ContactsSchema"
            },
            {
              "kind": "local",
              "local": "Contacts",
              "exported": "Contacts"
            },
            {
              "kind": "local",
              "local": "ContactTC",
              "exported": "ContactTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/contacts.js",
      "filenameRelative": "/app/schema/models/contacts.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "contacts.js",
      "sourceFileName": "contacts.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "contacts"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ContactTC = exports.Contacts = exports.ContactsSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: FIXXX\nconst ContactsSchema = exports.ContactsSchema = new _mongoose2.default.Schema({\n  avatar_url: {\n    type: String,\n    index: false\n  },\n\n  connection: {\n    type: Buffer,\n    index: false\n  },\n\n  created: {\n    type: Date,\n    index: false\n  },\n\n  handle: {\n    type: String,\n    index: false\n  },\n\n  identifier: {\n    type: String,\n    index: false\n  },\n\n  name: {\n    type: String,\n    index: false\n  },\n\n  provider_name: {\n    type: String,\n    index: false\n  },\n\n  remote_id: {\n    type: String,\n    index: false\n  },\n\n  tagMasks: {\n    added: {\n      type: [String],\n      index: false\n    }\n  },\n\n  updated: {\n    type: Date,\n    index: false\n  },\n\n  user_id: {\n    type: Buffer\n    //index: false\n  }\n}, {\n  collection: 'contacts'\n});\n\nconst Contacts = exports.Contacts = _mongoose2.default.model('Contacts', ContactsSchema);\n\nconst ContactTC = exports.ContactTC = (0, _node2.default)(Contacts);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRhY3RzLmpzIl0sIm5hbWVzIjpbIkNvbnRhY3RzU2NoZW1hIiwiU2NoZW1hIiwiYXZhdGFyX3VybCIsInR5cGUiLCJTdHJpbmciLCJpbmRleCIsImNvbm5lY3Rpb24iLCJCdWZmZXIiLCJjcmVhdGVkIiwiRGF0ZSIsImhhbmRsZSIsImlkZW50aWZpZXIiLCJuYW1lIiwicHJvdmlkZXJfbmFtZSIsInJlbW90ZV9pZCIsInRhZ01hc2tzIiwiYWRkZWQiLCJ1cGRhdGVkIiwidXNlcl9pZCIsImNvbGxlY3Rpb24iLCJDb250YWN0cyIsIm1vZGVsIiwiQ29udGFjdFRDIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR0E7Ozs7QUFDQTs7Ozs7O0FBRkE7QUFJTyxNQUFNQSwwQ0FBaUIsSUFBSSxtQkFBU0MsTUFBYixDQUM1QjtBQUNFQyxjQUFZO0FBQ1ZDLFVBQU1DLE1BREk7QUFFVkMsV0FBTztBQUZHLEdBRGQ7O0FBTUVDLGNBQVk7QUFDVkgsVUFBTUksTUFESTtBQUVWRixXQUFPO0FBRkcsR0FOZDs7QUFXRUcsV0FBUztBQUNQTCxVQUFNTSxJQURDO0FBRVBKLFdBQU87QUFGQSxHQVhYOztBQWdCRUssVUFBUTtBQUNOUCxVQUFNQyxNQURBO0FBRU5DLFdBQU87QUFGRCxHQWhCVjs7QUFxQkVNLGNBQVk7QUFDVlIsVUFBTUMsTUFESTtBQUVWQyxXQUFPO0FBRkcsR0FyQmQ7O0FBMEJFTyxRQUFNO0FBQ0pULFVBQU1DLE1BREY7QUFFSkMsV0FBTztBQUZILEdBMUJSOztBQStCRVEsaUJBQWU7QUFDYlYsVUFBTUMsTUFETztBQUViQyxXQUFPO0FBRk0sR0EvQmpCOztBQW9DRVMsYUFBVztBQUNUWCxVQUFNQyxNQURHO0FBRVRDLFdBQU87QUFGRSxHQXBDYjs7QUF5Q0VVLFlBQVU7QUFDUkMsV0FBTztBQUNMYixZQUFNLENBQUNDLE1BQUQsQ0FERDtBQUVMQyxhQUFPO0FBRkY7QUFEQyxHQXpDWjs7QUFnREVZLFdBQVM7QUFDUGQsVUFBTU0sSUFEQztBQUVQSixXQUFPO0FBRkEsR0FoRFg7O0FBcURFYSxXQUFTO0FBQ1BmLFVBQU1JO0FBQ047QUFGTztBQXJEWCxDQUQ0QixFQTJENUI7QUFDRVksY0FBWTtBQURkLENBM0Q0QixDQUF2Qjs7QUFpRUEsTUFBTUMsOEJBQVcsbUJBQVNDLEtBQVQsQ0FBZSxVQUFmLEVBQTJCckIsY0FBM0IsQ0FBakI7O0FBRUEsTUFBTXNCLGdDQUFZLG9CQUFvQkYsUUFBcEIsQ0FBbEIiLCJmaWxlIjoiY29udGFjdHMuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuLy8gVE9ETzogRklYWFhcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY29tcG9zZVdpdGhNb25nb29zZSBmcm9tICdncmFwaHFsLWNvbXBvc2UtbW9uZ29vc2Uvbm9kZTgnO1xuXG5leHBvcnQgY29uc3QgQ29udGFjdHNTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgYXZhdGFyX3VybDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICBjb25uZWN0aW9uOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIGNyZWF0ZWQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIGhhbmRsZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICBpZGVudGlmaWVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIG5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgcHJvdmlkZXJfbmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICByZW1vdGVfaWQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgdGFnTWFza3M6IHtcbiAgICAgIGFkZGVkOiB7XG4gICAgICAgIHR5cGU6IFtTdHJpbmddLFxuICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgIH0sXG4gICAgfSxcbiAgICBcbiAgICB1cGRhdGVkOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICB1c2VyX2lkOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICAvL2luZGV4OiBmYWxzZVxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjb2xsZWN0aW9uOiAnY29udGFjdHMnLFxuICB9XG4pO1xuICBcblxuZXhwb3J0IGNvbnN0IENvbnRhY3RzID0gbW9uZ29vc2UubW9kZWwoJ0NvbnRhY3RzJywgQ29udGFjdHNTY2hlbWEpO1xuXG5leHBvcnQgY29uc3QgQ29udGFjdFRDID0gY29tcG9zZVdpdGhNb25nb29zZShDb250YWN0cyk7XG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "contacts.js"
      ],
      "names": [
        "ContactsSchema",
        "Schema",
        "avatar_url",
        "type",
        "String",
        "index",
        "connection",
        "Buffer",
        "created",
        "Date",
        "handle",
        "identifier",
        "name",
        "provider_name",
        "remote_id",
        "tagMasks",
        "added",
        "updated",
        "user_id",
        "collection",
        "Contacts",
        "model",
        "ContactTC"
      ],
      "mappings": ";;;;;;;AAGA;;;;AACA;;;;;;AAFA;AAIO,MAAMA,0CAAiB,IAAI,mBAASC,MAAb,CAC5B;AACEC,cAAY;AACVC,UAAMC,MADI;AAEVC,WAAO;AAFG,GADd;;AAMEC,cAAY;AACVH,UAAMI,MADI;AAEVF,WAAO;AAFG,GANd;;AAWEG,WAAS;AACPL,UAAMM,IADC;AAEPJ,WAAO;AAFA,GAXX;;AAgBEK,UAAQ;AACNP,UAAMC,MADA;AAENC,WAAO;AAFD,GAhBV;;AAqBEM,cAAY;AACVR,UAAMC,MADI;AAEVC,WAAO;AAFG,GArBd;;AA0BEO,QAAM;AACJT,UAAMC,MADF;AAEJC,WAAO;AAFH,GA1BR;;AA+BEQ,iBAAe;AACbV,UAAMC,MADO;AAEbC,WAAO;AAFM,GA/BjB;;AAoCES,aAAW;AACTX,UAAMC,MADG;AAETC,WAAO;AAFE,GApCb;;AAyCEU,YAAU;AACRC,WAAO;AACLb,YAAM,CAACC,MAAD,CADD;AAELC,aAAO;AAFF;AADC,GAzCZ;;AAgDEY,WAAS;AACPd,UAAMM,IADC;AAEPJ,WAAO;AAFA,GAhDX;;AAqDEa,WAAS;AACPf,UAAMI;AACN;AAFO;AArDX,CAD4B,EA2D5B;AACEY,cAAY;AADd,CA3D4B,CAAvB;;AAiEA,MAAMC,8BAAW,mBAASC,KAAT,CAAe,UAAf,EAA2BrB,cAA3B,CAAjB;;AAEA,MAAMsB,gCAAY,oBAAoBF,QAApB,CAAlB",
      "file": "contacts.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\n// TODO: FIXXX\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\n\nexport const ContactsSchema = new mongoose.Schema(\n  {\n    avatar_url: {\n      type: String,\n      index: false\n    },\n    \n    connection: {\n      type: Buffer,\n      index: false\n    },\n    \n    created: {\n      type: Date,\n      index: false\n    },\n    \n    handle: {\n      type: String,\n      index: false\n    },\n    \n    identifier: {\n      type: String,\n      index: false\n    },\n    \n    name: {\n      type: String,\n      index: false\n    },\n    \n    provider_name: {\n      type: String,\n      index: false\n    },\n    \n    remote_id: {\n      type: String,\n      index: false\n    },\n    \n    tagMasks: {\n      added: {\n        type: [String],\n        index: false\n      },\n    },\n    \n    updated: {\n      type: Date,\n      index: false\n    },\n    \n    user_id: {\n      type: Buffer,\n      //index: false\n    },\n  },\n  {\n    collection: 'contacts',\n  }\n);\n  \n\nexport const Contacts = mongoose.model('Contacts', ContactsSchema);\n\nexport const ContactTC = composeWithMongoose(Contacts);\n\n"
      ]
    },
    "mtime": 1521506027994
  },
  "{\"filename\":\"/app/schema/models/content.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ContentSchema",
            "Content",
            "ContentTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ContentSchema",
              "exported": "ContentSchema"
            },
            {
              "kind": "local",
              "local": "Content",
              "exported": "Content"
            },
            {
              "kind": "local",
              "local": "ContentTC",
              "exported": "ContentTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/content.js",
      "filenameRelative": "/app/schema/models/content.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "content.js",
      "sourceFileName": "content.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "content"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ContentTC = exports.Content = exports.ContentSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst ContentSchema = exports.ContentSchema = new _mongoose2.default.Schema({\n  connection: {\n    type: Buffer,\n    index: false\n  },\n  created: {\n    type: Date,\n    index: false\n  },\n  embed_content: {\n    type: String,\n    index: false\n  },\n  embed_format: {\n    type: String,\n    index: false\n  },\n  embed_thumbnail: {\n    type: String,\n    index: false\n  },\n  embeded_format: {\n    type: String,\n    index: false\n  },\n  identifier: {\n    type: String,\n    index: false\n  },\n  mimetype: {\n    type: String,\n    index: false\n  },\n  owner: {\n    type: String,\n    index: false\n  },\n  provider_name: {\n    type: String,\n    index: false\n  },\n  remote_id: {\n    type: String,\n    index: false\n  },\n  tagMasks: {\n    source: {\n      type: [String],\n      index: false\n    }\n  },\n  text: {\n    type: String,\n    index: false\n  },\n  thumbnail: {\n    type: String,\n    index: false\n  },\n  title: {\n    type: String,\n    index: false\n  },\n  type: {\n    type: String,\n    index: false\n  },\n  updated: {\n    type: Date,\n    index: false\n  },\n  url: {\n    type: String,\n    index: false\n  },\n  user_id: {\n    type: Buffer,\n    index: false\n  }\n}, {\n  collection: 'content'\n});\n\nconst Content = exports.Content = _mongoose2.default.model('Content', ContentSchema);\n\nconst ContentTC = exports.ContentTC = (0, _node2.default)(Content);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRlbnQuanMiXSwibmFtZXMiOlsiQ29udGVudFNjaGVtYSIsIlNjaGVtYSIsImNvbm5lY3Rpb24iLCJ0eXBlIiwiQnVmZmVyIiwiaW5kZXgiLCJjcmVhdGVkIiwiRGF0ZSIsImVtYmVkX2NvbnRlbnQiLCJTdHJpbmciLCJlbWJlZF9mb3JtYXQiLCJlbWJlZF90aHVtYm5haWwiLCJlbWJlZGVkX2Zvcm1hdCIsImlkZW50aWZpZXIiLCJtaW1ldHlwZSIsIm93bmVyIiwicHJvdmlkZXJfbmFtZSIsInJlbW90ZV9pZCIsInRhZ01hc2tzIiwic291cmNlIiwidGV4dCIsInRodW1ibmFpbCIsInRpdGxlIiwidXBkYXRlZCIsInVybCIsInVzZXJfaWQiLCJjb2xsZWN0aW9uIiwiQ29udGVudCIsIm1vZGVsIiwiQ29udGVudFRDIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUE7Ozs7QUFDQTs7Ozs7O0FBRU8sTUFBTUEsd0NBQWdCLElBQUksbUJBQVNDLE1BQWIsQ0FDM0I7QUFDRUMsY0FBWTtBQUNWQyxVQUFNQyxNQURJO0FBRVZDLFdBQU87QUFGRyxHQURkO0FBS0VDLFdBQVM7QUFDUEgsVUFBTUksSUFEQztBQUVQRixXQUFPO0FBRkEsR0FMWDtBQVNFRyxpQkFBZTtBQUNiTCxVQUFNTSxNQURPO0FBRWJKLFdBQU87QUFGTSxHQVRqQjtBQWFFSyxnQkFBYztBQUNaUCxVQUFNTSxNQURNO0FBRVpKLFdBQU87QUFGSyxHQWJoQjtBQWlCRU0sbUJBQWlCO0FBQ2ZSLFVBQU1NLE1BRFM7QUFFZkosV0FBTztBQUZRLEdBakJuQjtBQXFCRU8sa0JBQWdCO0FBQ2RULFVBQU1NLE1BRFE7QUFFZEosV0FBTztBQUZPLEdBckJsQjtBQXlCRVEsY0FBWTtBQUNWVixVQUFNTSxNQURJO0FBRVZKLFdBQU87QUFGRyxHQXpCZDtBQTZCRVMsWUFBVTtBQUNSWCxVQUFNTSxNQURFO0FBRVJKLFdBQU87QUFGQyxHQTdCWjtBQWlDRVUsU0FBTztBQUNMWixVQUFNTSxNQUREO0FBRUxKLFdBQU87QUFGRixHQWpDVDtBQXFDRVcsaUJBQWU7QUFDYmIsVUFBTU0sTUFETztBQUViSixXQUFPO0FBRk0sR0FyQ2pCO0FBeUNFWSxhQUFXO0FBQ1RkLFVBQU1NLE1BREc7QUFFVEosV0FBTztBQUZFLEdBekNiO0FBNkNFYSxZQUFVO0FBQ1JDLFlBQVE7QUFDTmhCLFlBQU0sQ0FBQ00sTUFBRCxDQURBO0FBRU5KLGFBQU87QUFGRDtBQURBLEdBN0NaO0FBbURFZSxRQUFNO0FBQ0pqQixVQUFNTSxNQURGO0FBRUpKLFdBQU87QUFGSCxHQW5EUjtBQXVERWdCLGFBQVc7QUFDVGxCLFVBQU1NLE1BREc7QUFFVEosV0FBTztBQUZFLEdBdkRiO0FBMkRFaUIsU0FBTztBQUNMbkIsVUFBTU0sTUFERDtBQUVMSixXQUFPO0FBRkYsR0EzRFQ7QUErREVGLFFBQU07QUFDSkEsVUFBTU0sTUFERjtBQUVKSixXQUFPO0FBRkgsR0EvRFI7QUFtRUVrQixXQUFTO0FBQ1BwQixVQUFNSSxJQURDO0FBRVBGLFdBQU87QUFGQSxHQW5FWDtBQXVFRW1CLE9BQUs7QUFDSHJCLFVBQU1NLE1BREg7QUFFSEosV0FBTztBQUZKLEdBdkVQO0FBMkVFb0IsV0FBUztBQUNQdEIsVUFBTUMsTUFEQztBQUVQQyxXQUFPO0FBRkE7QUEzRVgsQ0FEMkIsRUFpRjNCO0FBQ0VxQixjQUFZO0FBRGQsQ0FqRjJCLENBQXRCOztBQXNGQSxNQUFNQyw0QkFBVSxtQkFBU0MsS0FBVCxDQUFlLFNBQWYsRUFBMEI1QixhQUExQixDQUFoQjs7QUFFQSxNQUFNNkIsZ0NBQVksb0JBQW9CRixPQUFwQixDQUFsQiIsImZpbGUiOiJjb250ZW50LmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NoZW1hL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY29tcG9zZVdpdGhNb25nb29zZSBmcm9tICdncmFwaHFsLWNvbXBvc2UtbW9uZ29vc2Uvbm9kZTgnO1xuXG5leHBvcnQgY29uc3QgQ29udGVudFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICBjb25uZWN0aW9uOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGNyZWF0ZWQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGVtYmVkX2NvbnRlbnQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgZW1iZWRfZm9ybWF0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGVtYmVkX3RodW1ibmFpbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBlbWJlZGVkX2Zvcm1hdDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBpZGVudGlmaWVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIG1pbWV0eXBlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIG93bmVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHByb3ZpZGVyX25hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgcmVtb3RlX2lkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHRhZ01hc2tzOiB7XG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgdHlwZTogW1N0cmluZ10sXG4gICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgdGV4dDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICB0aHVtYm5haWw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgdGl0bGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgdHlwZToge1xuICAgICAgdHlwZTogU3RyaW5nLCBcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgdXBkYXRlZDoge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgdXJsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgIHR5cGU6IEJ1ZmZlcixcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjb2xsZWN0aW9uOiAnY29udGVudCcsXG4gIH1cbik7XG4gIFxuZXhwb3J0IGNvbnN0IENvbnRlbnQgPSBtb25nb29zZS5tb2RlbCgnQ29udGVudCcsIENvbnRlbnRTY2hlbWEpO1xuXG5leHBvcnQgY29uc3QgQ29udGVudFRDID0gY29tcG9zZVdpdGhNb25nb29zZShDb250ZW50KTtcblxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "content.js"
      ],
      "names": [
        "ContentSchema",
        "Schema",
        "connection",
        "type",
        "Buffer",
        "index",
        "created",
        "Date",
        "embed_content",
        "String",
        "embed_format",
        "embed_thumbnail",
        "embeded_format",
        "identifier",
        "mimetype",
        "owner",
        "provider_name",
        "remote_id",
        "tagMasks",
        "source",
        "text",
        "thumbnail",
        "title",
        "updated",
        "url",
        "user_id",
        "collection",
        "Content",
        "model",
        "ContentTC"
      ],
      "mappings": ";;;;;;;AAEA;;;;AACA;;;;;;AAEO,MAAMA,wCAAgB,IAAI,mBAASC,MAAb,CAC3B;AACEC,cAAY;AACVC,UAAMC,MADI;AAEVC,WAAO;AAFG,GADd;AAKEC,WAAS;AACPH,UAAMI,IADC;AAEPF,WAAO;AAFA,GALX;AASEG,iBAAe;AACbL,UAAMM,MADO;AAEbJ,WAAO;AAFM,GATjB;AAaEK,gBAAc;AACZP,UAAMM,MADM;AAEZJ,WAAO;AAFK,GAbhB;AAiBEM,mBAAiB;AACfR,UAAMM,MADS;AAEfJ,WAAO;AAFQ,GAjBnB;AAqBEO,kBAAgB;AACdT,UAAMM,MADQ;AAEdJ,WAAO;AAFO,GArBlB;AAyBEQ,cAAY;AACVV,UAAMM,MADI;AAEVJ,WAAO;AAFG,GAzBd;AA6BES,YAAU;AACRX,UAAMM,MADE;AAERJ,WAAO;AAFC,GA7BZ;AAiCEU,SAAO;AACLZ,UAAMM,MADD;AAELJ,WAAO;AAFF,GAjCT;AAqCEW,iBAAe;AACbb,UAAMM,MADO;AAEbJ,WAAO;AAFM,GArCjB;AAyCEY,aAAW;AACTd,UAAMM,MADG;AAETJ,WAAO;AAFE,GAzCb;AA6CEa,YAAU;AACRC,YAAQ;AACNhB,YAAM,CAACM,MAAD,CADA;AAENJ,aAAO;AAFD;AADA,GA7CZ;AAmDEe,QAAM;AACJjB,UAAMM,MADF;AAEJJ,WAAO;AAFH,GAnDR;AAuDEgB,aAAW;AACTlB,UAAMM,MADG;AAETJ,WAAO;AAFE,GAvDb;AA2DEiB,SAAO;AACLnB,UAAMM,MADD;AAELJ,WAAO;AAFF,GA3DT;AA+DEF,QAAM;AACJA,UAAMM,MADF;AAEJJ,WAAO;AAFH,GA/DR;AAmEEkB,WAAS;AACPpB,UAAMI,IADC;AAEPF,WAAO;AAFA,GAnEX;AAuEEmB,OAAK;AACHrB,UAAMM,MADH;AAEHJ,WAAO;AAFJ,GAvEP;AA2EEoB,WAAS;AACPtB,UAAMC,MADC;AAEPC,WAAO;AAFA;AA3EX,CAD2B,EAiF3B;AACEqB,cAAY;AADd,CAjF2B,CAAtB;;AAsFA,MAAMC,4BAAU,mBAASC,KAAT,CAAe,SAAf,EAA0B5B,aAA1B,CAAhB;;AAEA,MAAM6B,gCAAY,oBAAoBF,OAApB,CAAlB",
      "file": "content.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\n\nexport const ContentSchema = new mongoose.Schema(\n  {\n    connection: {\n      type: Buffer,\n      index: false\n    },\n    created: {\n      type: Date,\n      index: false\n    },\n    embed_content: {\n      type: String,\n      index: false\n    },\n    embed_format: {\n      type: String,\n      index: false\n    },\n    embed_thumbnail: {\n      type: String,\n      index: false\n    },\n    embeded_format: {\n      type: String,\n      index: false\n    },\n    identifier: {\n      type: String,\n      index: false\n    },\n    mimetype: {\n      type: String,\n      index: false\n    },\n    owner: {\n      type: String,\n      index: false\n    },\n    provider_name: {\n      type: String,\n      index: false\n    },\n    remote_id: {\n      type: String,\n      index: false\n    },\n    tagMasks: {\n      source: {\n        type: [String],\n        index: false\n      }\n    },\n    text: {\n      type: String,\n      index: false\n    },\n    thumbnail: {\n      type: String,\n      index: false\n    },\n    title: {\n      type: String,\n      index: false\n    },\n    type: {\n      type: String, \n      index: false\n    },\n    updated: {\n      type: Date,\n      index: false\n    },\n    url: {\n      type: String,\n      index: false\n    },\n    user_id: {\n      type: Buffer,\n      index: false\n    },\n  },\n  {\n    collection: 'content',\n  }\n);\n  \nexport const Content = mongoose.model('Content', ContentSchema);\n\nexport const ContentTC = composeWithMongoose(Content);\n\n"
      ]
    },
    "mtime": 1521691076948
  },
  "{\"filename\":\"/app/schema/types/uuid.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/types\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "graphql",
            "imported": [
              "GraphQLScalarType",
              "GraphQLError",
              "Kind"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "GraphQLScalarType",
                "local": "GraphQLScalarType"
              },
              {
                "kind": "named",
                "imported": "GraphQLError",
                "local": "GraphQLError"
              },
              {
                "kind": "named",
                "imported": "Kind",
                "local": "Kind"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/schema/types/uuid.js",
      "filenameRelative": "/app/schema/types/uuid.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "uuid.js",
      "sourceFileName": "uuid.js",
      "sourceRoot": "/app/schema/types",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/types",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "uuid"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _graphql = require('graphql');\n\nfunction coerceBuffer(value) {\n  if (!(value instanceof Buffer)) {\n    throw new TypeError('Field error: value is not an instance of Buffer');\n  }\n\n  return value;\n} /*  strict */\n\nexports.default = new _graphql.GraphQLScalarType({\n  name: 'UUID',\n  serialize: coerceBuffer,\n  parseValue: coerceBuffer,\n  parseLiteral(ast) {\n    //     if (ast.kind !== Kind.STRING) {\n    //       throw new GraphQLError(\n    //         `Query error: Can only parse strings to buffers but got a: ${ast.kind}`,\n    //         [ast]\n    //       );\n    //     }\n\n    //     const result = Buffer.from(ast.value, 'hex');\n\n    //     if (ast.value !== result.toString()) {\n    //       throw new GraphQLError('Query error: Invalid buffer encoding', [ast]);\n    //     }\n\n    return ast.value;\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV1aWQuanMiXSwibmFtZXMiOlsiY29lcmNlQnVmZmVyIiwidmFsdWUiLCJCdWZmZXIiLCJUeXBlRXJyb3IiLCJuYW1lIiwic2VyaWFsaXplIiwicGFyc2VWYWx1ZSIsInBhcnNlTGl0ZXJhbCIsImFzdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUE7O0FBRUEsU0FBU0EsWUFBVCxDQUFzQkMsS0FBdEIsRUFBNkI7QUFDM0IsTUFBSSxFQUFFQSxpQkFBaUJDLE1BQW5CLENBQUosRUFBZ0M7QUFDOUIsVUFBTSxJQUFJQyxTQUFKLENBQWMsaURBQWQsQ0FBTjtBQUNEOztBQUVELFNBQU9GLEtBQVA7QUFDRCxDLENBVkQ7O2tCQVllLCtCQUFzQjtBQUNuQ0csUUFBTSxNQUQ2QjtBQUVuQ0MsYUFBV0wsWUFGd0I7QUFHbkNNLGNBQVlOLFlBSHVCO0FBSW5DTyxlQUFhQyxHQUFiLEVBQWtCO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUksV0FBT0EsSUFBSVAsS0FBWDtBQUNEO0FBbkJrQyxDQUF0QixDIiwiZmlsZSI6InV1aWQuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvdHlwZXMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyBzdHJpY3QgKi9cblxuaW1wb3J0IHsgR3JhcGhRTFNjYWxhclR5cGUsIEdyYXBoUUxFcnJvciwgS2luZCB9IGZyb20gJ2dyYXBocWwnO1xuXG5mdW5jdGlvbiBjb2VyY2VCdWZmZXIodmFsdWUpIHtcbiAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmllbGQgZXJyb3I6IHZhbHVlIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBCdWZmZXInKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgR3JhcGhRTFNjYWxhclR5cGUoe1xuICBuYW1lOiAnVVVJRCcsXG4gIHNlcmlhbGl6ZTogY29lcmNlQnVmZmVyLFxuICBwYXJzZVZhbHVlOiBjb2VyY2VCdWZmZXIsXG4gIHBhcnNlTGl0ZXJhbChhc3QpIHtcbi8vICAgICBpZiAoYXN0LmtpbmQgIT09IEtpbmQuU1RSSU5HKSB7XG4vLyAgICAgICB0aHJvdyBuZXcgR3JhcGhRTEVycm9yKFxuLy8gICAgICAgICBgUXVlcnkgZXJyb3I6IENhbiBvbmx5IHBhcnNlIHN0cmluZ3MgdG8gYnVmZmVycyBidXQgZ290IGE6ICR7YXN0LmtpbmR9YCxcbi8vICAgICAgICAgW2FzdF1cbi8vICAgICAgICk7XG4vLyAgICAgfVxuXG4vLyAgICAgY29uc3QgcmVzdWx0ID0gQnVmZmVyLmZyb20oYXN0LnZhbHVlLCAnaGV4Jyk7XG5cbi8vICAgICBpZiAoYXN0LnZhbHVlICE9PSByZXN1bHQudG9TdHJpbmcoKSkge1xuLy8gICAgICAgdGhyb3cgbmV3IEdyYXBoUUxFcnJvcignUXVlcnkgZXJyb3I6IEludmFsaWQgYnVmZmVyIGVuY29kaW5nJywgW2FzdF0pO1xuLy8gICAgIH1cblxuICAgIHJldHVybiBhc3QudmFsdWU7XG4gIH0sXG59KTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "uuid.js"
      ],
      "names": [
        "coerceBuffer",
        "value",
        "Buffer",
        "TypeError",
        "name",
        "serialize",
        "parseValue",
        "parseLiteral",
        "ast"
      ],
      "mappings": ";;;;;;AAEA;;AAEA,SAASA,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,MAAI,EAAEA,iBAAiBC,MAAnB,CAAJ,EAAgC;AAC9B,UAAM,IAAIC,SAAJ,CAAc,iDAAd,CAAN;AACD;;AAED,SAAOF,KAAP;AACD,C,CAVD;;kBAYe,+BAAsB;AACnCG,QAAM,MAD6B;AAEnCC,aAAWL,YAFwB;AAGnCM,cAAYN,YAHuB;AAInCO,eAAaC,GAAb,EAAkB;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEI,WAAOA,IAAIP,KAAX;AACD;AAnBkC,CAAtB,C",
      "file": "uuid.js",
      "sourceRoot": "/app/schema/types",
      "sourcesContent": [
        "/* @flow strict */\n\nimport { GraphQLScalarType, GraphQLError, Kind } from 'graphql';\n\nfunction coerceBuffer(value) {\n  if (!(value instanceof Buffer)) {\n    throw new TypeError('Field error: value is not an instance of Buffer');\n  }\n\n  return value\n}\n\nexport default new GraphQLScalarType({\n  name: 'UUID',\n  serialize: coerceBuffer,\n  parseValue: coerceBuffer,\n  parseLiteral(ast) {\n//     if (ast.kind !== Kind.STRING) {\n//       throw new GraphQLError(\n//         `Query error: Can only parse strings to buffers but got a: ${ast.kind}`,\n//         [ast]\n//       );\n//     }\n\n//     const result = Buffer.from(ast.value, 'hex');\n\n//     if (ast.value !== result.toString()) {\n//       throw new GraphQLError('Query error: Invalid buffer encoding', [ast]);\n//     }\n\n    return ast.value;\n  },\n});"
      ]
    },
    "mtime": 1521582338016
  },
  "{\"filename\":\"/app/lib/types/uuid.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib/types\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bson",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "bson"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "uuid/v4",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "nodeUUID"
              }
            ]
          },
          {
            "source": "uuid-parse",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuidParse"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "value"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "value",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/types/uuid.js",
      "filenameRelative": "/app/lib/types/uuid.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "uuid.js",
      "sourceFileName": "uuid.js",
      "sourceRoot": "/app/lib/types",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib/types",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "uuid"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function(value) {\n  if (typeof value === 'string') {\n    var uuidBuffer = new _mongoose2.default.Types.Buffer(_uuidParse2.default.parse(value));\n\n    uuidBuffer.subtype(_bson2.default.Binary.SUBTYPE_UUID);\n\n    return uuidBuffer.toObject();\n  } else if (value == null) {\n    return (0, _v2.default)().replace(/-/g, '');\n  } else {\n    return value.toString('hex');\n  }\n};\n\nvar _bson = require('bson');\n\nvar _bson2 = _interopRequireDefault(_bson);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _uuidParse = require('uuid-parse');\n\nvar _uuidParse2 = _interopRequireDefault(_uuidParse);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV1aWQuanMiXSwibmFtZXMiOlsidmFsdWUiLCJ1dWlkQnVmZmVyIiwiVHlwZXMiLCJCdWZmZXIiLCJwYXJzZSIsInN1YnR5cGUiLCJCaW5hcnkiLCJTVUJUWVBFX1VVSUQiLCJ0b09iamVjdCIsInJlcGxhY2UiLCJ0b1N0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O2tCQUtlLFVBQVNBLEtBQVQsRUFBZ0I7QUFDN0IsTUFBSSxPQUFPQSxLQUFQLEtBQWlCLFFBQXJCLEVBQStCO0FBQzdCLFFBQUlDLGFBQWEsSUFBSSxtQkFBU0MsS0FBVCxDQUFlQyxNQUFuQixDQUEwQixvQkFBVUMsS0FBVixDQUFnQkosS0FBaEIsQ0FBMUIsQ0FBakI7O0FBRUFDLGVBQVdJLE9BQVgsQ0FBbUIsZUFBS0MsTUFBTCxDQUFZQyxZQUEvQjs7QUFFQSxXQUFPTixXQUFXTyxRQUFYLEVBQVA7QUFDRCxHQU5ELE1BT0ssSUFBSVIsU0FBUyxJQUFiLEVBQW1CO0FBQ3RCLFdBQU8sbUJBQVdTLE9BQVgsQ0FBbUIsSUFBbkIsRUFBeUIsRUFBekIsQ0FBUDtBQUNELEdBRkksTUFHQTtBQUNILFdBQU9ULE1BQU1VLFFBQU4sQ0FBZSxLQUFmLENBQVA7QUFDRDtBQUNGLEM7O0FBbkJEOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBIiwiZmlsZSI6InV1aWQuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIvdHlwZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYnNvbiBmcm9tICdic29uJztcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgbm9kZVVVSUQgZnJvbSAndXVpZC92NCc7XG5pbXBvcnQgdXVpZFBhcnNlIGZyb20gJ3V1aWQtcGFyc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHZhciB1dWlkQnVmZmVyID0gbmV3IG1vbmdvb3NlLlR5cGVzLkJ1ZmZlcih1dWlkUGFyc2UucGFyc2UodmFsdWUpKTtcbiAgICBcbiAgICB1dWlkQnVmZmVyLnN1YnR5cGUoYnNvbi5CaW5hcnkuU1VCVFlQRV9VVUlEKTtcbiAgICBcbiAgICByZXR1cm4gdXVpZEJ1ZmZlci50b09iamVjdCgpO1xuICB9XG4gIGVsc2UgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gbm9kZVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKTtcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoJ2hleCcpO1xuICB9XG59Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "uuid.js"
      ],
      "names": [
        "value",
        "uuidBuffer",
        "Types",
        "Buffer",
        "parse",
        "subtype",
        "Binary",
        "SUBTYPE_UUID",
        "toObject",
        "replace",
        "toString"
      ],
      "mappings": ";;;;;;kBAKe,UAASA,KAAT,EAAgB;AAC7B,MAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,QAAIC,aAAa,IAAI,mBAASC,KAAT,CAAeC,MAAnB,CAA0B,oBAAUC,KAAV,CAAgBJ,KAAhB,CAA1B,CAAjB;;AAEAC,eAAWI,OAAX,CAAmB,eAAKC,MAAL,CAAYC,YAA/B;;AAEA,WAAON,WAAWO,QAAX,EAAP;AACD,GAND,MAOK,IAAIR,SAAS,IAAb,EAAmB;AACtB,WAAO,mBAAWS,OAAX,CAAmB,IAAnB,EAAyB,EAAzB,CAAP;AACD,GAFI,MAGA;AACH,WAAOT,MAAMU,QAAN,CAAe,KAAf,CAAP;AACD;AACF,C;;AAnBD;;;;AACA;;;;AACA;;;;AACA",
      "file": "uuid.js",
      "sourceRoot": "/app/lib/types",
      "sourcesContent": [
        "import bson from 'bson';\nimport mongoose from 'mongoose';\nimport nodeUUID from 'uuid/v4';\nimport uuidParse from 'uuid-parse';\n\nexport default function(value) {\n  if (typeof value === 'string') {\n    var uuidBuffer = new mongoose.Types.Buffer(uuidParse.parse(value));\n    \n    uuidBuffer.subtype(bson.Binary.SUBTYPE_UUID);\n    \n    return uuidBuffer.toObject();\n  }\n  else if (value == null) {\n    return nodeUUID().replace(/-/g, '');\n  }\n  else {\n    return value.toString('hex');\n  }\n}"
      ]
    },
    "mtime": 1521829530108
  },
  "{\"filename\":\"/app/middleware/restrict-to-user.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/middleware\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "http-errors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "httpErrors"
              }
            ]
          },
          {
            "source": "../lib/types/uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "allowOnlyForLocalhost",
            "Resolver",
            "resolvers"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "allowOnlyForLocalhost",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "Resolver",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "resolvers",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/middleware/restrict-to-user.js",
      "filenameRelative": "/app/middleware/restrict-to-user.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "restrict-to-user.js",
      "sourceFileName": "restrict-to-user.js",
      "sourceRoot": "/app/middleware",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/middleware",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "restrict-to-user"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = allowOnlyForLocalhost;\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _httpErrors = require('http-errors');\n\nvar _httpErrors2 = _interopRequireDefault(_httpErrors);\n\nvar _uuid = require('../lib/types/uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction allowOnlyForLocalhost(Resolver, resolvers) {\n  const secureResolvers = {};\n\n  Object.keys(resolvers).forEach(k => {\n    secureResolvers[k] = resolvers[k].wrapResolve(next => rp => {\n      if (!rp.context.req.user) {\n        throw new _httpErrors2.default(404, 'User is not authenticated');\n      } else {\n        if (!rp.args) {\n          rp.args = {};\n        }\n\n        if (!rp.args.filter) {\n          rp.args.filter = {};\n        }\n\n        rp.args.filter.user_id_string = rp.context.req.user._id.toString('hex');\n\n        return next(rp);\n      }\n    });\n  });\n\n  return secureResolvers;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RyaWN0LXRvLXVzZXIuanMiXSwibmFtZXMiOlsiYWxsb3dPbmx5Rm9yTG9jYWxob3N0IiwiUmVzb2x2ZXIiLCJyZXNvbHZlcnMiLCJzZWN1cmVSZXNvbHZlcnMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImsiLCJ3cmFwUmVzb2x2ZSIsIm5leHQiLCJycCIsImNvbnRleHQiLCJyZXEiLCJ1c2VyIiwiYXJncyIsImZpbHRlciIsInVzZXJfaWRfc3RyaW5nIiwiX2lkIiwidG9TdHJpbmciXSwibWFwcGluZ3MiOiI7Ozs7O2tCQUt3QkEscUI7O0FBTHhCOzs7O0FBQ0E7Ozs7QUFFQTs7Ozs7O0FBRWUsU0FBU0EscUJBQVQsQ0FBK0JDLFFBQS9CLEVBQXlDQyxTQUF6QyxFQUFrRjtBQUMvRixRQUFNQyxrQkFBa0IsRUFBeEI7O0FBRUFDLFNBQU9DLElBQVAsQ0FBWUgsU0FBWixFQUF1QkksT0FBdkIsQ0FBK0JDLEtBQUs7QUFDbENKLG9CQUFnQkksQ0FBaEIsSUFBcUJMLFVBQVVLLENBQVYsRUFBYUMsV0FBYixDQUF5QkMsUUFBUUMsTUFBTTtBQUMxRCxVQUFJLENBQUNBLEdBQUdDLE9BQUgsQ0FBV0MsR0FBWCxDQUFlQyxJQUFwQixFQUEwQjtBQUN4QixjQUFNLHlCQUFlLEdBQWYsRUFBb0IsMkJBQXBCLENBQU47QUFDRCxPQUZELE1BR0s7QUFDSCxZQUFJLENBQUNILEdBQUdJLElBQVIsRUFBYztBQUNaSixhQUFHSSxJQUFILEdBQVUsRUFBVjtBQUNEOztBQUVELFlBQUksQ0FBQ0osR0FBR0ksSUFBSCxDQUFRQyxNQUFiLEVBQXFCO0FBQ25CTCxhQUFHSSxJQUFILENBQVFDLE1BQVIsR0FBaUIsRUFBakI7QUFDRDs7QUFFREwsV0FBR0ksSUFBSCxDQUFRQyxNQUFSLENBQWVDLGNBQWYsR0FBZ0NOLEdBQUdDLE9BQUgsQ0FBV0MsR0FBWCxDQUFlQyxJQUFmLENBQW9CSSxHQUFwQixDQUF3QkMsUUFBeEIsQ0FBaUMsS0FBakMsQ0FBaEM7O0FBRUEsZUFBT1QsS0FBS0MsRUFBTCxDQUFQO0FBQ0Q7QUFDRixLQWpCb0IsQ0FBckI7QUFrQkQsR0FuQkQ7O0FBcUJBLFNBQU9QLGVBQVA7QUFDRCIsImZpbGUiOiJyZXN0cmljdC10by11c2VyLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvbWlkZGxld2FyZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgaHR0cEVycm9ycyBmcm9tICdodHRwLWVycm9ycyc7XG5cbmltcG9ydCB1dWlkIGZyb20gJy4uL2xpYi90eXBlcy91dWlkJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWxsb3dPbmx5Rm9yTG9jYWxob3N0KFJlc29sdmVyLCByZXNvbHZlcnM6IHsgW25hbWU6IHN0cmluZ106IFJlc29sdmVyIH0pIHtcbiAgY29uc3Qgc2VjdXJlUmVzb2x2ZXJzID0ge307XG4gIFxuICBPYmplY3Qua2V5cyhyZXNvbHZlcnMpLmZvckVhY2goayA9PiB7XG4gICAgc2VjdXJlUmVzb2x2ZXJzW2tdID0gcmVzb2x2ZXJzW2tdLndyYXBSZXNvbHZlKG5leHQgPT4gcnAgPT4ge1xuICAgICAgaWYgKCFycC5jb250ZXh0LnJlcS51c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBodHRwRXJyb3JzKDQwNCwgJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAoIXJwLmFyZ3MpIHtcbiAgICAgICAgICBycC5hcmdzID0ge307XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJwLmFyZ3MuZmlsdGVyKSB7XG4gICAgICAgICAgcnAuYXJncy5maWx0ZXIgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJwLmFyZ3MuZmlsdGVyLnVzZXJfaWRfc3RyaW5nID0gcnAuY29udGV4dC5yZXEudXNlci5faWQudG9TdHJpbmcoJ2hleCcpO1xuXG4gICAgICAgIHJldHVybiBuZXh0KHJwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIFxuICByZXR1cm4gc2VjdXJlUmVzb2x2ZXJzO1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "restrict-to-user.js"
      ],
      "names": [
        "allowOnlyForLocalhost",
        "Resolver",
        "resolvers",
        "secureResolvers",
        "Object",
        "keys",
        "forEach",
        "k",
        "wrapResolve",
        "next",
        "rp",
        "context",
        "req",
        "user",
        "args",
        "filter",
        "user_id_string",
        "_id",
        "toString"
      ],
      "mappings": ";;;;;kBAKwBA,qB;;AALxB;;;;AACA;;;;AAEA;;;;;;AAEe,SAASA,qBAAT,CAA+BC,QAA/B,EAAyCC,SAAzC,EAAkF;AAC/F,QAAMC,kBAAkB,EAAxB;;AAEAC,SAAOC,IAAP,CAAYH,SAAZ,EAAuBI,OAAvB,CAA+BC,KAAK;AAClCJ,oBAAgBI,CAAhB,IAAqBL,UAAUK,CAAV,EAAaC,WAAb,CAAyBC,QAAQC,MAAM;AAC1D,UAAI,CAACA,GAAGC,OAAH,CAAWC,GAAX,CAAeC,IAApB,EAA0B;AACxB,cAAM,yBAAe,GAAf,EAAoB,2BAApB,CAAN;AACD,OAFD,MAGK;AACH,YAAI,CAACH,GAAGI,IAAR,EAAc;AACZJ,aAAGI,IAAH,GAAU,EAAV;AACD;;AAED,YAAI,CAACJ,GAAGI,IAAH,CAAQC,MAAb,EAAqB;AACnBL,aAAGI,IAAH,CAAQC,MAAR,GAAiB,EAAjB;AACD;;AAEDL,WAAGI,IAAH,CAAQC,MAAR,CAAeC,cAAf,GAAgCN,GAAGC,OAAH,CAAWC,GAAX,CAAeC,IAAf,CAAoBI,GAApB,CAAwBC,QAAxB,CAAiC,KAAjC,CAAhC;;AAEA,eAAOT,KAAKC,EAAL,CAAP;AACD;AACF,KAjBoB,CAArB;AAkBD,GAnBD;;AAqBA,SAAOP,eAAP;AACD",
      "file": "restrict-to-user.js",
      "sourceRoot": "/app/middleware",
      "sourcesContent": [
        "import _ from 'lodash';\nimport httpErrors from 'http-errors';\n\nimport uuid from '../lib/types/uuid';\n\nexport default function allowOnlyForLocalhost(Resolver, resolvers: { [name: string]: Resolver }) {\n  const secureResolvers = {};\n  \n  Object.keys(resolvers).forEach(k => {\n    secureResolvers[k] = resolvers[k].wrapResolve(next => rp => {\n      if (!rp.context.req.user) {\n        throw new httpErrors(404, 'User is not authenticated');\n      }\n      else {\n        if (!rp.args) {\n          rp.args = {};\n        }\n\n        if (!rp.args.filter) {\n          rp.args.filter = {};\n        }\n\n        rp.args.filter.user_id_string = rp.context.req.user._id.toString('hex');\n\n        return next(rp);\n      }\n    });\n  });\n  \n  return secureResolvers;\n}\n"
      ]
    },
    "mtime": 1521764280824
  },
  "{\"filename\":\"/app/schema/crud-schema.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "extends",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "graphql-compose",
            "imported": [
              "SchemaComposer"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SchemaComposer",
                "local": "SchemaComposer"
              }
            ]
          },
          {
            "source": "uuid/v4",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          },
          {
            "source": "../middleware/restrict-to-user",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "restrictToUser"
              }
            ]
          },
          {
            "source": "./models/connections",
            "imported": [
              "ConnectionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ConnectionTC",
                "local": "ConnectionTC"
              }
            ]
          },
          {
            "source": "./models/sessions",
            "imported": [
              "SessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SessionTC",
                "local": "SessionTC"
              }
            ]
          },
          {
            "source": "./models/users",
            "imported": [
              "UserTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UserTC",
                "local": "UserTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/schema/crud-schema.js",
      "filenameRelative": "/app/schema/crud-schema.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "crud-schema.js",
      "sourceFileName": "crud-schema.js",
      "sourceRoot": "/app/schema",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "crud-schema"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n// import { ContactTC } from './models/contacts';\n// import { ContentTC } from './models/content';\n// import { EventTC } from './models/events';\n// import { LocationTC } from './models/locations';\n// import { ProviderTC } from './models/providers';\n// import { SearchTC } from './models/searches';\n\n// import { TagTC } from './models/tags';\n// import { ThingTC } from './models/things';\n\nvar _graphqlCompose = require('graphql-compose');\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _restrictToUser = require('../middleware/restrict-to-user');\n\nvar _restrictToUser2 = _interopRequireDefault(_restrictToUser);\n\nvar _connections = require('./models/connections');\n\nvar _sessions = require('./models/sessions');\n\nvar _users = require('./models/users');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst GQC = new _graphqlCompose.SchemaComposer();\n\nconst Resolver = GQC.Resolver;\n\n// create GraphQL Schema with all available resolvers\n\nGQC.rootQuery().addFields(_extends({\n  //Connections\n  //   connectionOne: ConnectionTC.getResolver('findOne'),\n  //   connectionMany: ConnectionTC.getResolver('findMany'),\n  //   connectionTotal: ConnectionTC.getResolver('count'),\n  //   connectionConnection: ConnectionTC.getResolver('connection'),\n  //   connectionPagination: ConnectionTC.getResolver('pagination'),\n\n  //   //Contacts\n  //   contactOne: ContactTC.getResolver('findOne'),\n  //   contactMany: ContactTC.getResolver('findMany'),\n  //   contactTotal: ContactTC.getResolver('count'),\n  //   contactConnection: ContactTC.getResolver('connection'),\n  //   contactPagination: ContactTC.getResolver('pagination'),\n\n  //   //Content\n  //   contentOne: ContentTC.getResolver('findOne'),\n  //   contentMany: ContentTC.getResolver('findMany'),\n  //   contentTotal: ContentTC.getResolver('count'),\n  //   contentConnection: ContentTC.getResolver('connection'),\n  //   contentPagination: ContentTC.getResolver('pagination'),\n\n  //   //Events\n  //   eventOne: EventTC.getResolver('findOne'),\n  //   eventMany: EventTC.getResolver('findMany'),\n  //   eventTotal: EventTC.getResolver('count'),\n  //   eventConnection: EventTC.getResolver('connection'),\n  //   eventPagination: EventTC.getResolver('pagination'),\n\n  //   //Locations\n  //   locationOne: LocationTC.getResolver('findOne'),\n  //   locationMany: LocationTC.getResolver('findMany'),\n  //   locationTotal: LocationTC.getResolver('count'),\n  //   locationConnection: LocationTC.getResolver('connection'),\n  //   locationPagination: LocationTC.getResolver('pagination'),\n\n  //   //Providers\n  //   providerOne: ProviderTC.getResolver('findOne'),\n  //   providerMany: ProviderTC.getResolver('findMany'),\n  //   providerTotal: ProviderTC.getResolver('count'),\n  //   providerConnection: ProviderTC.getResolver('connection'),\n  //   providerPagination: ProviderTC.getResolver('pagination'),\n\n  //   //Searches\n  //   searchOne: SearchTC.getResolver('findOne'),\n  //   searchMany: SearchTC.getResolver('findMany'),\n  //   searchTotal: SearchTC.getResolver('count'),\n  //   searchConnection: SearchTC.getResolver('connection'),\n  //   searchPagination: SearchTC.getResolver('pagination'),\n\n  //Session\n  sessionOne: _sessions.SessionTC.getResolver('findOne')\n}, (0, _restrictToUser2.default)(Resolver, {\n  sessionMany: _sessions.SessionTC.getResolver('findMany')\n}), {\n  //   sessionTotal: SessionTC.getResolver('count'),\n  //   sessionConnection: SessionTC.getResolver('connection'),\n  //   sessionPagination: SessionTC.getResolver('pagination'),\n\n  //   //Tags\n  //   tagOne: TagTC.getResolver('findOne'),\n  //   tagMany: TagTC.getResolver('findMany'),\n  //   tagTotal: TagTC.getResolver('count'),\n  //   tagConnection: TagTC.getResolver('connection'),\n  //   tagPagination: TagTC.getResolver('pagination'),\n  //   //Things\n  //   ThingOne: ThingTC.getResolver('findOne'),\n  //   ThingMany: ThingTC.getResolver('findMany'),\n  //   ThingTotal: ThingTC.getResolver('count'),\n  //   ThingConnection: ThingTC.getResolver('connection'),\n  //   ThingPagination: ThingTC.getResolver('pagination'),\n\n  //Users\n  userOne: _users.UserTC.getResolver('findOne'),\n  userMany: _users.UserTC.getResolver('findMany'), // .debug(), // debug info to console for this resolver\n  userTotal: _users.UserTC.getResolver('count'),\n  userConnection: _users.UserTC.getResolver('connection'),\n  userPagination: _users.UserTC.getResolver('pagination')\n\n}));\n// For debug purposes you may display resolver internals in the following manner:\n// console.log(UserTC.getResolver('findMany').toString());\n\nGQC.rootMutation().addFields(_extends({}, (0, _restrictToUser2.default)(Resolver, {\n  sessionCreate: _sessions.SessionTC.getResolver('createOne').wrapResolve(next => rp => {\n    rp.args.record.id = (0, _v2.default)().replace(/-/g, '');\n    rp.args.record.user_id_string = rp.context.req.user._id.toString('hex');\n\n    return next(rp);\n  })\n}), {\n\n  initializeConnection: _connections.ConnectionTC.getResolver('initializeConnection')\n\n  // Users\n  // userCreate: UserTC.getResolver('createOne'),\n  // userUpdateOne: UserTC.getResolver('updateOne'),\n  // userUpdateMany: UserTC.getResolver('updateMany'),\n  // userRemoveOne: UserTC.getResolver('removeOne'),\n  // userRemoveMany: UserTC.getResolver('removeMany'),\n}));\n\nconst graphqlSchema = GQC.buildSchema();\n\nexports.default = graphqlSchema;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNydWQtc2NoZW1hLmpzIl0sIm5hbWVzIjpbIkdRQyIsIlJlc29sdmVyIiwicm9vdFF1ZXJ5IiwiYWRkRmllbGRzIiwic2Vzc2lvbk9uZSIsImdldFJlc29sdmVyIiwic2Vzc2lvbk1hbnkiLCJ1c2VyT25lIiwidXNlck1hbnkiLCJ1c2VyVG90YWwiLCJ1c2VyQ29ubmVjdGlvbiIsInVzZXJQYWdpbmF0aW9uIiwicm9vdE11dGF0aW9uIiwic2Vzc2lvbkNyZWF0ZSIsIndyYXBSZXNvbHZlIiwibmV4dCIsInJwIiwiYXJncyIsInJlY29yZCIsImlkIiwicmVwbGFjZSIsInVzZXJfaWRfc3RyaW5nIiwiY29udGV4dCIsInJlcSIsInVzZXIiLCJfaWQiLCJ0b1N0cmluZyIsImluaXRpYWxpemVDb25uZWN0aW9uIiwiZ3JhcGhxbFNjaGVtYSIsImJ1aWxkU2NoZW1hIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBYkE7O0FBQ0E7Ozs7QUFFQTs7OztBQUNBOztBQU9BOztBQUlBOzs7O0FBRUEsTUFBTUEsTUFBTSxvQ0FBWjs7TUFFUUMsUSxHQUFhRCxHLENBQWJDLFE7O0FBRVI7O0FBQ0FELElBQUlFLFNBQUosR0FBZ0JDLFNBQWhCO0FBQ0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVFO0FBQ0FDLGNBQVksb0JBQVVDLFdBQVYsQ0FBc0IsU0FBdEI7QUFuRGQsR0FvREssOEJBQWVKLFFBQWYsRUFBeUI7QUFDMUJLLGVBQWEsb0JBQVVELFdBQVYsQ0FBc0IsVUFBdEI7QUFEYSxDQUF6QixDQXBETDtBQXVEQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVFO0FBQ0FFLFdBQVMsY0FBT0YsV0FBUCxDQUFtQixTQUFuQixDQXpFWDtBQTBFRUcsWUFBVSxjQUFPSCxXQUFQLENBQW1CLFVBQW5CLENBMUVaLEVBMEU0QztBQUMxQ0ksYUFBVyxjQUFPSixXQUFQLENBQW1CLE9BQW5CLENBM0ViO0FBNEVFSyxrQkFBZ0IsY0FBT0wsV0FBUCxDQUFtQixZQUFuQixDQTVFbEI7QUE2RUVNLGtCQUFnQixjQUFPTixXQUFQLENBQW1CLFlBQW5COztBQTdFbEI7QUFnRkE7QUFDQTs7QUFFQUwsSUFBSVksWUFBSixHQUFtQlQsU0FBbkIsY0F3RUssOEJBQWVGLFFBQWYsRUFBeUI7QUFDMUJZLGlCQUFlLG9CQUFVUixXQUFWLENBQXNCLFdBQXRCLEVBQW1DUyxXQUFuQyxDQUErQ0MsUUFBUUMsTUFBTTtBQUMxRUEsT0FBR0MsSUFBSCxDQUFRQyxNQUFSLENBQWVDLEVBQWYsR0FBb0IsbUJBQU9DLE9BQVAsQ0FBZSxJQUFmLEVBQXFCLEVBQXJCLENBQXBCO0FBQ0FKLE9BQUdDLElBQUgsQ0FBUUMsTUFBUixDQUFlRyxjQUFmLEdBQWdDTCxHQUFHTSxPQUFILENBQVdDLEdBQVgsQ0FBZUMsSUFBZixDQUFvQkMsR0FBcEIsQ0FBd0JDLFFBQXhCLENBQWlDLEtBQWpDLENBQWhDOztBQUVBLFdBQU9YLEtBQUtDLEVBQUwsQ0FBUDtBQUNELEdBTGM7QUFEVyxDQUF6QixDQXhFTDs7QUFpRkVXLHdCQUFzQiwwQkFBYXRCLFdBQWIsQ0FBeUIsc0JBQXpCOztBQUV0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF4RkY7O0FBMkZBLE1BQU11QixnQkFBZ0I1QixJQUFJNkIsV0FBSixFQUF0Qjs7a0JBRWVELGEiLCJmaWxlIjoiY3J1ZC1zY2hlbWEuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG5pbXBvcnQgeyBTY2hlbWFDb21wb3NlciB9IGZyb20gJ2dyYXBocWwtY29tcG9zZSc7XG5pbXBvcnQgdXVpZCBmcm9tICd1dWlkL3Y0JztcblxuaW1wb3J0IHJlc3RyaWN0VG9Vc2VyIGZyb20gJy4uL21pZGRsZXdhcmUvcmVzdHJpY3QtdG8tdXNlcic7XG5pbXBvcnQgeyBDb25uZWN0aW9uVEMgfSBmcm9tICcuL21vZGVscy9jb25uZWN0aW9ucyc7XG4vLyBpbXBvcnQgeyBDb250YWN0VEMgfSBmcm9tICcuL21vZGVscy9jb250YWN0cyc7XG4vLyBpbXBvcnQgeyBDb250ZW50VEMgfSBmcm9tICcuL21vZGVscy9jb250ZW50Jztcbi8vIGltcG9ydCB7IEV2ZW50VEMgfSBmcm9tICcuL21vZGVscy9ldmVudHMnO1xuLy8gaW1wb3J0IHsgTG9jYXRpb25UQyB9IGZyb20gJy4vbW9kZWxzL2xvY2F0aW9ucyc7XG4vLyBpbXBvcnQgeyBQcm92aWRlclRDIH0gZnJvbSAnLi9tb2RlbHMvcHJvdmlkZXJzJztcbi8vIGltcG9ydCB7IFNlYXJjaFRDIH0gZnJvbSAnLi9tb2RlbHMvc2VhcmNoZXMnO1xuaW1wb3J0IHsgU2Vzc2lvblRDIH0gZnJvbSAnLi9tb2RlbHMvc2Vzc2lvbnMnO1xuLy8gaW1wb3J0IHsgVGFnVEMgfSBmcm9tICcuL21vZGVscy90YWdzJztcbi8vIGltcG9ydCB7IFRoaW5nVEMgfSBmcm9tICcuL21vZGVscy90aGluZ3MnO1xuXG5pbXBvcnQgeyBVc2VyVEMgfSBmcm9tICcuL21vZGVscy91c2Vycyc7XG5cbmNvbnN0IEdRQyA9IG5ldyBTY2hlbWFDb21wb3NlcigpO1xuXG5jb25zdCB7IFJlc29sdmVyIH0gPSBHUUM7XG5cbi8vIGNyZWF0ZSBHcmFwaFFMIFNjaGVtYSB3aXRoIGFsbCBhdmFpbGFibGUgcmVzb2x2ZXJzXG5HUUMucm9vdFF1ZXJ5KCkuYWRkRmllbGRzKHtcbiAgLy9Db25uZWN0aW9uc1xuLy8gICBjb25uZWN0aW9uT25lOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgY29ubmVjdGlvbk1hbnk6IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgY29ubmVjdGlvblRvdGFsOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIGNvbm5lY3Rpb25Db25uZWN0aW9uOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgY29ubmVjdGlvblBhZ2luYXRpb246IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbi8vICAgLy9Db250YWN0c1xuLy8gICBjb250YWN0T25lOiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgY29udGFjdE1hbnk6IENvbnRhY3RUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgY29udGFjdFRvdGFsOiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIGNvbnRhY3RDb25uZWN0aW9uOiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgY29udGFjdFBhZ2luYXRpb246IENvbnRhY3RUQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbi8vICAgLy9Db250ZW50XG4vLyAgIGNvbnRlbnRPbmU6IENvbnRlbnRUQy5nZXRSZXNvbHZlcignZmluZE9uZScpLFxuLy8gICBjb250ZW50TWFueTogQ29udGVudFRDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLFxuLy8gICBjb250ZW50VG90YWw6IENvbnRlbnRUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgY29udGVudENvbm5lY3Rpb246IENvbnRlbnRUQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuLy8gICBjb250ZW50UGFnaW5hdGlvbjogQ29udGVudFRDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4gIFxuLy8gICAvL0V2ZW50c1xuLy8gICBldmVudE9uZTogRXZlbnRUQy5nZXRSZXNvbHZlcignZmluZE9uZScpLFxuLy8gICBldmVudE1hbnk6IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JyksXG4vLyAgIGV2ZW50VG90YWw6IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIGV2ZW50Q29ubmVjdGlvbjogRXZlbnRUQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuLy8gICBldmVudFBhZ2luYXRpb246IEV2ZW50VEMuZ2V0UmVzb2x2ZXIoJ3BhZ2luYXRpb24nKSxcbiAgXG4vLyAgIC8vTG9jYXRpb25zXG4vLyAgIGxvY2F0aW9uT25lOiBMb2NhdGlvblRDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4vLyAgIGxvY2F0aW9uTWFueTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgbG9jYXRpb25Ub3RhbDogTG9jYXRpb25UQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgbG9jYXRpb25Db25uZWN0aW9uOiBMb2NhdGlvblRDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIGxvY2F0aW9uUGFnaW5hdGlvbjogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbi8vICAgLy9Qcm92aWRlcnNcbi8vICAgcHJvdmlkZXJPbmU6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgcHJvdmlkZXJNYW55OiBQcm92aWRlclRDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLFxuLy8gICBwcm92aWRlclRvdGFsOiBQcm92aWRlclRDLmdldFJlc29sdmVyKCdjb3VudCcpLFxuLy8gICBwcm92aWRlckNvbm5lY3Rpb246IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgcHJvdmlkZXJQYWdpbmF0aW9uOiBQcm92aWRlclRDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4gIFxuLy8gICAvL1NlYXJjaGVzXG4vLyAgIHNlYXJjaE9uZTogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbi8vICAgc2VhcmNoTWFueTogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JyksXG4vLyAgIHNlYXJjaFRvdGFsOiBTZWFyY2hUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgc2VhcmNoQ29ubmVjdGlvbjogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ2Nvbm5lY3Rpb24nKSxcbi8vICAgc2VhcmNoUGFnaW5hdGlvbjogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ3BhZ2luYXRpb24nKSxcblxuICAvL1Nlc3Npb25cbiAgc2Vzc2lvbk9uZTogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4gIC4uLnJlc3RyaWN0VG9Vc2VyKFJlc29sdmVyLCB7XG4gICAgc2Vzc2lvbk1hbnk6IFNlc3Npb25UQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbiAgfSksXG4vLyAgIHNlc3Npb25Ub3RhbDogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdjb3VudCcpLFxuLy8gICBzZXNzaW9uQ29ubmVjdGlvbjogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIHNlc3Npb25QYWdpbmF0aW9uOiBTZXNzaW9uVEMuZ2V0UmVzb2x2ZXIoJ3BhZ2luYXRpb24nKSxcbiAgXG4vLyAgIC8vVGFnc1xuLy8gICB0YWdPbmU6IFRhZ1RDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4vLyAgIHRhZ01hbnk6IFRhZ1RDLmdldFJlc29sdmVyKCdmaW5kTWFueScpLFxuLy8gICB0YWdUb3RhbDogVGFnVEMuZ2V0UmVzb2x2ZXIoJ2NvdW50JyksXG4vLyAgIHRhZ0Nvbm5lY3Rpb246IFRhZ1RDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIHRhZ1BhZ2luYXRpb246IFRhZ1RDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4vLyAgIC8vVGhpbmdzXG4vLyAgIFRoaW5nT25lOiBUaGluZ1RDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4vLyAgIFRoaW5nTWFueTogVGhpbmdUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSxcbi8vICAgVGhpbmdUb3RhbDogVGhpbmdUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbi8vICAgVGhpbmdDb25uZWN0aW9uOiBUaGluZ1RDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIFRoaW5nUGFnaW5hdGlvbjogVGhpbmdUQy5nZXRSZXNvbHZlcigncGFnaW5hdGlvbicpLFxuICBcbiAgLy9Vc2Vyc1xuICB1c2VyT25lOiBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKSxcbiAgdXNlck1hbnk6IFVzZXJUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKSwgLy8gLmRlYnVnKCksIC8vIGRlYnVnIGluZm8gdG8gY29uc29sZSBmb3IgdGhpcyByZXNvbHZlclxuICB1c2VyVG90YWw6IFVzZXJUQy5nZXRSZXNvbHZlcignY291bnQnKSxcbiAgdXNlckNvbm5lY3Rpb246IFVzZXJUQy5nZXRSZXNvbHZlcignY29ubmVjdGlvbicpLFxuICB1c2VyUGFnaW5hdGlvbjogVXNlclRDLmdldFJlc29sdmVyKCdwYWdpbmF0aW9uJyksXG4gIFxufSk7XG4vLyBGb3IgZGVidWcgcHVycG9zZXMgeW91IG1heSBkaXNwbGF5IHJlc29sdmVyIGludGVybmFscyBpbiB0aGUgZm9sbG93aW5nIG1hbm5lcjpcbi8vIGNvbnNvbGUubG9nKFVzZXJUQy5nZXRSZXNvbHZlcignZmluZE1hbnknKS50b1N0cmluZygpKTtcblxuR1FDLnJvb3RNdXRhdGlvbigpLmFkZEZpZWxkcyh7XG4gIFxuICAvLyBDb25uZWN0aW9uc1xuLy8gICBjb25uZWN0aW9uQ3JlYXRlOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuLy8gICBjb25uZWN0aW9uVXBkYXRlT25lOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU9uZScpLFxuLy8gICBjb25uZWN0aW9uVXBkYXRlTWFueTogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCd1cGRhdGVNYW55JyksXG4vLyAgIGNvbm5lY3Rpb25SZW1vdmVPbmU6IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4vLyAgIGNvbm5lY3Rpb25SZW1vdmVNYW55OiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4vLyAgIC8vIENvbnRhY3RzXG4vLyAgIGNvbnRhY3RDcmVhdGU6IENvbnRhY3RUQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4vLyAgIGNvbnRhY3RVcGRhdGVPbmU6IENvbnRhY3RUQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4vLyAgIGNvbnRhY3RVcGRhdGVNYW55OiBDb250YWN0VEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbi8vICAgY29udGFjdFJlbW92ZU9uZTogQ29udGFjdFRDLmdldFJlc29sdmVyKCdyZW1vdmVPbmUnKSxcbi8vICAgY29udGFjdFJlbW92ZU1hbnk6IENvbnRhY3RUQy5nZXRSZXNvbHZlcigncmVtb3ZlTWFueScpLFxuICBcbi8vICAgLy8gQ29udGVudFxuLy8gICBjb250ZW50Q3JlYXRlOiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuLy8gICBjb250ZW50VXBkYXRlT25lOiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU9uZScpLFxuLy8gICBjb250ZW50VXBkYXRlTWFueTogQ29udGVudFRDLmdldFJlc29sdmVyKCd1cGRhdGVNYW55JyksXG4vLyAgIGNvbnRlbnRSZW1vdmVPbmU6IENvbnRlbnRUQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4vLyAgIGNvbnRlbnRSZW1vdmVNYW55OiBDb250ZW50VEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4vLyAgIC8vIEV2ZW50c1xuLy8gICBldmVudENyZWF0ZTogRXZlbnRUQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4vLyAgIGV2ZW50VXBkYXRlT25lOiBFdmVudFRDLmdldFJlc29sdmVyKCd1cGRhdGVPbmUnKSxcbi8vICAgZXZlbnRVcGRhdGVNYW55OiBFdmVudFRDLmdldFJlc29sdmVyKCd1cGRhdGVNYW55JyksXG4vLyAgIGV2ZW50UmVtb3ZlT25lOiBFdmVudFRDLmdldFJlc29sdmVyKCdyZW1vdmVPbmUnKSxcbi8vICAgZXZlbnRSZW1vdmVNYW55OiBFdmVudFRDLmdldFJlc29sdmVyKCdyZW1vdmVNYW55JyksXG4gIFxuLy8gICAvLyBMb2NhdGlvbnNcbi8vICAgbG9jYXRpb25DcmVhdGU6IExvY2F0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuLy8gICBsb2NhdGlvblVwZGF0ZU9uZTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4vLyAgIGxvY2F0aW9uVXBkYXRlTWFueTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuLy8gICBsb2NhdGlvblJlbW92ZU9uZTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4vLyAgIGxvY2F0aW9uUmVtb3ZlTWFueTogTG9jYXRpb25UQy5nZXRSZXNvbHZlcigncmVtb3ZlTWFueScpLFxuICBcbi8vICAgLy8gUHJvdmlkZXJzXG4vLyAgIHByb3ZpZGVyQ3JlYXRlOiBQcm92aWRlclRDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKSxcbi8vICAgcHJvdmlkZXJVcGRhdGVPbmU6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU9uZScpLFxuLy8gICBwcm92aWRlclVwZGF0ZU1hbnk6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbi8vICAgcHJvdmlkZXJSZW1vdmVPbmU6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuLy8gICBwcm92aWRlclJlbW92ZU1hbnk6IFByb3ZpZGVyVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4vLyAgIC8vIFNlYXJjaGVzXG4vLyAgIHNlYXJjaENyZWF0ZTogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuLy8gICBzZWFyY2hVcGRhdGVPbmU6IFNlYXJjaFRDLmdldFJlc29sdmVyKCd1cGRhdGVPbmUnKSxcbi8vICAgc2VhcmNoVXBkYXRlTWFueTogU2VhcmNoVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbi8vICAgc2VhcmNoUmVtb3ZlT25lOiBTZWFyY2hUQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4vLyAgIHNlYXJjaFJlbW92ZU1hbnk6IFNlYXJjaFRDLmdldFJlc29sdmVyKCdyZW1vdmVNYW55JyksXG4gIFxuLy8gICAvLyBTZXNzaW9uXG4vLyAgIHNlc3Npb25DcmVhdGU6IFNlc3Npb25UQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJyksXG4vLyAgIHNlc3Npb25VcGRhdGVPbmU6IFNlc3Npb25UQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4vLyAgIHNlc3Npb25VcGRhdGVNYW55OiBTZXNzaW9uVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbi8vICAgc2Vzc2lvblJlbW92ZU9uZTogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdyZW1vdmVPbmUnKSxcbi8vICAgc2Vzc2lvblJlbW92ZU1hbnk6IFNlc3Npb25UQy5nZXRSZXNvbHZlcigncmVtb3ZlTWFueScpLFxuICBcbi8vICAgLy8gVGFnc1xuLy8gICB0YWdDcmVhdGU6IFRhZ1RDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKSxcbi8vICAgdGFnVXBkYXRlT25lOiBUYWdUQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJyksXG4vLyAgIHRhZ1VwZGF0ZU1hbnk6IFRhZ1RDLmdldFJlc29sdmVyKCd1cGRhdGVNYW55JyksXG4vLyAgIHRhZ1JlbW92ZU9uZTogVGFnVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuLy8gICB0YWdSZW1vdmVNYW55OiBUYWdUQy5nZXRSZXNvbHZlcigncmVtb3ZlTWFueScpLFxuICBcbi8vICAgLy8gVGhpbmdzXG4vLyAgIHRoaW5nQ3JlYXRlOiBUaGluZ1RDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKSxcbi8vICAgdGhpbmdVcGRhdGVPbmU6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU9uZScpLFxuLy8gICB0aGluZ1VwZGF0ZU1hbnk6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU1hbnknKSxcbi8vICAgdGhpbmdSZW1vdmVPbmU6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuLy8gICB0aGluZ1JlbW92ZU1hbnk6IFRoaW5nVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbiAgXG4gIC4uLnJlc3RyaWN0VG9Vc2VyKFJlc29sdmVyLCB7XG4gICAgc2Vzc2lvbkNyZWF0ZTogU2Vzc2lvblRDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKS53cmFwUmVzb2x2ZShuZXh0ID0+IHJwID0+IHtcbiAgICAgIHJwLmFyZ3MucmVjb3JkLmlkID0gdXVpZCgpLnJlcGxhY2UoLy0vZywgJycpO1xuICAgICAgcnAuYXJncy5yZWNvcmQudXNlcl9pZF9zdHJpbmcgPSBycC5jb250ZXh0LnJlcS51c2VyLl9pZC50b1N0cmluZygnaGV4Jyk7XG4gICAgICBcbiAgICAgIHJldHVybiBuZXh0KHJwKTsgXG4gICAgfSksXG4gIH0pLFxuICAgIFxuICBpbml0aWFsaXplQ29ubmVjdGlvbjogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCdpbml0aWFsaXplQ29ubmVjdGlvbicpXG4gIFxuICAvLyBVc2Vyc1xuICAvLyB1c2VyQ3JlYXRlOiBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLFxuICAvLyB1c2VyVXBkYXRlT25lOiBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ3VwZGF0ZU9uZScpLFxuICAvLyB1c2VyVXBkYXRlTWFueTogVXNlclRDLmdldFJlc29sdmVyKCd1cGRhdGVNYW55JyksXG4gIC8vIHVzZXJSZW1vdmVPbmU6IFVzZXJUQy5nZXRSZXNvbHZlcigncmVtb3ZlT25lJyksXG4gIC8vIHVzZXJSZW1vdmVNYW55OiBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU1hbnknKSxcbn0pO1xuXG5jb25zdCBncmFwaHFsU2NoZW1hID0gR1FDLmJ1aWxkU2NoZW1hKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGdyYXBocWxTY2hlbWE7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "crud-schema.js"
      ],
      "names": [
        "GQC",
        "Resolver",
        "rootQuery",
        "addFields",
        "sessionOne",
        "getResolver",
        "sessionMany",
        "userOne",
        "userMany",
        "userTotal",
        "userConnection",
        "userPagination",
        "rootMutation",
        "sessionCreate",
        "wrapResolve",
        "next",
        "rp",
        "args",
        "record",
        "id",
        "replace",
        "user_id_string",
        "context",
        "req",
        "user",
        "_id",
        "toString",
        "initializeConnection",
        "graphqlSchema",
        "buildSchema"
      ],
      "mappings": ";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAbA;;AACA;;;;AAEA;;;;AACA;;AAOA;;AAIA;;;;AAEA,MAAMA,MAAM,oCAAZ;;MAEQC,Q,GAAaD,G,CAAbC,Q;;AAER;;AACAD,IAAIE,SAAJ,GAAgBC,SAAhB;AACE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACAC,cAAY,oBAAUC,WAAV,CAAsB,SAAtB;AAnDd,GAoDK,8BAAeJ,QAAf,EAAyB;AAC1BK,eAAa,oBAAUD,WAAV,CAAsB,UAAtB;AADa,CAAzB,CApDL;AAuDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACAE,WAAS,cAAOF,WAAP,CAAmB,SAAnB,CAzEX;AA0EEG,YAAU,cAAOH,WAAP,CAAmB,UAAnB,CA1EZ,EA0E4C;AAC1CI,aAAW,cAAOJ,WAAP,CAAmB,OAAnB,CA3Eb;AA4EEK,kBAAgB,cAAOL,WAAP,CAAmB,YAAnB,CA5ElB;AA6EEM,kBAAgB,cAAON,WAAP,CAAmB,YAAnB;;AA7ElB;AAgFA;AACA;;AAEAL,IAAIY,YAAJ,GAAmBT,SAAnB,cAwEK,8BAAeF,QAAf,EAAyB;AAC1BY,iBAAe,oBAAUR,WAAV,CAAsB,WAAtB,EAAmCS,WAAnC,CAA+CC,QAAQC,MAAM;AAC1EA,OAAGC,IAAH,CAAQC,MAAR,CAAeC,EAAf,GAAoB,mBAAOC,OAAP,CAAe,IAAf,EAAqB,EAArB,CAApB;AACAJ,OAAGC,IAAH,CAAQC,MAAR,CAAeG,cAAf,GAAgCL,GAAGM,OAAH,CAAWC,GAAX,CAAeC,IAAf,CAAoBC,GAApB,CAAwBC,QAAxB,CAAiC,KAAjC,CAAhC;;AAEA,WAAOX,KAAKC,EAAL,CAAP;AACD,GALc;AADW,CAAzB,CAxEL;;AAiFEW,wBAAsB,0BAAatB,WAAb,CAAyB,sBAAzB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AAxFF;;AA2FA,MAAMuB,gBAAgB5B,IAAI6B,WAAJ,EAAtB;;kBAEeD,a",
      "file": "crud-schema.js",
      "sourceRoot": "/app/schema",
      "sourcesContent": [
        "/* @flow */\n\nimport { SchemaComposer } from 'graphql-compose';\nimport uuid from 'uuid/v4';\n\nimport restrictToUser from '../middleware/restrict-to-user';\nimport { ConnectionTC } from './models/connections';\n// import { ContactTC } from './models/contacts';\n// import { ContentTC } from './models/content';\n// import { EventTC } from './models/events';\n// import { LocationTC } from './models/locations';\n// import { ProviderTC } from './models/providers';\n// import { SearchTC } from './models/searches';\nimport { SessionTC } from './models/sessions';\n// import { TagTC } from './models/tags';\n// import { ThingTC } from './models/things';\n\nimport { UserTC } from './models/users';\n\nconst GQC = new SchemaComposer();\n\nconst { Resolver } = GQC;\n\n// create GraphQL Schema with all available resolvers\nGQC.rootQuery().addFields({\n  //Connections\n//   connectionOne: ConnectionTC.getResolver('findOne'),\n//   connectionMany: ConnectionTC.getResolver('findMany'),\n//   connectionTotal: ConnectionTC.getResolver('count'),\n//   connectionConnection: ConnectionTC.getResolver('connection'),\n//   connectionPagination: ConnectionTC.getResolver('pagination'),\n  \n//   //Contacts\n//   contactOne: ContactTC.getResolver('findOne'),\n//   contactMany: ContactTC.getResolver('findMany'),\n//   contactTotal: ContactTC.getResolver('count'),\n//   contactConnection: ContactTC.getResolver('connection'),\n//   contactPagination: ContactTC.getResolver('pagination'),\n  \n//   //Content\n//   contentOne: ContentTC.getResolver('findOne'),\n//   contentMany: ContentTC.getResolver('findMany'),\n//   contentTotal: ContentTC.getResolver('count'),\n//   contentConnection: ContentTC.getResolver('connection'),\n//   contentPagination: ContentTC.getResolver('pagination'),\n  \n//   //Events\n//   eventOne: EventTC.getResolver('findOne'),\n//   eventMany: EventTC.getResolver('findMany'),\n//   eventTotal: EventTC.getResolver('count'),\n//   eventConnection: EventTC.getResolver('connection'),\n//   eventPagination: EventTC.getResolver('pagination'),\n  \n//   //Locations\n//   locationOne: LocationTC.getResolver('findOne'),\n//   locationMany: LocationTC.getResolver('findMany'),\n//   locationTotal: LocationTC.getResolver('count'),\n//   locationConnection: LocationTC.getResolver('connection'),\n//   locationPagination: LocationTC.getResolver('pagination'),\n  \n//   //Providers\n//   providerOne: ProviderTC.getResolver('findOne'),\n//   providerMany: ProviderTC.getResolver('findMany'),\n//   providerTotal: ProviderTC.getResolver('count'),\n//   providerConnection: ProviderTC.getResolver('connection'),\n//   providerPagination: ProviderTC.getResolver('pagination'),\n  \n//   //Searches\n//   searchOne: SearchTC.getResolver('findOne'),\n//   searchMany: SearchTC.getResolver('findMany'),\n//   searchTotal: SearchTC.getResolver('count'),\n//   searchConnection: SearchTC.getResolver('connection'),\n//   searchPagination: SearchTC.getResolver('pagination'),\n\n  //Session\n  sessionOne: SessionTC.getResolver('findOne'),\n  ...restrictToUser(Resolver, {\n    sessionMany: SessionTC.getResolver('findMany'),\n  }),\n//   sessionTotal: SessionTC.getResolver('count'),\n//   sessionConnection: SessionTC.getResolver('connection'),\n//   sessionPagination: SessionTC.getResolver('pagination'),\n  \n//   //Tags\n//   tagOne: TagTC.getResolver('findOne'),\n//   tagMany: TagTC.getResolver('findMany'),\n//   tagTotal: TagTC.getResolver('count'),\n//   tagConnection: TagTC.getResolver('connection'),\n//   tagPagination: TagTC.getResolver('pagination'),\n//   //Things\n//   ThingOne: ThingTC.getResolver('findOne'),\n//   ThingMany: ThingTC.getResolver('findMany'),\n//   ThingTotal: ThingTC.getResolver('count'),\n//   ThingConnection: ThingTC.getResolver('connection'),\n//   ThingPagination: ThingTC.getResolver('pagination'),\n  \n  //Users\n  userOne: UserTC.getResolver('findOne'),\n  userMany: UserTC.getResolver('findMany'), // .debug(), // debug info to console for this resolver\n  userTotal: UserTC.getResolver('count'),\n  userConnection: UserTC.getResolver('connection'),\n  userPagination: UserTC.getResolver('pagination'),\n  \n});\n// For debug purposes you may display resolver internals in the following manner:\n// console.log(UserTC.getResolver('findMany').toString());\n\nGQC.rootMutation().addFields({\n  \n  // Connections\n//   connectionCreate: ConnectionTC.getResolver('createOne'),\n//   connectionUpdateOne: ConnectionTC.getResolver('updateOne'),\n//   connectionUpdateMany: ConnectionTC.getResolver('updateMany'),\n//   connectionRemoveOne: ConnectionTC.getResolver('removeOne'),\n//   connectionRemoveMany: ConnectionTC.getResolver('removeMany'),\n  \n//   // Contacts\n//   contactCreate: ContactTC.getResolver('createOne'),\n//   contactUpdateOne: ContactTC.getResolver('updateOne'),\n//   contactUpdateMany: ContactTC.getResolver('updateMany'),\n//   contactRemoveOne: ContactTC.getResolver('removeOne'),\n//   contactRemoveMany: ContactTC.getResolver('removeMany'),\n  \n//   // Content\n//   contentCreate: ContentTC.getResolver('createOne'),\n//   contentUpdateOne: ContentTC.getResolver('updateOne'),\n//   contentUpdateMany: ContentTC.getResolver('updateMany'),\n//   contentRemoveOne: ContentTC.getResolver('removeOne'),\n//   contentRemoveMany: ContentTC.getResolver('removeMany'),\n  \n//   // Events\n//   eventCreate: EventTC.getResolver('createOne'),\n//   eventUpdateOne: EventTC.getResolver('updateOne'),\n//   eventUpdateMany: EventTC.getResolver('updateMany'),\n//   eventRemoveOne: EventTC.getResolver('removeOne'),\n//   eventRemoveMany: EventTC.getResolver('removeMany'),\n  \n//   // Locations\n//   locationCreate: LocationTC.getResolver('createOne'),\n//   locationUpdateOne: LocationTC.getResolver('updateOne'),\n//   locationUpdateMany: LocationTC.getResolver('updateMany'),\n//   locationRemoveOne: LocationTC.getResolver('removeOne'),\n//   locationRemoveMany: LocationTC.getResolver('removeMany'),\n  \n//   // Providers\n//   providerCreate: ProviderTC.getResolver('createOne'),\n//   providerUpdateOne: ProviderTC.getResolver('updateOne'),\n//   providerUpdateMany: ProviderTC.getResolver('updateMany'),\n//   providerRemoveOne: ProviderTC.getResolver('removeOne'),\n//   providerRemoveMany: ProviderTC.getResolver('removeMany'),\n  \n//   // Searches\n//   searchCreate: SearchTC.getResolver('createOne'),\n//   searchUpdateOne: SearchTC.getResolver('updateOne'),\n//   searchUpdateMany: SearchTC.getResolver('updateMany'),\n//   searchRemoveOne: SearchTC.getResolver('removeOne'),\n//   searchRemoveMany: SearchTC.getResolver('removeMany'),\n  \n//   // Session\n//   sessionCreate: SessionTC.getResolver('createOne'),\n//   sessionUpdateOne: SessionTC.getResolver('updateOne'),\n//   sessionUpdateMany: SessionTC.getResolver('updateMany'),\n//   sessionRemoveOne: SessionTC.getResolver('removeOne'),\n//   sessionRemoveMany: SessionTC.getResolver('removeMany'),\n  \n//   // Tags\n//   tagCreate: TagTC.getResolver('createOne'),\n//   tagUpdateOne: TagTC.getResolver('updateOne'),\n//   tagUpdateMany: TagTC.getResolver('updateMany'),\n//   tagRemoveOne: TagTC.getResolver('removeOne'),\n//   tagRemoveMany: TagTC.getResolver('removeMany'),\n  \n//   // Things\n//   thingCreate: ThingTC.getResolver('createOne'),\n//   thingUpdateOne: ThingTC.getResolver('updateOne'),\n//   thingUpdateMany: ThingTC.getResolver('updateMany'),\n//   thingRemoveOne: ThingTC.getResolver('removeOne'),\n//   thingRemoveMany: ThingTC.getResolver('removeMany'),\n  \n  ...restrictToUser(Resolver, {\n    sessionCreate: SessionTC.getResolver('createOne').wrapResolve(next => rp => {\n      rp.args.record.id = uuid().replace(/-/g, '');\n      rp.args.record.user_id_string = rp.context.req.user._id.toString('hex');\n      \n      return next(rp); \n    }),\n  }),\n    \n  initializeConnection: ConnectionTC.getResolver('initializeConnection')\n  \n  // Users\n  // userCreate: UserTC.getResolver('createOne'),\n  // userUpdateOne: UserTC.getResolver('updateOne'),\n  // userUpdateMany: UserTC.getResolver('updateMany'),\n  // userRemoveOne: UserTC.getResolver('removeOne'),\n  // userRemoveMany: UserTC.getResolver('removeMany'),\n});\n\nconst graphqlSchema = GQC.buildSchema();\n\nexport default graphqlSchema;"
      ]
    },
    "mtime": 1521832156870
  },
  "{\"filename\":\"/app/schema/session-schema.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "graphql-compose",
            "imported": [
              "SchemaComposer"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SchemaComposer",
                "local": "SchemaComposer"
              }
            ]
          },
          {
            "source": "uuid/v4",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          },
          {
            "source": "../middleware/restrict-to-user",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "restrictToUser"
              }
            ]
          },
          {
            "source": "./models/connections",
            "imported": [
              "ConnectionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ConnectionTC",
                "local": "ConnectionTC"
              }
            ]
          },
          {
            "source": "./models/session",
            "imported": [
              "SessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SessionTC",
                "local": "SessionTC"
              }
            ]
          },
          {
            "source": "./models/user",
            "imported": [
              "UserTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UserTC",
                "local": "UserTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "sessionAPI"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "sessionAPI",
              "exported": "sessionAPI"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/session-schema.js",
      "filenameRelative": "/app/schema/session-schema.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "session-schema.js",
      "sourceFileName": "session-schema.js",
      "sourceRoot": "/app/schema",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "session-schema"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sessionAPI = undefined;\n\nvar _graphqlCompose = require('graphql-compose');\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _restrictToUser = require('../middleware/restrict-to-user');\n\nvar _restrictToUser2 = _interopRequireDefault(_restrictToUser);\n\nvar _connections = require('./models/connections');\n\nvar _session = require('./models/session');\n\nvar _user = require('./models/user');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import { ProviderTC } from './models/providers';\nconst GQC = new _graphqlCompose.SchemaComposer();\n\nconst Resolver = GQC.Resolver;\n\n// create GraphQL Schema with all available resolvers\n\nGQC.rootQuery().addFields({\n  //Connections\n  // connectionOne: ConnectionTC.getResolver('findOne'),\n  // connectionMany: ConnectionTC.getResolver('findMany'),\n  //   connectionTotal: ConnectionTC.getResolver('count'),\n  //   connectionConnection: ConnectionTC.getResolver('connection'),\n  //   connectionPagination: ConnectionTC.getResolver('pagination'),\n});\n// For debug purposes you may display resolver internals in the following manner:\n// console.log(UserTC.getResolver('findMany').toString());\n\nGQC.rootMutation().addFields({\n\n  // Connections\n  connectionCreate: _connections.ConnectionTC.getResolver('createOne')\n  // connectionUpdateOne: ConnectionTC.getResolver('updateOne'),\n  // connectionUpdateMany: ConnectionTC.getResolver('updateMany'),\n  // connectionRemoveOne: ConnectionTC.getResolver('removeOne'),\n  // connectionRemoveMany: ConnectionTC.getResolver('removeMany'),\n});\n\nconst graphqlSchema = GQC.buildSchema();\n\nconst sessionAPI = exports.sessionAPI = graphqlSchema;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlc3Npb24tc2NoZW1hLmpzIl0sIm5hbWVzIjpbIkdRQyIsIlJlc29sdmVyIiwicm9vdFF1ZXJ5IiwiYWRkRmllbGRzIiwicm9vdE11dGF0aW9uIiwiY29ubmVjdGlvbkNyZWF0ZSIsImdldFJlc29sdmVyIiwiZ3JhcGhxbFNjaGVtYSIsImJ1aWxkU2NoZW1hIiwic2Vzc2lvbkFQSSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBOztBQUNBOzs7O0FBRUE7Ozs7QUFDQTs7QUFFQTs7QUFFQTs7OztBQUhBO0FBS0EsTUFBTUEsTUFBTSxvQ0FBWjs7TUFFUUMsUSxHQUFhRCxHLENBQWJDLFE7O0FBRVI7O0FBQ0FELElBQUlFLFNBQUosR0FBZ0JDLFNBQWhCLENBQTBCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNGO0FBQ0E7QUFDQTtBQU4wQixDQUExQjtBQVFBO0FBQ0E7O0FBRUFILElBQUlJLFlBQUosR0FBbUJELFNBQW5CLENBQTZCOztBQUUzQjtBQUNBRSxvQkFBa0IsMEJBQWFDLFdBQWIsQ0FBeUIsV0FBekI7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFQMkIsQ0FBN0I7O0FBVUEsTUFBTUMsZ0JBQWdCUCxJQUFJUSxXQUFKLEVBQXRCOztBQUVPLE1BQU1DLGtDQUFhRixhQUFuQiIsImZpbGUiOiJzZXNzaW9uLXNjaGVtYS5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NjaGVtYSIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCB7IFNjaGVtYUNvbXBvc2VyIH0gZnJvbSAnZ3JhcGhxbC1jb21wb3NlJztcbmltcG9ydCB1dWlkIGZyb20gJ3V1aWQvdjQnO1xuXG5pbXBvcnQgcmVzdHJpY3RUb1VzZXIgZnJvbSAnLi4vbWlkZGxld2FyZS9yZXN0cmljdC10by11c2VyJztcbmltcG9ydCB7IENvbm5lY3Rpb25UQyB9IGZyb20gJy4vbW9kZWxzL2Nvbm5lY3Rpb25zJztcbi8vIGltcG9ydCB7IFByb3ZpZGVyVEMgfSBmcm9tICcuL21vZGVscy9wcm92aWRlcnMnO1xuaW1wb3J0IHsgU2Vzc2lvblRDIH0gZnJvbSAnLi9tb2RlbHMvc2Vzc2lvbic7XG5cbmltcG9ydCB7IFVzZXJUQyB9IGZyb20gJy4vbW9kZWxzL3VzZXInO1xuXG5jb25zdCBHUUMgPSBuZXcgU2NoZW1hQ29tcG9zZXIoKTtcblxuY29uc3QgeyBSZXNvbHZlciB9ID0gR1FDO1xuXG4vLyBjcmVhdGUgR3JhcGhRTCBTY2hlbWEgd2l0aCBhbGwgYXZhaWxhYmxlIHJlc29sdmVyc1xuR1FDLnJvb3RRdWVyeSgpLmFkZEZpZWxkcyh7XG4gIC8vQ29ubmVjdGlvbnNcbiAgLy8gY29ubmVjdGlvbk9uZTogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCdmaW5kT25lJyksXG4gIC8vIGNvbm5lY3Rpb25NYW55OiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JyksXG4vLyAgIGNvbm5lY3Rpb25Ub3RhbDogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCdjb3VudCcpLFxuLy8gICBjb25uZWN0aW9uQ29ubmVjdGlvbjogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCdjb25uZWN0aW9uJyksXG4vLyAgIGNvbm5lY3Rpb25QYWdpbmF0aW9uOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3BhZ2luYXRpb24nKSxcbn0pO1xuLy8gRm9yIGRlYnVnIHB1cnBvc2VzIHlvdSBtYXkgZGlzcGxheSByZXNvbHZlciBpbnRlcm5hbHMgaW4gdGhlIGZvbGxvd2luZyBtYW5uZXI6XG4vLyBjb25zb2xlLmxvZyhVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JykudG9TdHJpbmcoKSk7XG5cbkdRQy5yb290TXV0YXRpb24oKS5hZGRGaWVsZHMoe1xuICBcbiAgLy8gQ29ubmVjdGlvbnNcbiAgY29ubmVjdGlvbkNyZWF0ZTogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCdjcmVhdGVPbmUnKSxcbiAgLy8gY29ubmVjdGlvblVwZGF0ZU9uZTogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCd1cGRhdGVPbmUnKSxcbiAgLy8gY29ubmVjdGlvblVwZGF0ZU1hbnk6IENvbm5lY3Rpb25UQy5nZXRSZXNvbHZlcigndXBkYXRlTWFueScpLFxuICAvLyBjb25uZWN0aW9uUmVtb3ZlT25lOiBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLFxuICAvLyBjb25uZWN0aW9uUmVtb3ZlTWFueTogQ29ubmVjdGlvblRDLmdldFJlc29sdmVyKCdyZW1vdmVNYW55JyksXG59KTtcblxuY29uc3QgZ3JhcGhxbFNjaGVtYSA9IEdRQy5idWlsZFNjaGVtYSgpO1xuXG5leHBvcnQgY29uc3Qgc2Vzc2lvbkFQSSA9IGdyYXBocWxTY2hlbWE7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "session-schema.js"
      ],
      "names": [
        "GQC",
        "Resolver",
        "rootQuery",
        "addFields",
        "rootMutation",
        "connectionCreate",
        "getResolver",
        "graphqlSchema",
        "buildSchema",
        "sessionAPI"
      ],
      "mappings": ";;;;;;;AAEA;;AACA;;;;AAEA;;;;AACA;;AAEA;;AAEA;;;;AAHA;AAKA,MAAMA,MAAM,oCAAZ;;MAEQC,Q,GAAaD,G,CAAbC,Q;;AAER;;AACAD,IAAIE,SAAJ,GAAgBC,SAAhB,CAA0B;AACxB;AACA;AACA;AACF;AACA;AACA;AAN0B,CAA1B;AAQA;AACA;;AAEAH,IAAII,YAAJ,GAAmBD,SAAnB,CAA6B;;AAE3B;AACAE,oBAAkB,0BAAaC,WAAb,CAAyB,WAAzB;AAClB;AACA;AACA;AACA;AAP2B,CAA7B;;AAUA,MAAMC,gBAAgBP,IAAIQ,WAAJ,EAAtB;;AAEO,MAAMC,kCAAaF,aAAnB",
      "file": "session-schema.js",
      "sourceRoot": "/app/schema",
      "sourcesContent": [
        "/* @flow */\n\nimport { SchemaComposer } from 'graphql-compose';\nimport uuid from 'uuid/v4';\n\nimport restrictToUser from '../middleware/restrict-to-user';\nimport { ConnectionTC } from './models/connections';\n// import { ProviderTC } from './models/providers';\nimport { SessionTC } from './models/session';\n\nimport { UserTC } from './models/user';\n\nconst GQC = new SchemaComposer();\n\nconst { Resolver } = GQC;\n\n// create GraphQL Schema with all available resolvers\nGQC.rootQuery().addFields({\n  //Connections\n  // connectionOne: ConnectionTC.getResolver('findOne'),\n  // connectionMany: ConnectionTC.getResolver('findMany'),\n//   connectionTotal: ConnectionTC.getResolver('count'),\n//   connectionConnection: ConnectionTC.getResolver('connection'),\n//   connectionPagination: ConnectionTC.getResolver('pagination'),\n});\n// For debug purposes you may display resolver internals in the following manner:\n// console.log(UserTC.getResolver('findMany').toString());\n\nGQC.rootMutation().addFields({\n  \n  // Connections\n  connectionCreate: ConnectionTC.getResolver('createOne'),\n  // connectionUpdateOne: ConnectionTC.getResolver('updateOne'),\n  // connectionUpdateMany: ConnectionTC.getResolver('updateMany'),\n  // connectionRemoveOne: ConnectionTC.getResolver('removeOne'),\n  // connectionRemoveMany: ConnectionTC.getResolver('removeMany'),\n});\n\nconst graphqlSchema = GQC.buildSchema();\n\nexport const sessionAPI = graphqlSchema;"
      ]
    },
    "mtime": 1521679920036
  },
  "{\"filename\":\"/app/schema/models/events.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "EventsSchema",
            "Events",
            "EventTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "EventsSchema",
              "exported": "EventsSchema"
            },
            {
              "kind": "local",
              "local": "Events",
              "exported": "Events"
            },
            {
              "kind": "local",
              "local": "EventTC",
              "exported": "EventTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/events.js",
      "filenameRelative": "/app/schema/models/events.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "events.js",
      "sourceFileName": "events.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "events"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventTC = exports.Events = exports.EventsSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: FIXXX\n// TODO: change source type\nconst EventsSchema = exports.EventsSchema = new _mongoose2.default.Schema({\n  connection: {\n    type: Buffer,\n    index: false\n  },\n\n  contact_interaction_type: {\n    type: String,\n    index: false\n  },\n\n  contacts: {\n    type: [Buffer],\n    index: false\n  },\n  content: {\n    type: [Buffer],\n    index: false\n  },\n  context: {\n    type: String,\n    index: false\n  },\n  created: {\n    type: Date,\n    index: false\n  },\n  datetime: {\n    type: Date,\n    index: false\n  },\n  identifier: {\n    type: String,\n    index: false\n  },\n  provider: {\n    type: String,\n    index: false\n  },\n  provider_name: {\n    type: String,\n    index: false\n  },\n  source: {\n    type: String,\n    index: false\n  },\n  type: {\n    type: String,\n    index: false\n  },\n\n  updated: {\n    type: Date,\n    index: false\n  },\n  user_id: {\n    type: Buffer,\n    index: false\n  }\n}, {\n  collection: 'events'\n});\n\nconst Events = exports.Events = _mongoose2.default.model('Events', EventsSchema);\n\nconst EventTC = exports.EventTC = (0, _node2.default)(Events);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50cy5qcyJdLCJuYW1lcyI6WyJFdmVudHNTY2hlbWEiLCJTY2hlbWEiLCJjb25uZWN0aW9uIiwidHlwZSIsIkJ1ZmZlciIsImluZGV4IiwiY29udGFjdF9pbnRlcmFjdGlvbl90eXBlIiwiU3RyaW5nIiwiY29udGFjdHMiLCJjb250ZW50IiwiY29udGV4dCIsImNyZWF0ZWQiLCJEYXRlIiwiZGF0ZXRpbWUiLCJpZGVudGlmaWVyIiwicHJvdmlkZXIiLCJwcm92aWRlcl9uYW1lIiwic291cmNlIiwidXBkYXRlZCIsInVzZXJfaWQiLCJjb2xsZWN0aW9uIiwiRXZlbnRzIiwibW9kZWwiLCJFdmVudFRDIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBSUE7Ozs7QUFDQTs7Ozs7O0FBSEE7QUFDQTtBQUlPLE1BQU1BLHNDQUFlLElBQUksbUJBQVNDLE1BQWIsQ0FDMUI7QUFDRUMsY0FBWTtBQUNWQyxVQUFNQyxNQURJO0FBRVZDLFdBQU87QUFGRyxHQURkOztBQU1FQyw0QkFBMEI7QUFDeEJILFVBQU1JLE1BRGtCO0FBRXhCRixXQUFPO0FBRmlCLEdBTjVCOztBQVdFRyxZQUFVO0FBQ1JMLFVBQU0sQ0FBQ0MsTUFBRCxDQURFO0FBRVJDLFdBQU87QUFGQyxHQVhaO0FBZUVJLFdBQVM7QUFDUE4sVUFBTSxDQUFDQyxNQUFELENBREM7QUFFUEMsV0FBTztBQUZBLEdBZlg7QUFtQkVLLFdBQVM7QUFDUFAsVUFBTUksTUFEQztBQUVQRixXQUFPO0FBRkEsR0FuQlg7QUF1QkVNLFdBQVM7QUFDUFIsVUFBTVMsSUFEQztBQUVQUCxXQUFPO0FBRkEsR0F2Qlg7QUEyQkVRLFlBQVU7QUFDUlYsVUFBTVMsSUFERTtBQUVSUCxXQUFPO0FBRkMsR0EzQlo7QUErQkVTLGNBQVk7QUFDVlgsVUFBTUksTUFESTtBQUVWRixXQUFPO0FBRkcsR0EvQmQ7QUFtQ0VVLFlBQVU7QUFDUlosVUFBTUksTUFERTtBQUVSRixXQUFPO0FBRkMsR0FuQ1o7QUF1Q0VXLGlCQUFlO0FBQ2JiLFVBQU1JLE1BRE87QUFFYkYsV0FBTztBQUZNLEdBdkNqQjtBQTJDRVksVUFBUTtBQUNOZCxVQUFNSSxNQURBO0FBRU5GLFdBQU87QUFGRCxHQTNDVjtBQStDRUYsUUFBTTtBQUNKQSxVQUFNSSxNQURGO0FBRUpGLFdBQU87QUFGSCxHQS9DUjs7QUFvREVhLFdBQVM7QUFDUGYsVUFBTVMsSUFEQztBQUVQUCxXQUFPO0FBRkEsR0FwRFg7QUF3REVjLFdBQVM7QUFDUGhCLFVBQU1DLE1BREM7QUFFUEMsV0FBTztBQUZBO0FBeERYLENBRDBCLEVBOEQxQjtBQUNFZSxjQUFZO0FBRGQsQ0E5RDBCLENBQXJCOztBQXFFQSxNQUFNQywwQkFBUyxtQkFBU0MsS0FBVCxDQUFlLFFBQWYsRUFBeUJ0QixZQUF6QixDQUFmOztBQUVBLE1BQU11Qiw0QkFBVSxvQkFBb0JGLE1BQXBCLENBQWhCIiwiZmlsZSI6ImV2ZW50cy5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NjaGVtYS9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG4vLyBUT0RPOiBGSVhYWFxuLy8gVE9ETzogY2hhbmdlIHNvdXJjZSB0eXBlXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IGNvbXBvc2VXaXRoTW9uZ29vc2UgZnJvbSAnZ3JhcGhxbC1jb21wb3NlLW1vbmdvb3NlL25vZGU4JztcblxuZXhwb3J0IGNvbnN0IEV2ZW50c1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICBjb25uZWN0aW9uOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIFxuICAgIGNvbnRhY3RfaW50ZXJhY3Rpb25fdHlwZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICBjb250YWN0czoge1xuICAgICAgdHlwZTogW0J1ZmZlcl0sXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIHR5cGU6IFtCdWZmZXJdLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBjb250ZXh0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGNyZWF0ZWQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGRhdGV0aW1lOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBpZGVudGlmaWVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHByb3ZpZGVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHByb3ZpZGVyX25hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgc291cmNlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHR5cGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgdXBkYXRlZDoge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgdXNlcl9pZDoge1xuICAgICAgdHlwZTogQnVmZmVyLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNvbGxlY3Rpb246ICdldmVudHMnLFxuICB9XG4pO1xuICBcblxuICBcbmV4cG9ydCBjb25zdCBFdmVudHMgPSBtb25nb29zZS5tb2RlbCgnRXZlbnRzJywgRXZlbnRzU2NoZW1hKTtcblxuZXhwb3J0IGNvbnN0IEV2ZW50VEMgPSBjb21wb3NlV2l0aE1vbmdvb3NlKEV2ZW50cyk7XG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "events.js"
      ],
      "names": [
        "EventsSchema",
        "Schema",
        "connection",
        "type",
        "Buffer",
        "index",
        "contact_interaction_type",
        "String",
        "contacts",
        "content",
        "context",
        "created",
        "Date",
        "datetime",
        "identifier",
        "provider",
        "provider_name",
        "source",
        "updated",
        "user_id",
        "collection",
        "Events",
        "model",
        "EventTC"
      ],
      "mappings": ";;;;;;;AAIA;;;;AACA;;;;;;AAHA;AACA;AAIO,MAAMA,sCAAe,IAAI,mBAASC,MAAb,CAC1B;AACEC,cAAY;AACVC,UAAMC,MADI;AAEVC,WAAO;AAFG,GADd;;AAMEC,4BAA0B;AACxBH,UAAMI,MADkB;AAExBF,WAAO;AAFiB,GAN5B;;AAWEG,YAAU;AACRL,UAAM,CAACC,MAAD,CADE;AAERC,WAAO;AAFC,GAXZ;AAeEI,WAAS;AACPN,UAAM,CAACC,MAAD,CADC;AAEPC,WAAO;AAFA,GAfX;AAmBEK,WAAS;AACPP,UAAMI,MADC;AAEPF,WAAO;AAFA,GAnBX;AAuBEM,WAAS;AACPR,UAAMS,IADC;AAEPP,WAAO;AAFA,GAvBX;AA2BEQ,YAAU;AACRV,UAAMS,IADE;AAERP,WAAO;AAFC,GA3BZ;AA+BES,cAAY;AACVX,UAAMI,MADI;AAEVF,WAAO;AAFG,GA/Bd;AAmCEU,YAAU;AACRZ,UAAMI,MADE;AAERF,WAAO;AAFC,GAnCZ;AAuCEW,iBAAe;AACbb,UAAMI,MADO;AAEbF,WAAO;AAFM,GAvCjB;AA2CEY,UAAQ;AACNd,UAAMI,MADA;AAENF,WAAO;AAFD,GA3CV;AA+CEF,QAAM;AACJA,UAAMI,MADF;AAEJF,WAAO;AAFH,GA/CR;;AAoDEa,WAAS;AACPf,UAAMS,IADC;AAEPP,WAAO;AAFA,GApDX;AAwDEc,WAAS;AACPhB,UAAMC,MADC;AAEPC,WAAO;AAFA;AAxDX,CAD0B,EA8D1B;AACEe,cAAY;AADd,CA9D0B,CAArB;;AAqEA,MAAMC,0BAAS,mBAASC,KAAT,CAAe,QAAf,EAAyBtB,YAAzB,CAAf;;AAEA,MAAMuB,4BAAU,oBAAoBF,MAApB,CAAhB",
      "file": "events.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\n// TODO: FIXXX\n// TODO: change source type\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\n\nexport const EventsSchema = new mongoose.Schema(\n  {\n    connection: {\n      type: Buffer,\n      index: false\n    },\n    \n    contact_interaction_type: {\n      type: String,\n      index: false\n    },\n    \n    contacts: {\n      type: [Buffer],\n      index: false\n    },\n    content: {\n      type: [Buffer],\n      index: false\n    },\n    context: {\n      type: String,\n      index: false\n    },\n    created: {\n      type: Date,\n      index: false\n    },\n    datetime: {\n      type: Date,\n      index: false\n    },\n    identifier: {\n      type: String,\n      index: false\n    },\n    provider: {\n      type: String,\n      index: false\n    },\n    provider_name: {\n      type: String,\n      index: false\n    },\n    source: {\n      type: String,\n      index: false\n    },\n    type: {\n      type: String,\n      index: false\n    },\n    \n    updated: {\n      type: Date,\n      index: false\n    },\n    user_id: {\n      type: Buffer,\n      index: false\n    },\n  },\n  {\n    collection: 'events',\n  }\n);\n  \n\n  \nexport const Events = mongoose.model('Events', EventsSchema);\n\nexport const EventTC = composeWithMongoose(Events);\n\n"
      ]
    },
    "mtime": 1521691113823
  },
  "{\"filename\":\"/app/schema/models/locations.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "LocationsSchema",
            "Locations",
            "LocationTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "LocationsSchema",
              "exported": "LocationsSchema"
            },
            {
              "kind": "local",
              "local": "Locations",
              "exported": "Locations"
            },
            {
              "kind": "local",
              "local": "LocationTC",
              "exported": "LocationTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/locations.js",
      "filenameRelative": "/app/schema/models/locations.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "locations.js",
      "sourceFileName": "locations.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "locations"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LocationTC = exports.Locations = exports.LocationsSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: FIXXX\n// TODO: geolocation type [Double]\nconst LocationsSchema = exports.LocationsSchema = new _mongoose2.default.Schema({\n  connection: {\n    type: Buffer,\n    index: false\n  },\n  created: {\n    type: Date,\n    index: false\n  },\n  datetime: {\n    type: Date,\n    index: false\n  },\n\n  estimated: {\n    type: Boolean,\n    index: false\n  },\n\n  geo_format: {\n    type: String,\n    index: false\n  },\n  geolocation: {\n    type: [Number],\n    index: false\n  },\n  identifier: {\n    type: String,\n    index: false\n  },\n  updated: {\n    type: Date,\n    index: false\n  },\n\n  user_id: {\n    type: Buffer,\n    index: false\n  }\n}, {\n  collection: 'locations'\n});\n\nconst Locations = exports.Locations = _mongoose2.default.model('Locations', LocationsSchema);\n\nconst LocationTC = exports.LocationTC = (0, _node2.default)(Locations);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2F0aW9ucy5qcyJdLCJuYW1lcyI6WyJMb2NhdGlvbnNTY2hlbWEiLCJTY2hlbWEiLCJjb25uZWN0aW9uIiwidHlwZSIsIkJ1ZmZlciIsImluZGV4IiwiY3JlYXRlZCIsIkRhdGUiLCJkYXRldGltZSIsImVzdGltYXRlZCIsIkJvb2xlYW4iLCJnZW9fZm9ybWF0IiwiU3RyaW5nIiwiZ2VvbG9jYXRpb24iLCJOdW1iZXIiLCJpZGVudGlmaWVyIiwidXBkYXRlZCIsInVzZXJfaWQiLCJjb2xsZWN0aW9uIiwiTG9jYXRpb25zIiwibW9kZWwiLCJMb2NhdGlvblRDIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBSUE7Ozs7QUFDQTs7Ozs7O0FBSEE7QUFDQTtBQUlPLE1BQU1BLDRDQUFrQixJQUFJLG1CQUFTQyxNQUFiLENBQzdCO0FBQ0VDLGNBQVk7QUFDVkMsVUFBTUMsTUFESTtBQUVWQyxXQUFPO0FBRkcsR0FEZDtBQUtFQyxXQUFTO0FBQ1BILFVBQU1JLElBREM7QUFFUEYsV0FBTztBQUZBLEdBTFg7QUFTRUcsWUFBVTtBQUNSTCxVQUFNSSxJQURFO0FBRVJGLFdBQU87QUFGQyxHQVRaOztBQWNFSSxhQUFXO0FBQ1ROLFVBQU1PLE9BREc7QUFFVEwsV0FBTztBQUZFLEdBZGI7O0FBbUJFTSxjQUFZO0FBQ1ZSLFVBQU1TLE1BREk7QUFFVlAsV0FBTztBQUZHLEdBbkJkO0FBdUJFUSxlQUFhO0FBQ1hWLFVBQU0sQ0FBQ1csTUFBRCxDQURLO0FBRVhULFdBQU87QUFGSSxHQXZCZjtBQTJCRVUsY0FBWTtBQUNWWixVQUFNUyxNQURJO0FBRVZQLFdBQU87QUFGRyxHQTNCZDtBQStCRVcsV0FBUztBQUNQYixVQUFNSSxJQURDO0FBRVBGLFdBQU87QUFGQSxHQS9CWDs7QUFvQ0VZLFdBQVM7QUFDUGQsVUFBTUMsTUFEQztBQUVQQyxXQUFPO0FBRkE7QUFwQ1gsQ0FENkIsRUEwQzdCO0FBQ0VhLGNBQVk7QUFEZCxDQTFDNkIsQ0FBeEI7O0FBZ0RBLE1BQU1DLGdDQUFZLG1CQUFTQyxLQUFULENBQWUsV0FBZixFQUE0QnBCLGVBQTVCLENBQWxCOztBQUVBLE1BQU1xQixrQ0FBYSxvQkFBb0JGLFNBQXBCLENBQW5CIiwiZmlsZSI6ImxvY2F0aW9ucy5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NjaGVtYS9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG4vLyBUT0RPOiBGSVhYWFxuLy8gVE9ETzogZ2VvbG9jYXRpb24gdHlwZSBbRG91YmxlXVxuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBjb21wb3NlV2l0aE1vbmdvb3NlIGZyb20gJ2dyYXBocWwtY29tcG9zZS1tb25nb29zZS9ub2RlOCc7XG5cbmV4cG9ydCBjb25zdCBMb2NhdGlvbnNTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgY29ubmVjdGlvbjoge1xuICAgICAgdHlwZTogQnVmZmVyLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBjcmVhdGVkOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBkYXRldGltZToge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgXG4gICAgZXN0aW1hdGVkOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICBnZW9fZm9ybWF0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGdlb2xvY2F0aW9uOiB7XG4gICAgICB0eXBlOiBbTnVtYmVyXSxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgaWRlbnRpZmllcjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICB1cGRhdGVkOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBcbiAgICB1c2VyX2lkOiB7XG4gICAgICB0eXBlOiBCdWZmZXIsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY29sbGVjdGlvbjogJ2xvY2F0aW9ucycsXG4gIH1cbik7XG4gIFxuICBcbmV4cG9ydCBjb25zdCBMb2NhdGlvbnMgPSBtb25nb29zZS5tb2RlbCgnTG9jYXRpb25zJywgTG9jYXRpb25zU2NoZW1hKTtcblxuZXhwb3J0IGNvbnN0IExvY2F0aW9uVEMgPSBjb21wb3NlV2l0aE1vbmdvb3NlKExvY2F0aW9ucyk7XG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "locations.js"
      ],
      "names": [
        "LocationsSchema",
        "Schema",
        "connection",
        "type",
        "Buffer",
        "index",
        "created",
        "Date",
        "datetime",
        "estimated",
        "Boolean",
        "geo_format",
        "String",
        "geolocation",
        "Number",
        "identifier",
        "updated",
        "user_id",
        "collection",
        "Locations",
        "model",
        "LocationTC"
      ],
      "mappings": ";;;;;;;AAIA;;;;AACA;;;;;;AAHA;AACA;AAIO,MAAMA,4CAAkB,IAAI,mBAASC,MAAb,CAC7B;AACEC,cAAY;AACVC,UAAMC,MADI;AAEVC,WAAO;AAFG,GADd;AAKEC,WAAS;AACPH,UAAMI,IADC;AAEPF,WAAO;AAFA,GALX;AASEG,YAAU;AACRL,UAAMI,IADE;AAERF,WAAO;AAFC,GATZ;;AAcEI,aAAW;AACTN,UAAMO,OADG;AAETL,WAAO;AAFE,GAdb;;AAmBEM,cAAY;AACVR,UAAMS,MADI;AAEVP,WAAO;AAFG,GAnBd;AAuBEQ,eAAa;AACXV,UAAM,CAACW,MAAD,CADK;AAEXT,WAAO;AAFI,GAvBf;AA2BEU,cAAY;AACVZ,UAAMS,MADI;AAEVP,WAAO;AAFG,GA3Bd;AA+BEW,WAAS;AACPb,UAAMI,IADC;AAEPF,WAAO;AAFA,GA/BX;;AAoCEY,WAAS;AACPd,UAAMC,MADC;AAEPC,WAAO;AAFA;AApCX,CAD6B,EA0C7B;AACEa,cAAY;AADd,CA1C6B,CAAxB;;AAgDA,MAAMC,gCAAY,mBAASC,KAAT,CAAe,WAAf,EAA4BpB,eAA5B,CAAlB;;AAEA,MAAMqB,kCAAa,oBAAoBF,SAApB,CAAnB",
      "file": "locations.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\n// TODO: FIXXX\n// TODO: geolocation type [Double]\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\n\nexport const LocationsSchema = new mongoose.Schema(\n  {\n    connection: {\n      type: Buffer,\n      index: false\n    },\n    created: {\n      type: Date,\n      index: false\n    },\n    datetime: {\n      type: Date,\n      index: false\n    },\n    \n    estimated: {\n      type: Boolean,\n      index: false\n    },\n    \n    geo_format: {\n      type: String,\n      index: false\n    },\n    geolocation: {\n      type: [Number],\n      index: false\n    },\n    identifier: {\n      type: String,\n      index: false\n    },\n    updated: {\n      type: Date,\n      index: false\n    },\n    \n    user_id: {\n      type: Buffer,\n      index: false\n    },\n  },\n  {\n    collection: 'locations',\n  }\n);\n  \n  \nexport const Locations = mongoose.model('Locations', LocationsSchema);\n\nexport const LocationTC = composeWithMongoose(Locations);\n\n"
      ]
    },
    "mtime": 1521691236822
  },
  "{\"filename\":\"/app/schema/models/providers.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../../lib/types/uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          },
          {
            "source": "uuid/v4",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "nodeUUID"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ProvidersSchema",
            "Providers",
            "ProviderTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ProvidersSchema",
              "exported": "ProvidersSchema"
            },
            {
              "kind": "local",
              "local": "Providers",
              "exported": "Providers"
            },
            {
              "kind": "local",
              "local": "ProviderTC",
              "exported": "ProviderTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/providers.js",
      "filenameRelative": "/app/schema/models/providers.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "providers.js",
      "sourceFileName": "providers.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "providers"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ProviderTC = exports.Providers = exports.ProvidersSchema = undefined;\n\nvar _uuid = require('../../lib/types/uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: FIXXX\nconst ProvidersSchema = exports.ProvidersSchema = new _mongoose2.default.Schema({\n  _id: {\n    type: Buffer\n  },\n  id: {\n    type: String,\n    get: function get() {\n      if (this._id) {\n        return this._id.toString('hex');\n      }\n    },\n    set: function set(val) {\n      if (this._conditions && this._conditions.id) {\n        this._conditions._id = (0, _uuid2.default)(val);\n\n        delete this._conditions.id;\n      }\n\n      this._id = (0, _uuid2.default)(val);\n    }\n  },\n  sources: {\n    type: Object\n  },\n  remote_map_id: {\n    type: Buffer\n  },\n  remote_map_id_sttring: {\n    type: String,\n    get: function get() {\n      if (this.remote_map_id) {\n        return this.remote_map_id.toString('hex');\n      }\n    },\n    set: function set(val) {\n      if (this._conditions && this._conditions.remote_map_id_string) {\n        this._conditions.remote_map_id = (0, _uuid2.default)(val);\n\n        delete this._conditions.remote_map_id_string;\n      }\n\n      this.remote_map_id = (0, _uuid2.default)(val);\n    }\n  }\n}, {\n  collection: 'providers'\n});\n\nconst Providers = exports.Providers = _mongoose2.default.model('Providers', ProvidersSchema);\n\nconst ProviderTC = exports.ProviderTC = (0, _node2.default)(Providers);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb3ZpZGVycy5qcyJdLCJuYW1lcyI6WyJQcm92aWRlcnNTY2hlbWEiLCJTY2hlbWEiLCJfaWQiLCJ0eXBlIiwiQnVmZmVyIiwiaWQiLCJTdHJpbmciLCJnZXQiLCJ0b1N0cmluZyIsInNldCIsInZhbCIsIl9jb25kaXRpb25zIiwic291cmNlcyIsIk9iamVjdCIsInJlbW90ZV9tYXBfaWQiLCJyZW1vdGVfbWFwX2lkX3N0dHJpbmciLCJyZW1vdGVfbWFwX2lkX3N0cmluZyIsImNvbGxlY3Rpb24iLCJQcm92aWRlcnMiLCJtb2RlbCIsIlByb3ZpZGVyVEMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7Ozs7O0FBTEE7QUFPTyxNQUFNQSw0Q0FBa0IsSUFBSSxtQkFBU0MsTUFBYixDQUM3QjtBQUNFQyxPQUFLO0FBQ0hDLFVBQU1DO0FBREgsR0FEUDtBQUlFQyxNQUFJO0FBQ0ZGLFVBQU1HLE1BREo7QUFFRkMsU0FBSyxlQUFXO0FBQ2QsVUFBSSxLQUFLTCxHQUFULEVBQWM7QUFDWixlQUFPLEtBQUtBLEdBQUwsQ0FBU00sUUFBVCxDQUFrQixLQUFsQixDQUFQO0FBQ0Q7QUFDRixLQU5DO0FBT0ZDLFNBQUssYUFBU0MsR0FBVCxFQUFjO0FBQ2pCLFVBQUksS0FBS0MsV0FBTCxJQUFvQixLQUFLQSxXQUFMLENBQWlCTixFQUF6QyxFQUE2QztBQUMzQyxhQUFLTSxXQUFMLENBQWlCVCxHQUFqQixHQUF1QixvQkFBS1EsR0FBTCxDQUF2Qjs7QUFFQSxlQUFPLEtBQUtDLFdBQUwsQ0FBaUJOLEVBQXhCO0FBQ0Q7O0FBRUQsV0FBS0gsR0FBTCxHQUFXLG9CQUFLUSxHQUFMLENBQVg7QUFDRDtBQWZDLEdBSk47QUFxQkVFLFdBQVM7QUFDUFQsVUFBTVU7QUFEQyxHQXJCWDtBQXdCRUMsaUJBQWU7QUFDYlgsVUFBTUM7QUFETyxHQXhCakI7QUEyQkVXLHlCQUF1QjtBQUNyQlosVUFBTUcsTUFEZTtBQUVyQkMsU0FBSyxlQUFXO0FBQ2QsVUFBSSxLQUFLTyxhQUFULEVBQXdCO0FBQ3RCLGVBQU8sS0FBS0EsYUFBTCxDQUFtQk4sUUFBbkIsQ0FBNEIsS0FBNUIsQ0FBUDtBQUNEO0FBQ0YsS0FOb0I7QUFPckJDLFNBQUssYUFBU0MsR0FBVCxFQUFjO0FBQ2pCLFVBQUksS0FBS0MsV0FBTCxJQUFvQixLQUFLQSxXQUFMLENBQWlCSyxvQkFBekMsRUFBK0Q7QUFDN0QsYUFBS0wsV0FBTCxDQUFpQkcsYUFBakIsR0FBaUMsb0JBQUtKLEdBQUwsQ0FBakM7O0FBRUEsZUFBTyxLQUFLQyxXQUFMLENBQWlCSyxvQkFBeEI7QUFDRDs7QUFFRCxXQUFLRixhQUFMLEdBQXFCLG9CQUFLSixHQUFMLENBQXJCO0FBQ0Q7QUFmb0I7QUEzQnpCLENBRDZCLEVBOEM3QjtBQUNFTyxjQUFZO0FBRGQsQ0E5QzZCLENBQXhCOztBQW1EQSxNQUFNQyxnQ0FBWSxtQkFBU0MsS0FBVCxDQUFlLFdBQWYsRUFBNEJuQixlQUE1QixDQUFsQjs7QUFFQSxNQUFNb0Isa0NBQWEsb0JBQW9CRixTQUFwQixDQUFuQiIsImZpbGUiOiJwcm92aWRlcnMuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuLy8gVE9ETzogRklYWFhcbmltcG9ydCB1dWlkIGZyb20gJy4uLy4uL2xpYi90eXBlcy91dWlkJztcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY29tcG9zZVdpdGhNb25nb29zZSBmcm9tICdncmFwaHFsLWNvbXBvc2UtbW9uZ29vc2Uvbm9kZTgnO1xuXG5pbXBvcnQgbm9kZVVVSUQgZnJvbSAndXVpZC92NCc7XG5cbmV4cG9ydCBjb25zdCBQcm92aWRlcnNTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgX2lkOiB7XG4gICAgICB0eXBlOiBCdWZmZXJcbiAgICB9LFxuICAgIGlkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5faWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5faWQudG9TdHJpbmcoJ2hleCcpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmRpdGlvbnMgJiYgdGhpcy5fY29uZGl0aW9ucy5pZCkge1xuICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbnMuX2lkID0gdXVpZCh2YWwpO1xuICAgICAgICAgIFxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jb25kaXRpb25zLmlkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pZCA9IHV1aWQodmFsKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHNvdXJjZXM6IHtcbiAgICAgIHR5cGU6IE9iamVjdFxuICAgIH0sXG4gICAgcmVtb3RlX21hcF9pZDoge1xuICAgICAgdHlwZTogQnVmZmVyXG4gICAgfSxcbiAgICByZW1vdGVfbWFwX2lkX3N0dHJpbmc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW90ZV9tYXBfaWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVfbWFwX2lkLnRvU3RyaW5nKCdoZXgnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb25kaXRpb25zICYmIHRoaXMuX2NvbmRpdGlvbnMucmVtb3RlX21hcF9pZF9zdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLl9jb25kaXRpb25zLnJlbW90ZV9tYXBfaWQgPSB1dWlkKHZhbCk7XG4gICAgICAgICAgXG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2NvbmRpdGlvbnMucmVtb3RlX21hcF9pZF9zdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVtb3RlX21hcF9pZCA9IHV1aWQodmFsKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHtcbiAgICBjb2xsZWN0aW9uOiAncHJvdmlkZXJzJyxcbiAgfVxuKTtcbiAgXG5leHBvcnQgY29uc3QgUHJvdmlkZXJzID0gbW9uZ29vc2UubW9kZWwoJ1Byb3ZpZGVycycsIFByb3ZpZGVyc1NjaGVtYSk7XG5cbmV4cG9ydCBjb25zdCBQcm92aWRlclRDID0gY29tcG9zZVdpdGhNb25nb29zZShQcm92aWRlcnMpO1xuXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "providers.js"
      ],
      "names": [
        "ProvidersSchema",
        "Schema",
        "_id",
        "type",
        "Buffer",
        "id",
        "String",
        "get",
        "toString",
        "set",
        "val",
        "_conditions",
        "sources",
        "Object",
        "remote_map_id",
        "remote_map_id_sttring",
        "remote_map_id_string",
        "collection",
        "Providers",
        "model",
        "ProviderTC"
      ],
      "mappings": ";;;;;;;AAGA;;;;AACA;;;;AACA;;;;AAEA;;;;;;AALA;AAOO,MAAMA,4CAAkB,IAAI,mBAASC,MAAb,CAC7B;AACEC,OAAK;AACHC,UAAMC;AADH,GADP;AAIEC,MAAI;AACFF,UAAMG,MADJ;AAEFC,SAAK,eAAW;AACd,UAAI,KAAKL,GAAT,EAAc;AACZ,eAAO,KAAKA,GAAL,CAASM,QAAT,CAAkB,KAAlB,CAAP;AACD;AACF,KANC;AAOFC,SAAK,aAASC,GAAT,EAAc;AACjB,UAAI,KAAKC,WAAL,IAAoB,KAAKA,WAAL,CAAiBN,EAAzC,EAA6C;AAC3C,aAAKM,WAAL,CAAiBT,GAAjB,GAAuB,oBAAKQ,GAAL,CAAvB;;AAEA,eAAO,KAAKC,WAAL,CAAiBN,EAAxB;AACD;;AAED,WAAKH,GAAL,GAAW,oBAAKQ,GAAL,CAAX;AACD;AAfC,GAJN;AAqBEE,WAAS;AACPT,UAAMU;AADC,GArBX;AAwBEC,iBAAe;AACbX,UAAMC;AADO,GAxBjB;AA2BEW,yBAAuB;AACrBZ,UAAMG,MADe;AAErBC,SAAK,eAAW;AACd,UAAI,KAAKO,aAAT,EAAwB;AACtB,eAAO,KAAKA,aAAL,CAAmBN,QAAnB,CAA4B,KAA5B,CAAP;AACD;AACF,KANoB;AAOrBC,SAAK,aAASC,GAAT,EAAc;AACjB,UAAI,KAAKC,WAAL,IAAoB,KAAKA,WAAL,CAAiBK,oBAAzC,EAA+D;AAC7D,aAAKL,WAAL,CAAiBG,aAAjB,GAAiC,oBAAKJ,GAAL,CAAjC;;AAEA,eAAO,KAAKC,WAAL,CAAiBK,oBAAxB;AACD;;AAED,WAAKF,aAAL,GAAqB,oBAAKJ,GAAL,CAArB;AACD;AAfoB;AA3BzB,CAD6B,EA8C7B;AACEO,cAAY;AADd,CA9C6B,CAAxB;;AAmDA,MAAMC,gCAAY,mBAASC,KAAT,CAAe,WAAf,EAA4BnB,eAA5B,CAAlB;;AAEA,MAAMoB,kCAAa,oBAAoBF,SAApB,CAAnB",
      "file": "providers.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\n// TODO: FIXXX\nimport uuid from '../../lib/types/uuid';\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\n\nimport nodeUUID from 'uuid/v4';\n\nexport const ProvidersSchema = new mongoose.Schema(\n  {\n    _id: {\n      type: Buffer\n    },\n    id: {\n      type: String,\n      get: function() {\n        if (this._id) {\n          return this._id.toString('hex');\n        }\n      },\n      set: function(val) {\n        if (this._conditions && this._conditions.id) {\n          this._conditions._id = uuid(val);\n          \n          delete this._conditions.id;\n        }\n        \n        this._id = uuid(val);\n      }\n    },\n    sources: {\n      type: Object\n    },\n    remote_map_id: {\n      type: Buffer\n    },\n    remote_map_id_sttring: {\n      type: String,\n      get: function() {\n        if (this.remote_map_id) {\n          return this.remote_map_id.toString('hex');\n        }\n      },\n      set: function(val) {\n        if (this._conditions && this._conditions.remote_map_id_string) {\n          this._conditions.remote_map_id = uuid(val);\n          \n          delete this._conditions.remote_map_id_string;\n        }\n        \n        this.remote_map_id = uuid(val);\n      }\n    }\n  },\n  {\n    collection: 'providers',\n  }\n);\n  \nexport const Providers = mongoose.model('Providers', ProvidersSchema);\n\nexport const ProviderTC = composeWithMongoose(Providers);\n\n"
      ]
    },
    "mtime": 1521767380825
  },
  "{\"filename\":\"/app/schema/models/searches.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "SearchesSchema",
            "Searches",
            "SearchTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "SearchesSchema",
              "exported": "SearchesSchema"
            },
            {
              "kind": "local",
              "local": "Searches",
              "exported": "Searches"
            },
            {
              "kind": "local",
              "local": "SearchTC",
              "exported": "SearchTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/searches.js",
      "filenameRelative": "/app/schema/models/searches.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "searches.js",
      "sourceFileName": "searches.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "searches"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SearchTC = exports.Searches = exports.SearchesSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: FIXXX\n// TODO: rename relative-number and since-exactly to get rid of -\nconst SearchesSchema = exports.SearchesSchema = new _mongoose2.default.Schema({\n  count: {\n    type: Number,\n    index: false\n  },\n  favorited: {\n    type: Boolean,\n    index: false\n  },\n  filters: {\n    data: {\n      connection: {\n        type: String,\n        index: false\n      },\n      contact: {\n        type: String,\n        index: false\n      },\n      from: {\n        type: String,\n        index: false\n      },\n      interaction: {\n        type: String,\n        index: false\n      },\n      provider: {\n        type: String,\n        index: false\n      },\n      'relative-number': {\n        type: String,\n        index: false\n      },\n      'since-exactly': {\n        type: String,\n        index: false\n      },\n      to: {\n        type: String,\n        index: false\n      },\n      type: {\n        type: String,\n        index: false\n      },\n      units: {\n        type: String,\n        index: false\n      }\n    },\n    name: {\n      type: String,\n      index: false\n    },\n    type: {\n      type: String,\n      index: false\n    }\n  },\n  hash: {\n    type: String,\n    index: false\n  },\n  icon: {\n    type: String,\n    index: false\n  },\n  icon_color: {\n    type: String,\n    index: false\n  },\n  last_run: {\n    type: Date,\n    index: false\n  },\n  name: {\n    type: String,\n    index: false\n  },\n  query: {\n    type: String,\n    index: false\n  },\n  user_id: {\n    type: Buffer,\n    index: false\n  }\n\n}, {\n  collection: 'searches'\n});\n\nconst Searches = exports.Searches = _mongoose2.default.model('Searches', SearchesSchema);\n\nconst SearchTC = exports.SearchTC = (0, _node2.default)(Searches);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlYXJjaGVzLmpzIl0sIm5hbWVzIjpbIlNlYXJjaGVzU2NoZW1hIiwiU2NoZW1hIiwiY291bnQiLCJ0eXBlIiwiTnVtYmVyIiwiaW5kZXgiLCJmYXZvcml0ZWQiLCJCb29sZWFuIiwiZmlsdGVycyIsImRhdGEiLCJjb25uZWN0aW9uIiwiU3RyaW5nIiwiY29udGFjdCIsImZyb20iLCJpbnRlcmFjdGlvbiIsInByb3ZpZGVyIiwidG8iLCJ1bml0cyIsIm5hbWUiLCJoYXNoIiwiaWNvbiIsImljb25fY29sb3IiLCJsYXN0X3J1biIsIkRhdGUiLCJxdWVyeSIsInVzZXJfaWQiLCJCdWZmZXIiLCJjb2xsZWN0aW9uIiwiU2VhcmNoZXMiLCJtb2RlbCIsIlNlYXJjaFRDIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBSUE7Ozs7QUFDQTs7Ozs7O0FBSEE7QUFDQTtBQUlPLE1BQU1BLDBDQUFpQixJQUFJLG1CQUFTQyxNQUFiLENBQzVCO0FBQ0VDLFNBQU87QUFDTEMsVUFBTUMsTUFERDtBQUVMQyxXQUFPO0FBRkYsR0FEVDtBQUtFQyxhQUFXO0FBQ1RILFVBQU1JLE9BREc7QUFFVEYsV0FBTztBQUZFLEdBTGI7QUFTRUcsV0FBUztBQUNQQyxVQUFNO0FBQ0pDLGtCQUFZO0FBQ1ZQLGNBQU1RLE1BREk7QUFFVk4sZUFBTztBQUZHLE9BRFI7QUFLSk8sZUFBUztBQUNQVCxjQUFNUSxNQURDO0FBRVBOLGVBQU87QUFGQSxPQUxMO0FBU0pRLFlBQU07QUFDSlYsY0FBTVEsTUFERjtBQUVKTixlQUFPO0FBRkgsT0FURjtBQWFKUyxtQkFBYTtBQUNYWCxjQUFNUSxNQURLO0FBRVhOLGVBQU87QUFGSSxPQWJUO0FBaUJKVSxnQkFBVTtBQUNSWixjQUFNUSxNQURFO0FBRVJOLGVBQU87QUFGQyxPQWpCTjtBQXFCSix5QkFBbUI7QUFDakJGLGNBQU1RLE1BRFc7QUFFakJOLGVBQU87QUFGVSxPQXJCZjtBQXlCSix1QkFBaUI7QUFDZkYsY0FBTVEsTUFEUztBQUVmTixlQUFPO0FBRlEsT0F6QmI7QUE2QkpXLFVBQUk7QUFDRmIsY0FBTVEsTUFESjtBQUVGTixlQUFPO0FBRkwsT0E3QkE7QUFpQ0pGLFlBQU07QUFDSkEsY0FBTVEsTUFERjtBQUVKTixlQUFPO0FBRkgsT0FqQ0Y7QUFxQ0pZLGFBQU87QUFDTGQsY0FBTVEsTUFERDtBQUVMTixlQUFPO0FBRkY7QUFyQ0gsS0FEQztBQTJDUGEsVUFBTTtBQUNKZixZQUFNUSxNQURGO0FBRUpOLGFBQU87QUFGSCxLQTNDQztBQStDUEYsVUFBTTtBQUNKQSxZQUFNUSxNQURGO0FBRUpOLGFBQU87QUFGSDtBQS9DQyxHQVRYO0FBNkRFYyxRQUFNO0FBQ0poQixVQUFNUSxNQURGO0FBRUpOLFdBQU87QUFGSCxHQTdEUjtBQWlFRWUsUUFBTTtBQUNKakIsVUFBTVEsTUFERjtBQUVKTixXQUFPO0FBRkgsR0FqRVI7QUFxRUVnQixjQUFZO0FBQ1ZsQixVQUFNUSxNQURJO0FBRVZOLFdBQU87QUFGRyxHQXJFZDtBQXlFRWlCLFlBQVU7QUFDUm5CLFVBQU1vQixJQURFO0FBRVJsQixXQUFPO0FBRkMsR0F6RVo7QUE2RUVhLFFBQU07QUFDSmYsVUFBTVEsTUFERjtBQUVKTixXQUFPO0FBRkgsR0E3RVI7QUFpRkVtQixTQUFPO0FBQ0xyQixVQUFNUSxNQUREO0FBRUxOLFdBQU87QUFGRixHQWpGVDtBQXFGRW9CLFdBQVM7QUFDUHRCLFVBQU11QixNQURDO0FBRVByQixXQUFPO0FBRkE7O0FBckZYLENBRDRCLEVBNEY1QjtBQUNFc0IsY0FBWTtBQURkLENBNUY0QixDQUF2Qjs7QUFpR0EsTUFBTUMsOEJBQVcsbUJBQVNDLEtBQVQsQ0FBZSxVQUFmLEVBQTJCN0IsY0FBM0IsQ0FBakI7O0FBRUEsTUFBTThCLDhCQUFXLG9CQUFvQkYsUUFBcEIsQ0FBakIiLCJmaWxlIjoic2VhcmNoZXMuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuLy8gVE9ETzogRklYWFhcbi8vIFRPRE86IHJlbmFtZSByZWxhdGl2ZS1udW1iZXIgYW5kIHNpbmNlLWV4YWN0bHkgdG8gZ2V0IHJpZCBvZiAtXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IGNvbXBvc2VXaXRoTW9uZ29vc2UgZnJvbSAnZ3JhcGhxbC1jb21wb3NlLW1vbmdvb3NlL25vZGU4JztcblxuZXhwb3J0IGNvbnN0IFNlYXJjaGVzU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIGNvdW50OiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGZhdm9yaXRlZDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgZmlsdGVyczoge1xuICAgICAgZGF0YToge1xuICAgICAgICBjb25uZWN0aW9uOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBjb250YWN0OiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBmcm9tOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBpbnRlcmFjdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgcHJvdmlkZXI6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgICdyZWxhdGl2ZS1udW1iZXInOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICAnc2luY2UtZXhhY3RseSc6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHRvOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICB1bml0czoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICBpbmRleDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBuYW1lOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICB9LFxuICAgICAgdHlwZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGluZGV4OiBmYWxzZVxuICAgICAgfSxcbiAgICB9LFxuICAgIGhhc2g6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgaWNvbjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBpY29uX2NvbG9yOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIGxhc3RfcnVuOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBuYW1lOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHF1ZXJ5OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgIHR5cGU6IEJ1ZmZlcixcbiAgICAgIGluZGV4OiBmYWxzZVxuICAgIH0sXG4gICAgICBcbiAgfSxcbiAge1xuICAgIGNvbGxlY3Rpb246ICdzZWFyY2hlcycsXG4gIH1cbik7XG4gIFxuZXhwb3J0IGNvbnN0IFNlYXJjaGVzID0gbW9uZ29vc2UubW9kZWwoJ1NlYXJjaGVzJywgU2VhcmNoZXNTY2hlbWEpO1xuXG5leHBvcnQgY29uc3QgU2VhcmNoVEMgPSBjb21wb3NlV2l0aE1vbmdvb3NlKFNlYXJjaGVzKTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "searches.js"
      ],
      "names": [
        "SearchesSchema",
        "Schema",
        "count",
        "type",
        "Number",
        "index",
        "favorited",
        "Boolean",
        "filters",
        "data",
        "connection",
        "String",
        "contact",
        "from",
        "interaction",
        "provider",
        "to",
        "units",
        "name",
        "hash",
        "icon",
        "icon_color",
        "last_run",
        "Date",
        "query",
        "user_id",
        "Buffer",
        "collection",
        "Searches",
        "model",
        "SearchTC"
      ],
      "mappings": ";;;;;;;AAIA;;;;AACA;;;;;;AAHA;AACA;AAIO,MAAMA,0CAAiB,IAAI,mBAASC,MAAb,CAC5B;AACEC,SAAO;AACLC,UAAMC,MADD;AAELC,WAAO;AAFF,GADT;AAKEC,aAAW;AACTH,UAAMI,OADG;AAETF,WAAO;AAFE,GALb;AASEG,WAAS;AACPC,UAAM;AACJC,kBAAY;AACVP,cAAMQ,MADI;AAEVN,eAAO;AAFG,OADR;AAKJO,eAAS;AACPT,cAAMQ,MADC;AAEPN,eAAO;AAFA,OALL;AASJQ,YAAM;AACJV,cAAMQ,MADF;AAEJN,eAAO;AAFH,OATF;AAaJS,mBAAa;AACXX,cAAMQ,MADK;AAEXN,eAAO;AAFI,OAbT;AAiBJU,gBAAU;AACRZ,cAAMQ,MADE;AAERN,eAAO;AAFC,OAjBN;AAqBJ,yBAAmB;AACjBF,cAAMQ,MADW;AAEjBN,eAAO;AAFU,OArBf;AAyBJ,uBAAiB;AACfF,cAAMQ,MADS;AAEfN,eAAO;AAFQ,OAzBb;AA6BJW,UAAI;AACFb,cAAMQ,MADJ;AAEFN,eAAO;AAFL,OA7BA;AAiCJF,YAAM;AACJA,cAAMQ,MADF;AAEJN,eAAO;AAFH,OAjCF;AAqCJY,aAAO;AACLd,cAAMQ,MADD;AAELN,eAAO;AAFF;AArCH,KADC;AA2CPa,UAAM;AACJf,YAAMQ,MADF;AAEJN,aAAO;AAFH,KA3CC;AA+CPF,UAAM;AACJA,YAAMQ,MADF;AAEJN,aAAO;AAFH;AA/CC,GATX;AA6DEc,QAAM;AACJhB,UAAMQ,MADF;AAEJN,WAAO;AAFH,GA7DR;AAiEEe,QAAM;AACJjB,UAAMQ,MADF;AAEJN,WAAO;AAFH,GAjER;AAqEEgB,cAAY;AACVlB,UAAMQ,MADI;AAEVN,WAAO;AAFG,GArEd;AAyEEiB,YAAU;AACRnB,UAAMoB,IADE;AAERlB,WAAO;AAFC,GAzEZ;AA6EEa,QAAM;AACJf,UAAMQ,MADF;AAEJN,WAAO;AAFH,GA7ER;AAiFEmB,SAAO;AACLrB,UAAMQ,MADD;AAELN,WAAO;AAFF,GAjFT;AAqFEoB,WAAS;AACPtB,UAAMuB,MADC;AAEPrB,WAAO;AAFA;;AArFX,CAD4B,EA4F5B;AACEsB,cAAY;AADd,CA5F4B,CAAvB;;AAiGA,MAAMC,8BAAW,mBAASC,KAAT,CAAe,UAAf,EAA2B7B,cAA3B,CAAjB;;AAEA,MAAM8B,8BAAW,oBAAoBF,QAApB,CAAjB",
      "file": "searches.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\n// TODO: FIXXX\n// TODO: rename relative-number and since-exactly to get rid of -\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\n\nexport const SearchesSchema = new mongoose.Schema(\n  {\n    count: {\n      type: Number,\n      index: false\n    },\n    favorited: {\n      type: Boolean,\n      index: false\n    },\n    filters: {\n      data: {\n        connection: {\n          type: String,\n          index: false\n        },\n        contact: {\n          type: String,\n          index: false\n        },\n        from: {\n          type: String,\n          index: false\n        },\n        interaction: {\n          type: String,\n          index: false\n        },\n        provider: {\n          type: String,\n          index: false\n        },\n        'relative-number': {\n          type: String,\n          index: false\n        },\n        'since-exactly': {\n          type: String,\n          index: false\n        },\n        to: {\n          type: String,\n          index: false\n        },\n        type: {\n          type: String,\n          index: false\n        },\n        units: {\n          type: String,\n          index: false\n        },\n      },\n      name: {\n        type: String,\n        index: false\n      },\n      type: {\n        type: String,\n        index: false\n      },\n    },\n    hash: {\n      type: String,\n      index: false\n    },\n    icon: {\n      type: String,\n      index: false\n    },\n    icon_color: {\n      type: String,\n      index: false\n    },\n    last_run: {\n      type: Date,\n      index: false\n    },\n    name: {\n      type: String,\n      index: false\n    },\n    query: {\n      type: String,\n      index: false\n    },\n    user_id: {\n      type: Buffer,\n      index: false\n    },\n      \n  },\n  {\n    collection: 'searches',\n  }\n);\n  \nexport const Searches = mongoose.model('Searches', SearchesSchema);\n\nexport const SearchTC = composeWithMongoose(Searches);"
      ]
    },
    "mtime": 1521691368826
  },
  "{\"filename\":\"/app/schema/models/tags.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "TagsSchema",
            "Tags",
            "TagTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "TagsSchema",
              "exported": "TagsSchema"
            },
            {
              "kind": "local",
              "local": "Tags",
              "exported": "Tags"
            },
            {
              "kind": "local",
              "local": "TagTC",
              "exported": "TagTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/tags.js",
      "filenameRelative": "/app/schema/models/tags.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "tags.js",
      "sourceFileName": "tags.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "tags"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TagTC = exports.Tags = exports.TagsSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: FIXXX\nconst TagsSchema = exports.TagsSchema = new _mongoose2.default.Schema({\n  created: {\n    type: Date\n  },\n  tag: {\n    type: String\n  },\n  updated: {\n    type: Date\n  },\n  user_id: {\n    type: Buffer\n  }\n}, {\n  collection: 'tags'\n});\n\nconst Tags = exports.Tags = _mongoose2.default.model('Tags', TagsSchema);\n\nconst TagTC = exports.TagTC = (0, _node2.default)(Tags);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhZ3MuanMiXSwibmFtZXMiOlsiVGFnc1NjaGVtYSIsIlNjaGVtYSIsImNyZWF0ZWQiLCJ0eXBlIiwiRGF0ZSIsInRhZyIsIlN0cmluZyIsInVwZGF0ZWQiLCJ1c2VyX2lkIiwiQnVmZmVyIiwiY29sbGVjdGlvbiIsIlRhZ3MiLCJtb2RlbCIsIlRhZ1RDIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR0E7Ozs7QUFDQTs7Ozs7O0FBRkE7QUFJTyxNQUFNQSxrQ0FBYSxJQUFJLG1CQUFTQyxNQUFiLENBQ3hCO0FBQ0VDLFdBQVM7QUFDUEMsVUFBTUM7QUFEQyxHQURYO0FBSUVDLE9BQUs7QUFDSEYsVUFBTUc7QUFESCxHQUpQO0FBT0VDLFdBQVM7QUFDUEosVUFBTUM7QUFEQyxHQVBYO0FBVUVJLFdBQVM7QUFDUEwsVUFBTU07QUFEQztBQVZYLENBRHdCLEVBZXhCO0FBQ0VDLGNBQVk7QUFEZCxDQWZ3QixDQUFuQjs7QUFvQkEsTUFBTUMsc0JBQU8sbUJBQVNDLEtBQVQsQ0FBZSxNQUFmLEVBQXVCWixVQUF2QixDQUFiOztBQUVBLE1BQU1hLHdCQUFRLG9CQUFvQkYsSUFBcEIsQ0FBZCIsImZpbGUiOiJ0YWdzLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NoZW1hL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbi8vIFRPRE86IEZJWFhYXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IGNvbXBvc2VXaXRoTW9uZ29vc2UgZnJvbSAnZ3JhcGhxbC1jb21wb3NlLW1vbmdvb3NlL25vZGU4JztcblxuZXhwb3J0IGNvbnN0IFRhZ3NTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgY3JlYXRlZDoge1xuICAgICAgdHlwZTogRGF0ZVxuICAgIH0sXG4gICAgdGFnOiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIHVwZGF0ZWQ6IHtcbiAgICAgIHR5cGU6IERhdGVcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgIHR5cGU6IEJ1ZmZlclxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjb2xsZWN0aW9uOiAndGFncycsXG4gIH1cbik7XG4gIFxuZXhwb3J0IGNvbnN0IFRhZ3MgPSBtb25nb29zZS5tb2RlbCgnVGFncycsIFRhZ3NTY2hlbWEpO1xuXG5leHBvcnQgY29uc3QgVGFnVEMgPSBjb21wb3NlV2l0aE1vbmdvb3NlKFRhZ3MpOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "tags.js"
      ],
      "names": [
        "TagsSchema",
        "Schema",
        "created",
        "type",
        "Date",
        "tag",
        "String",
        "updated",
        "user_id",
        "Buffer",
        "collection",
        "Tags",
        "model",
        "TagTC"
      ],
      "mappings": ";;;;;;;AAGA;;;;AACA;;;;;;AAFA;AAIO,MAAMA,kCAAa,IAAI,mBAASC,MAAb,CACxB;AACEC,WAAS;AACPC,UAAMC;AADC,GADX;AAIEC,OAAK;AACHF,UAAMG;AADH,GAJP;AAOEC,WAAS;AACPJ,UAAMC;AADC,GAPX;AAUEI,WAAS;AACPL,UAAMM;AADC;AAVX,CADwB,EAexB;AACEC,cAAY;AADd,CAfwB,CAAnB;;AAoBA,MAAMC,sBAAO,mBAASC,KAAT,CAAe,MAAf,EAAuBZ,UAAvB,CAAb;;AAEA,MAAMa,wBAAQ,oBAAoBF,IAApB,CAAd",
      "file": "tags.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\n// TODO: FIXXX\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\n\nexport const TagsSchema = new mongoose.Schema(\n  {\n    created: {\n      type: Date\n    },\n    tag: {\n      type: String\n    },\n    updated: {\n      type: Date\n    },\n    user_id: {\n      type: Buffer\n    },\n  },\n  {\n    collection: 'tags',\n  }\n);\n  \nexport const Tags = mongoose.model('Tags', TagsSchema);\n\nexport const TagTC = composeWithMongoose(Tags);"
      ]
    },
    "mtime": 1521506199112
  },
  "{\"filename\":\"/app/schema/models/things.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ThingsSchema",
            "Things",
            "ThingTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ThingsSchema",
              "exported": "ThingsSchema"
            },
            {
              "kind": "local",
              "local": "Things",
              "exported": "Things"
            },
            {
              "kind": "local",
              "local": "ThingTC",
              "exported": "ThingTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/things.js",
      "filenameRelative": "/app/schema/models/things.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "things.js",
      "sourceFileName": "things.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "things"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ThingTC = exports.Things = exports.ThingsSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: FIXXX\nconst ThingsSchema = exports.ThingsSchema = new _mongoose2.default.Schema({}, {\n  collection: 'things'\n});\n\nconst Things = exports.Things = _mongoose2.default.model('Things', ThingsSchema);\n\nconst ThingTC = exports.ThingTC = (0, _node2.default)(Things);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRoaW5ncy5qcyJdLCJuYW1lcyI6WyJUaGluZ3NTY2hlbWEiLCJTY2hlbWEiLCJjb2xsZWN0aW9uIiwiVGhpbmdzIiwibW9kZWwiLCJUaGluZ1RDIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR0E7Ozs7QUFDQTs7Ozs7O0FBRkE7QUFJTyxNQUFNQSxzQ0FBZSxJQUFJLG1CQUFTQyxNQUFiLENBQzFCLEVBRDBCLEVBRzFCO0FBQ0VDLGNBQVk7QUFEZCxDQUgwQixDQUFyQjs7QUFRQSxNQUFNQywwQkFBUyxtQkFBU0MsS0FBVCxDQUFlLFFBQWYsRUFBeUJKLFlBQXpCLENBQWY7O0FBRUEsTUFBTUssNEJBQVUsb0JBQW9CRixNQUFwQixDQUFoQiIsImZpbGUiOiJ0aGluZ3MuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuLy8gVE9ETzogRklYWFhcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY29tcG9zZVdpdGhNb25nb29zZSBmcm9tICdncmFwaHFsLWNvbXBvc2UtbW9uZ29vc2Uvbm9kZTgnO1xuXG5leHBvcnQgY29uc3QgVGhpbmdzU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICB9LFxuICB7XG4gICAgY29sbGVjdGlvbjogJ3RoaW5ncycsXG4gIH1cbik7XG4gIFxuZXhwb3J0IGNvbnN0IFRoaW5ncyA9IG1vbmdvb3NlLm1vZGVsKCdUaGluZ3MnLCBUaGluZ3NTY2hlbWEpO1xuXG5leHBvcnQgY29uc3QgVGhpbmdUQyA9IGNvbXBvc2VXaXRoTW9uZ29vc2UoVGhpbmdzKTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "things.js"
      ],
      "names": [
        "ThingsSchema",
        "Schema",
        "collection",
        "Things",
        "model",
        "ThingTC"
      ],
      "mappings": ";;;;;;;AAGA;;;;AACA;;;;;;AAFA;AAIO,MAAMA,sCAAe,IAAI,mBAASC,MAAb,CAC1B,EAD0B,EAG1B;AACEC,cAAY;AADd,CAH0B,CAArB;;AAQA,MAAMC,0BAAS,mBAASC,KAAT,CAAe,QAAf,EAAyBJ,YAAzB,CAAf;;AAEA,MAAMK,4BAAU,oBAAoBF,MAApB,CAAhB",
      "file": "things.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\n// TODO: FIXXX\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\n\nexport const ThingsSchema = new mongoose.Schema(\n  {\n  },\n  {\n    collection: 'things',\n  }\n);\n  \nexport const Things = mongoose.model('Things', ThingsSchema);\n\nexport const ThingTC = composeWithMongoose(Things);"
      ]
    },
    "mtime": 1521506250971
  },
  "{\"filename\":\"/app/lib/validator.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "ajv",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Validator"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "json-schema-ref-parser",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "refParser"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/lib/validator.js",
      "filenameRelative": "/app/lib/validator.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "validator.js",
      "sourceFileName": "validator.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "validator"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _ajv = require('ajv');\n\nvar _ajv2 = _interopRequireDefault(_ajv);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _jsonSchemaRefParser = require('json-schema-ref-parser');\n\nvar _jsonSchemaRefParser2 = _interopRequireDefault(_jsonSchemaRefParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst fs = require('./util/fs');\n\nfunction load(schemas) {\n\tlet validator = new _ajv2.default({\n\t\tcoerceTypes: true,\n\t\tuseDefaults: true\n\t});\n\n\treturn fs.find(schemas).then(function(result) {\n\t\tlet promises = _lodash2.default.map(result, function(schema) {\n\t\t\treturn _jsonSchemaRefParser2.default.bundle(schema);\n\t\t});\n\n\t\treturn Promise.all(promises);\n\t}).then(function(result) {\n\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\tlet schema = result[i];\n\n\t\t\tvalidator.addSchema(schema, schema.id);\n\t\t}\n\n\t\tfunction validate(schema, value) {\n\t\t\ttry {\n\t\t\t\tvalidator.validate(schema, value);\n\t\t\t} catch (err) {\n\t\t\t\treturn Promise.reject(err);\n\t\t\t}\n\n\t\t\tif (validator.errors) {\n\t\t\t\tlet error = new _ajv2.default.ValidationError(validator.errors);\n\n\t\t\t\treturn Promise.reject(error);\n\t\t\t}\n\n\t\t\treturn Promise.resolve(value);\n\t\t}\n\n\t\treturn Promise.resolve(validate);\n\t});\n}\n\nexports.default = {\n\tload: load\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRvci5qcyJdLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJsb2FkIiwic2NoZW1hcyIsInZhbGlkYXRvciIsImNvZXJjZVR5cGVzIiwidXNlRGVmYXVsdHMiLCJmaW5kIiwidGhlbiIsInJlc3VsdCIsInByb21pc2VzIiwibWFwIiwic2NoZW1hIiwiYnVuZGxlIiwiUHJvbWlzZSIsImFsbCIsImkiLCJsZW5ndGgiLCJhZGRTY2hlbWEiLCJpZCIsInZhbGlkYXRlIiwidmFsdWUiLCJlcnIiLCJyZWplY3QiLCJlcnJvcnMiLCJlcnJvciIsIlZhbGlkYXRpb25FcnJvciIsInJlc29sdmUiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsTUFBTUEsS0FBS0MsUUFBUSxXQUFSLENBQVg7O0FBR0EsU0FBU0MsSUFBVCxDQUFjQyxPQUFkLEVBQXVCO0FBQ3RCLEtBQUlDLFlBQVksa0JBQWM7QUFDN0JDLGVBQWEsSUFEZ0I7QUFFN0JDLGVBQWE7QUFGZ0IsRUFBZCxDQUFoQjs7QUFLQSxRQUFPTixHQUFHTyxJQUFILENBQVFKLE9BQVIsRUFDTEssSUFESyxDQUNBLFVBQVNDLE1BQVQsRUFBaUI7QUFDdEIsTUFBSUMsV0FBVyxpQkFBRUMsR0FBRixDQUFNRixNQUFOLEVBQWMsVUFBU0csTUFBVCxFQUFpQjtBQUM3QyxVQUFPLDhCQUFVQyxNQUFWLENBQWlCRCxNQUFqQixDQUFQO0FBQ0EsR0FGYyxDQUFmOztBQUlBLFNBQU9FLFFBQVFDLEdBQVIsQ0FBWUwsUUFBWixDQUFQO0FBQ0EsRUFQSyxFQVFMRixJQVJLLENBUUEsVUFBU0MsTUFBVCxFQUFpQjtBQUN0QixPQUFLLElBQUlPLElBQUksQ0FBYixFQUFnQkEsSUFBSVAsT0FBT1EsTUFBM0IsRUFBbUNELEdBQW5DLEVBQXdDO0FBQ3ZDLE9BQUlKLFNBQVNILE9BQU9PLENBQVAsQ0FBYjs7QUFFQVosYUFBVWMsU0FBVixDQUFvQk4sTUFBcEIsRUFBNEJBLE9BQU9PLEVBQW5DO0FBQ0E7O0FBRUQsV0FBU0MsUUFBVCxDQUFrQlIsTUFBbEIsRUFBMEJTLEtBQTFCLEVBQWlDO0FBQ2hDLE9BQUk7QUFDSGpCLGNBQVVnQixRQUFWLENBQW1CUixNQUFuQixFQUEyQlMsS0FBM0I7QUFDQSxJQUZELENBRUUsT0FBTUMsR0FBTixFQUFXO0FBQ1osV0FBT1IsUUFBUVMsTUFBUixDQUFlRCxHQUFmLENBQVA7QUFDQTs7QUFFRCxPQUFJbEIsVUFBVW9CLE1BQWQsRUFBc0I7QUFDckIsUUFBSUMsUUFBUSxJQUFJLGNBQVVDLGVBQWQsQ0FBOEJ0QixVQUFVb0IsTUFBeEMsQ0FBWjs7QUFFQSxXQUFPVixRQUFRUyxNQUFSLENBQWVFLEtBQWYsQ0FBUDtBQUNBOztBQUVELFVBQU9YLFFBQVFhLE9BQVIsQ0FBZ0JOLEtBQWhCLENBQVA7QUFDQTs7QUFFRCxTQUFPUCxRQUFRYSxPQUFSLENBQWdCUCxRQUFoQixDQUFQO0FBQ0EsRUFoQ0ssQ0FBUDtBQWlDQTs7a0JBRWM7QUFDYmxCLE9BQU1BO0FBRE8sQyIsImZpbGUiOiJ2YWxpZGF0b3IuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVmFsaWRhdG9yIGZyb20gJ2Fqdic7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHJlZlBhcnNlciBmcm9tICdqc29uLXNjaGVtYS1yZWYtcGFyc2VyJztcblxuY29uc3QgZnMgPSByZXF1aXJlKCcuL3V0aWwvZnMnKTtcblxuXG5mdW5jdGlvbiBsb2FkKHNjaGVtYXMpIHtcblx0bGV0IHZhbGlkYXRvciA9IG5ldyBWYWxpZGF0b3Ioe1xuXHRcdGNvZXJjZVR5cGVzOiB0cnVlLFxuXHRcdHVzZURlZmF1bHRzOiB0cnVlXG5cdH0pO1xuXG5cdHJldHVybiBmcy5maW5kKHNjaGVtYXMpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG5cdFx0XHRsZXQgcHJvbWlzZXMgPSBfLm1hcChyZXN1bHQsIGZ1bmN0aW9uKHNjaGVtYSkge1xuXHRcdFx0XHRyZXR1cm4gcmVmUGFyc2VyLmJ1bmRsZShzY2hlbWEpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGxldCBzY2hlbWEgPSByZXN1bHRbaV07XG5cblx0XHRcdFx0dmFsaWRhdG9yLmFkZFNjaGVtYShzY2hlbWEsIHNjaGVtYS5pZCk7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHZhbGlkYXRlKHNjaGVtYSwgdmFsdWUpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHR2YWxpZGF0b3IudmFsaWRhdGUoc2NoZW1hLCB2YWx1ZSk7XG5cdFx0XHRcdH0gY2F0Y2goZXJyKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodmFsaWRhdG9yLmVycm9ycykge1xuXHRcdFx0XHRcdGxldCBlcnJvciA9IG5ldyBWYWxpZGF0b3IuVmFsaWRhdGlvbkVycm9yKHZhbGlkYXRvci5lcnJvcnMpO1xuXG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbGlkYXRlKTtcblx0XHR9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBsb2FkOiBsb2FkXG59OyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "validator.js"
      ],
      "names": [
        "fs",
        "require",
        "load",
        "schemas",
        "validator",
        "coerceTypes",
        "useDefaults",
        "find",
        "then",
        "result",
        "promises",
        "map",
        "schema",
        "bundle",
        "Promise",
        "all",
        "i",
        "length",
        "addSchema",
        "id",
        "validate",
        "value",
        "err",
        "reject",
        "errors",
        "error",
        "ValidationError",
        "resolve"
      ],
      "mappings": ";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,KAAKC,QAAQ,WAAR,CAAX;;AAGA,SAASC,IAAT,CAAcC,OAAd,EAAuB;AACtB,KAAIC,YAAY,kBAAc;AAC7BC,eAAa,IADgB;AAE7BC,eAAa;AAFgB,EAAd,CAAhB;;AAKA,QAAON,GAAGO,IAAH,CAAQJ,OAAR,EACLK,IADK,CACA,UAASC,MAAT,EAAiB;AACtB,MAAIC,WAAW,iBAAEC,GAAF,CAAMF,MAAN,EAAc,UAASG,MAAT,EAAiB;AAC7C,UAAO,8BAAUC,MAAV,CAAiBD,MAAjB,CAAP;AACA,GAFc,CAAf;;AAIA,SAAOE,QAAQC,GAAR,CAAYL,QAAZ,CAAP;AACA,EAPK,EAQLF,IARK,CAQA,UAASC,MAAT,EAAiB;AACtB,OAAK,IAAIO,IAAI,CAAb,EAAgBA,IAAIP,OAAOQ,MAA3B,EAAmCD,GAAnC,EAAwC;AACvC,OAAIJ,SAASH,OAAOO,CAAP,CAAb;;AAEAZ,aAAUc,SAAV,CAAoBN,MAApB,EAA4BA,OAAOO,EAAnC;AACA;;AAED,WAASC,QAAT,CAAkBR,MAAlB,EAA0BS,KAA1B,EAAiC;AAChC,OAAI;AACHjB,cAAUgB,QAAV,CAAmBR,MAAnB,EAA2BS,KAA3B;AACA,IAFD,CAEE,OAAMC,GAAN,EAAW;AACZ,WAAOR,QAAQS,MAAR,CAAeD,GAAf,CAAP;AACA;;AAED,OAAIlB,UAAUoB,MAAd,EAAsB;AACrB,QAAIC,QAAQ,IAAI,cAAUC,eAAd,CAA8BtB,UAAUoB,MAAxC,CAAZ;;AAEA,WAAOV,QAAQS,MAAR,CAAeE,KAAf,CAAP;AACA;;AAED,UAAOX,QAAQa,OAAR,CAAgBN,KAAhB,CAAP;AACA;;AAED,SAAOP,QAAQa,OAAR,CAAgBP,QAAhB,CAAP;AACA,EAhCK,CAAP;AAiCA;;kBAEc;AACblB,OAAMA;AADO,C",
      "file": "validator.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "import Validator from 'ajv';\nimport _ from 'lodash';\nimport refParser from 'json-schema-ref-parser';\n\nconst fs = require('./util/fs');\n\n\nfunction load(schemas) {\n\tlet validator = new Validator({\n\t\tcoerceTypes: true,\n\t\tuseDefaults: true\n\t});\n\n\treturn fs.find(schemas)\n\t\t.then(function(result) {\n\t\t\tlet promises = _.map(result, function(schema) {\n\t\t\t\treturn refParser.bundle(schema);\n\t\t\t});\n\n\t\t\treturn Promise.all(promises);\n\t\t})\n\t\t.then(function(result) {\n\t\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\t\tlet schema = result[i];\n\n\t\t\t\tvalidator.addSchema(schema, schema.id);\n\t\t\t}\n\n\t\t\tfunction validate(schema, value) {\n\t\t\t\ttry {\n\t\t\t\t\tvalidator.validate(schema, value);\n\t\t\t\t} catch(err) {\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t}\n\n\t\t\t\tif (validator.errors) {\n\t\t\t\t\tlet error = new Validator.ValidationError(validator.errors);\n\n\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve(value);\n\t\t\t}\n\n\t\t\treturn Promise.resolve(validate);\n\t\t});\n}\n\nexport default {\n  load: load\n};"
      ]
    },
    "mtime": 1521760582823
  },
  "{\"filename\":\"/app/lib/util/fs.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib/util\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "fs",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fs"
              }
            ]
          },
          {
            "source": "glob",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "glob"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/lib/util/fs.js",
      "filenameRelative": "/app/lib/util/fs.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "fs.js",
      "sourceFileName": "fs.js",
      "sourceRoot": "/app/lib/util",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib/util",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "fs"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _glob = require('glob');\n\nvar _glob2 = _interopRequireDefault(_glob);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction find(pattern, options) {\n\treturn new Promise(function(resolve, reject) {\n\t\t(0, _glob2.default)(pattern, options, function(err, files) {\n\t\t\tif (err) {\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\tresolve(files);\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction readfile(name) {\n\treturn new Promise(function(resolve, reject) {\n\t\t_fs2.default.readFile(name, function(err, buffer) {\n\t\t\tif (err) {\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\tresolve(buffer);\n\t\t\t}\n\t\t});\n\t});\n}\n\nmodule.exports = {\n\tfind: find,\n\treadfile: readfile\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZzLmpzIl0sIm5hbWVzIjpbImZpbmQiLCJwYXR0ZXJuIiwib3B0aW9ucyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyIiwiZmlsZXMiLCJyZWFkZmlsZSIsIm5hbWUiLCJyZWFkRmlsZSIsImJ1ZmZlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7QUFFQTs7Ozs7O0FBR0EsU0FBU0EsSUFBVCxDQUFjQyxPQUFkLEVBQXVCQyxPQUF2QixFQUFnQztBQUMvQixRQUFPLElBQUlDLE9BQUosQ0FBWSxVQUFTQyxPQUFULEVBQWtCQyxNQUFsQixFQUEwQjtBQUM1QyxzQkFBS0osT0FBTCxFQUFjQyxPQUFkLEVBQXVCLFVBQVNJLEdBQVQsRUFBY0MsS0FBZCxFQUFxQjtBQUMzQyxPQUFJRCxHQUFKLEVBQVM7QUFDUkQsV0FBT0MsR0FBUDtBQUNBLElBRkQsTUFHSztBQUNKRixZQUFRRyxLQUFSO0FBQ0E7QUFDRCxHQVBEO0FBUUEsRUFUTSxDQUFQO0FBVUE7O0FBRUQsU0FBU0MsUUFBVCxDQUFrQkMsSUFBbEIsRUFBd0I7QUFDdkIsUUFBTyxJQUFJTixPQUFKLENBQVksVUFBU0MsT0FBVCxFQUFrQkMsTUFBbEIsRUFBMEI7QUFDNUMsZUFBR0ssUUFBSCxDQUFZRCxJQUFaLEVBQWtCLFVBQVNILEdBQVQsRUFBY0ssTUFBZCxFQUFzQjtBQUN2QyxPQUFJTCxHQUFKLEVBQVM7QUFDUkQsV0FBT0MsR0FBUDtBQUNBLElBRkQsTUFHSztBQUNKRixZQUFRTyxNQUFSO0FBQ0E7QUFDRCxHQVBEO0FBUUEsRUFUTSxDQUFQO0FBVUE7O0FBR0RDLE9BQU9DLE9BQVAsR0FBaUI7QUFDaEJiLE9BQU1BLElBRFU7QUFFaEJRLFdBQVVBO0FBRk0sQ0FBakIiLCJmaWxlIjoiZnMuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIvdXRpbCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5cbmltcG9ydCBnbG9iIGZyb20gJ2dsb2InO1xuXG5cbmZ1bmN0aW9uIGZpbmQocGF0dGVybiwgb3B0aW9ucykge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0Z2xvYihwYXR0ZXJuLCBvcHRpb25zLCBmdW5jdGlvbihlcnIsIGZpbGVzKSB7XG5cdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHJlc29sdmUoZmlsZXMpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gcmVhZGZpbGUobmFtZSkge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0ZnMucmVhZEZpbGUobmFtZSwgZnVuY3Rpb24oZXJyLCBidWZmZXIpIHtcblx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0cmVzb2x2ZShidWZmZXIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0ZmluZDogZmluZCxcblx0cmVhZGZpbGU6IHJlYWRmaWxlXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "fs.js"
      ],
      "names": [
        "find",
        "pattern",
        "options",
        "Promise",
        "resolve",
        "reject",
        "err",
        "files",
        "readfile",
        "name",
        "readFile",
        "buffer",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA;;;;AAEA;;;;;;AAGA,SAASA,IAAT,CAAcC,OAAd,EAAuBC,OAAvB,EAAgC;AAC/B,QAAO,IAAIC,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC5C,sBAAKJ,OAAL,EAAcC,OAAd,EAAuB,UAASI,GAAT,EAAcC,KAAd,EAAqB;AAC3C,OAAID,GAAJ,EAAS;AACRD,WAAOC,GAAP;AACA,IAFD,MAGK;AACJF,YAAQG,KAAR;AACA;AACD,GAPD;AAQA,EATM,CAAP;AAUA;;AAED,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;AACvB,QAAO,IAAIN,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC5C,eAAGK,QAAH,CAAYD,IAAZ,EAAkB,UAASH,GAAT,EAAcK,MAAd,EAAsB;AACvC,OAAIL,GAAJ,EAAS;AACRD,WAAOC,GAAP;AACA,IAFD,MAGK;AACJF,YAAQO,MAAR;AACA;AACD,GAPD;AAQA,EATM,CAAP;AAUA;;AAGDC,OAAOC,OAAP,GAAiB;AAChBb,OAAMA,IADU;AAEhBQ,WAAUA;AAFM,CAAjB",
      "file": "fs.js",
      "sourceRoot": "/app/lib/util",
      "sourcesContent": [
        "import fs from 'fs';\n\nimport glob from 'glob';\n\n\nfunction find(pattern, options) {\n\treturn new Promise(function(resolve, reject) {\n\t\tglob(pattern, options, function(err, files) {\n\t\t\tif (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolve(files);\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction readfile(name) {\n\treturn new Promise(function(resolve, reject) {\n\t\tfs.readFile(name, function(err, buffer) {\n\t\t\tif (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolve(buffer);\n\t\t\t}\n\t\t});\n\t});\n}\n\n\nmodule.exports = {\n\tfind: find,\n\treadfile: readfile\n};\n"
      ]
    },
    "mtime": 1521760298989
  },
  "{\"filename\":\"/app/schema/models/association-sessions.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "uuid/v4",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "nodeUUID"
              }
            ]
          },
          {
            "source": "./users",
            "imported": [
              "UserTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UserTC",
                "local": "UserTC"
              }
            ]
          },
          {
            "source": "../../lib/types/uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "AssociationSessionSchema",
            "AssociationSession",
            "AssociationSessionTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "AssociationSessionSchema",
              "exported": "AssociationSessionSchema"
            },
            {
              "kind": "local",
              "local": "AssociationSession",
              "exported": "AssociationSession"
            },
            {
              "kind": "local",
              "local": "AssociationSessionTC",
              "exported": "AssociationSessionTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/association-sessions.js",
      "filenameRelative": "/app/schema/models/association-sessions.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "association-sessions.js",
      "sourceFileName": "association-sessions.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "association-sessions"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AssociationSessionTC = exports.AssociationSession = exports.AssociationSessionSchema = undefined;\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _users = require('./users');\n\nvar _uuid = require('../../lib/types/uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst AssociationSessionSchema = exports.AssociationSessionSchema = new _mongoose2.default.Schema({\n  _id: {\n    type: Buffer\n  },\n  id: {\n    type: String,\n    get: function get() {\n      if (this._id) {\n        return this._id.toString('hex');\n      }\n    },\n    set: function set(val) {\n      console.log('Setting Assoc Session ID');\n      if (this._conditions && this._conditions.id) {\n        this._conditions._id = (0, _uuid2.default)(val);\n\n        delete this._conditions.id;\n      }\n\n      this._id = (0, _uuid2.default)(val);\n    }\n  },\n  connection_id: {\n    type: Buffer\n  },\n  connection_id_string: {\n    type: String,\n    get: function get() {\n      if (this.connection_id) {\n        return this.connection_id.toString('hex');\n      }\n    },\n    set: function set(val) {\n      if (this._conditions && this._conditions.connection_id_string) {\n        this._conditions.connection_id = (0, _uuid2.default)(val);\n\n        delete this._conditions.connection_id_string;\n      }\n\n      this.connection_id = (0, _uuid2.default)(val);\n    }\n  },\n  token: {\n    type: Buffer\n  },\n  token_string: {\n    type: String,\n    get: function get() {\n      if (this.token) {\n        return this.token.toString('hex');\n      }\n    },\n    set: function set(val) {\n      if (this._conditions && this._conditions.token_string) {\n        this._conditions.token = (0, _uuid2.default)(val);\n\n        delete this._conditions.token_string;\n      }\n\n      this.token = (0, _uuid2.default)(val);\n    }\n  },\n  ttl: {\n    type: Date\n  }\n}, {\n  collection: 'association_sessions'\n});\n\nconst AssociationSession = exports.AssociationSession = _mongoose2.default.model('AssociationSession', AssociationSessionSchema);\n\nconst AssociationSessionTC = exports.AssociationSessionTC = (0, _node2.default)(AssociationSession);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc29jaWF0aW9uLXNlc3Npb25zLmpzIl0sIm5hbWVzIjpbIkFzc29jaWF0aW9uU2Vzc2lvblNjaGVtYSIsIlNjaGVtYSIsIl9pZCIsInR5cGUiLCJCdWZmZXIiLCJpZCIsIlN0cmluZyIsImdldCIsInRvU3RyaW5nIiwic2V0IiwidmFsIiwiY29uc29sZSIsImxvZyIsIl9jb25kaXRpb25zIiwiY29ubmVjdGlvbl9pZCIsImNvbm5lY3Rpb25faWRfc3RyaW5nIiwidG9rZW4iLCJ0b2tlbl9zdHJpbmciLCJ0dGwiLCJEYXRlIiwiY29sbGVjdGlvbiIsIkFzc29jaWF0aW9uU2Vzc2lvbiIsIm1vZGVsIiwiQXNzb2NpYXRpb25TZXNzaW9uVEMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7QUFFQTs7Ozs7O0FBRU8sTUFBTUEsOERBQTJCLElBQUksbUJBQVNDLE1BQWIsQ0FDdEM7QUFDRUMsT0FBSztBQUNIQyxVQUFNQztBQURILEdBRFA7QUFJRUMsTUFBSTtBQUNGRixVQUFNRyxNQURKO0FBRUZDLFNBQUssZUFBVztBQUNkLFVBQUksS0FBS0wsR0FBVCxFQUFjO0FBQ1osZUFBTyxLQUFLQSxHQUFMLENBQVNNLFFBQVQsQ0FBa0IsS0FBbEIsQ0FBUDtBQUNEO0FBQ0YsS0FOQztBQU9GQyxTQUFLLGFBQVNDLEdBQVQsRUFBYztBQUNqQkMsY0FBUUMsR0FBUixDQUFZLDBCQUFaO0FBQ0EsVUFBSSxLQUFLQyxXQUFMLElBQW9CLEtBQUtBLFdBQUwsQ0FBaUJSLEVBQXpDLEVBQTZDO0FBQzNDLGFBQUtRLFdBQUwsQ0FBaUJYLEdBQWpCLEdBQXVCLG9CQUFLUSxHQUFMLENBQXZCOztBQUVBLGVBQU8sS0FBS0csV0FBTCxDQUFpQlIsRUFBeEI7QUFDRDs7QUFFRCxXQUFLSCxHQUFMLEdBQVcsb0JBQUtRLEdBQUwsQ0FBWDtBQUNEO0FBaEJDLEdBSk47QUFzQkVJLGlCQUFlO0FBQ2JYLFVBQU1DO0FBRE8sR0F0QmpCO0FBeUJFVyx3QkFBc0I7QUFDcEJaLFVBQU1HLE1BRGM7QUFFcEJDLFNBQUssZUFBVztBQUNkLFVBQUksS0FBS08sYUFBVCxFQUF3QjtBQUN0QixlQUFPLEtBQUtBLGFBQUwsQ0FBbUJOLFFBQW5CLENBQTRCLEtBQTVCLENBQVA7QUFDRDtBQUNGLEtBTm1CO0FBT3BCQyxTQUFLLGFBQVNDLEdBQVQsRUFBYztBQUNqQixVQUFJLEtBQUtHLFdBQUwsSUFBb0IsS0FBS0EsV0FBTCxDQUFpQkUsb0JBQXpDLEVBQStEO0FBQzdELGFBQUtGLFdBQUwsQ0FBaUJDLGFBQWpCLEdBQWlDLG9CQUFLSixHQUFMLENBQWpDOztBQUVBLGVBQU8sS0FBS0csV0FBTCxDQUFpQkUsb0JBQXhCO0FBQ0Q7O0FBRUQsV0FBS0QsYUFBTCxHQUFxQixvQkFBS0osR0FBTCxDQUFyQjtBQUNEO0FBZm1CLEdBekJ4QjtBQTBDRU0sU0FBTztBQUNMYixVQUFNQztBQURELEdBMUNUO0FBNkNFYSxnQkFBYztBQUNaZCxVQUFNRyxNQURNO0FBRVpDLFNBQUssZUFBVztBQUNkLFVBQUksS0FBS1MsS0FBVCxFQUFnQjtBQUNkLGVBQU8sS0FBS0EsS0FBTCxDQUFXUixRQUFYLENBQW9CLEtBQXBCLENBQVA7QUFDRDtBQUNGLEtBTlc7QUFPWkMsU0FBSyxhQUFTQyxHQUFULEVBQWM7QUFDakIsVUFBSSxLQUFLRyxXQUFMLElBQW9CLEtBQUtBLFdBQUwsQ0FBaUJJLFlBQXpDLEVBQXVEO0FBQ3JELGFBQUtKLFdBQUwsQ0FBaUJHLEtBQWpCLEdBQXlCLG9CQUFLTixHQUFMLENBQXpCOztBQUVBLGVBQU8sS0FBS0csV0FBTCxDQUFpQkksWUFBeEI7QUFDRDs7QUFFRCxXQUFLRCxLQUFMLEdBQWEsb0JBQUtOLEdBQUwsQ0FBYjtBQUNEO0FBZlcsR0E3Q2hCO0FBOERFUSxPQUFLO0FBQ0hmLFVBQU1nQjtBQURIO0FBOURQLENBRHNDLEVBbUV0QztBQUNFQyxjQUFZO0FBRGQsQ0FuRXNDLENBQWpDOztBQXdFQSxNQUFNQyxrREFBcUIsbUJBQVNDLEtBQVQsQ0FBZSxvQkFBZixFQUFxQ3RCLHdCQUFyQyxDQUEzQjs7QUFFQSxNQUFNdUIsc0RBQXVCLG9CQUFvQkYsa0JBQXBCLENBQTdCIiwiZmlsZSI6ImFzc29jaWF0aW9uLXNlc3Npb25zLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc2NoZW1hL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCBjb21wb3NlV2l0aE1vbmdvb3NlIGZyb20gJ2dyYXBocWwtY29tcG9zZS1tb25nb29zZS9ub2RlOCc7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IG5vZGVVVUlEIGZyb20gJ3V1aWQvdjQnO1xuXG5pbXBvcnQgeyBVc2VyVEMgfSBmcm9tICcuL3VzZXJzJztcblxuaW1wb3J0IHV1aWQgZnJvbSAnLi4vLi4vbGliL3R5cGVzL3V1aWQnO1xuXG5leHBvcnQgY29uc3QgQXNzb2NpYXRpb25TZXNzaW9uU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIF9pZDoge1xuICAgICAgdHlwZTogQnVmZmVyXG4gICAgfSxcbiAgICBpZDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2lkLnRvU3RyaW5nKCdoZXgnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXR0aW5nIEFzc29jIFNlc3Npb24gSUQnKTtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmRpdGlvbnMgJiYgdGhpcy5fY29uZGl0aW9ucy5pZCkge1xuICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbnMuX2lkID0gdXVpZCh2YWwpO1xuICAgICAgICAgIFxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jb25kaXRpb25zLmlkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pZCA9IHV1aWQodmFsKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbm5lY3Rpb25faWQ6IHtcbiAgICAgIHR5cGU6IEJ1ZmZlclxuICAgIH0sXG4gICAgY29ubmVjdGlvbl9pZF9zdHJpbmc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25faWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uX2lkLnRvU3RyaW5nKCdoZXgnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb25kaXRpb25zICYmIHRoaXMuX2NvbmRpdGlvbnMuY29ubmVjdGlvbl9pZF9zdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLl9jb25kaXRpb25zLmNvbm5lY3Rpb25faWQgPSB1dWlkKHZhbCk7XG4gICAgICAgICAgXG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2NvbmRpdGlvbnMuY29ubmVjdGlvbl9pZF9zdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbl9pZCA9IHV1aWQodmFsKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHRva2VuOiB7XG4gICAgICB0eXBlOiBCdWZmZXJcbiAgICB9LFxuICAgIHRva2VuX3N0cmluZzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy50b2tlbi50b1N0cmluZygnaGV4Jyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBpZiAodGhpcy5fY29uZGl0aW9ucyAmJiB0aGlzLl9jb25kaXRpb25zLnRva2VuX3N0cmluZykge1xuICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbnMudG9rZW4gPSB1dWlkKHZhbCk7XG4gICAgICAgICAgXG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2NvbmRpdGlvbnMudG9rZW5fc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRva2VuID0gdXVpZCh2YWwpO1xuICAgICAgfVxuICAgIH0sXG4gICAgdHRsOiB7XG4gICAgICB0eXBlOiBEYXRlXG4gICAgfVxuICB9LFxuICB7XG4gICAgY29sbGVjdGlvbjogJ2Fzc29jaWF0aW9uX3Nlc3Npb25zJyxcbiAgfVxuKTtcblxuZXhwb3J0IGNvbnN0IEFzc29jaWF0aW9uU2Vzc2lvbiA9IG1vbmdvb3NlLm1vZGVsKCdBc3NvY2lhdGlvblNlc3Npb24nLCBBc3NvY2lhdGlvblNlc3Npb25TY2hlbWEpO1xuXG5leHBvcnQgY29uc3QgQXNzb2NpYXRpb25TZXNzaW9uVEMgPSBjb21wb3NlV2l0aE1vbmdvb3NlKEFzc29jaWF0aW9uU2Vzc2lvbik7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "association-sessions.js"
      ],
      "names": [
        "AssociationSessionSchema",
        "Schema",
        "_id",
        "type",
        "Buffer",
        "id",
        "String",
        "get",
        "toString",
        "set",
        "val",
        "console",
        "log",
        "_conditions",
        "connection_id",
        "connection_id_string",
        "token",
        "token_string",
        "ttl",
        "Date",
        "collection",
        "AssociationSession",
        "model",
        "AssociationSessionTC"
      ],
      "mappings": ";;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;AAEA;;;;;;AAEO,MAAMA,8DAA2B,IAAI,mBAASC,MAAb,CACtC;AACEC,OAAK;AACHC,UAAMC;AADH,GADP;AAIEC,MAAI;AACFF,UAAMG,MADJ;AAEFC,SAAK,eAAW;AACd,UAAI,KAAKL,GAAT,EAAc;AACZ,eAAO,KAAKA,GAAL,CAASM,QAAT,CAAkB,KAAlB,CAAP;AACD;AACF,KANC;AAOFC,SAAK,aAASC,GAAT,EAAc;AACjBC,cAAQC,GAAR,CAAY,0BAAZ;AACA,UAAI,KAAKC,WAAL,IAAoB,KAAKA,WAAL,CAAiBR,EAAzC,EAA6C;AAC3C,aAAKQ,WAAL,CAAiBX,GAAjB,GAAuB,oBAAKQ,GAAL,CAAvB;;AAEA,eAAO,KAAKG,WAAL,CAAiBR,EAAxB;AACD;;AAED,WAAKH,GAAL,GAAW,oBAAKQ,GAAL,CAAX;AACD;AAhBC,GAJN;AAsBEI,iBAAe;AACbX,UAAMC;AADO,GAtBjB;AAyBEW,wBAAsB;AACpBZ,UAAMG,MADc;AAEpBC,SAAK,eAAW;AACd,UAAI,KAAKO,aAAT,EAAwB;AACtB,eAAO,KAAKA,aAAL,CAAmBN,QAAnB,CAA4B,KAA5B,CAAP;AACD;AACF,KANmB;AAOpBC,SAAK,aAASC,GAAT,EAAc;AACjB,UAAI,KAAKG,WAAL,IAAoB,KAAKA,WAAL,CAAiBE,oBAAzC,EAA+D;AAC7D,aAAKF,WAAL,CAAiBC,aAAjB,GAAiC,oBAAKJ,GAAL,CAAjC;;AAEA,eAAO,KAAKG,WAAL,CAAiBE,oBAAxB;AACD;;AAED,WAAKD,aAAL,GAAqB,oBAAKJ,GAAL,CAArB;AACD;AAfmB,GAzBxB;AA0CEM,SAAO;AACLb,UAAMC;AADD,GA1CT;AA6CEa,gBAAc;AACZd,UAAMG,MADM;AAEZC,SAAK,eAAW;AACd,UAAI,KAAKS,KAAT,EAAgB;AACd,eAAO,KAAKA,KAAL,CAAWR,QAAX,CAAoB,KAApB,CAAP;AACD;AACF,KANW;AAOZC,SAAK,aAASC,GAAT,EAAc;AACjB,UAAI,KAAKG,WAAL,IAAoB,KAAKA,WAAL,CAAiBI,YAAzC,EAAuD;AACrD,aAAKJ,WAAL,CAAiBG,KAAjB,GAAyB,oBAAKN,GAAL,CAAzB;;AAEA,eAAO,KAAKG,WAAL,CAAiBI,YAAxB;AACD;;AAED,WAAKD,KAAL,GAAa,oBAAKN,GAAL,CAAb;AACD;AAfW,GA7ChB;AA8DEQ,OAAK;AACHf,UAAMgB;AADH;AA9DP,CADsC,EAmEtC;AACEC,cAAY;AADd,CAnEsC,CAAjC;;AAwEA,MAAMC,kDAAqB,mBAASC,KAAT,CAAe,oBAAf,EAAqCtB,wBAArC,CAA3B;;AAEA,MAAMuB,sDAAuB,oBAAoBF,kBAApB,CAA7B",
      "file": "association-sessions.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\nimport mongoose from 'mongoose';\nimport nodeUUID from 'uuid/v4';\n\nimport { UserTC } from './users';\n\nimport uuid from '../../lib/types/uuid';\n\nexport const AssociationSessionSchema = new mongoose.Schema(\n  {\n    _id: {\n      type: Buffer\n    },\n    id: {\n      type: String,\n      get: function() {\n        if (this._id) {\n          return this._id.toString('hex');\n        }\n      },\n      set: function(val) {\n        console.log('Setting Assoc Session ID');\n        if (this._conditions && this._conditions.id) {\n          this._conditions._id = uuid(val);\n          \n          delete this._conditions.id;\n        }\n        \n        this._id = uuid(val);\n      }\n    },\n    connection_id: {\n      type: Buffer\n    },\n    connection_id_string: {\n      type: String,\n      get: function() {\n        if (this.connection_id) {\n          return this.connection_id.toString('hex');\n        }\n      },\n      set: function(val) {\n        if (this._conditions && this._conditions.connection_id_string) {\n          this._conditions.connection_id = uuid(val);\n          \n          delete this._conditions.connection_id_string;\n        }\n        \n        this.connection_id = uuid(val);\n      }\n    },\n    token: {\n      type: Buffer\n    },\n    token_string: {\n      type: String,\n      get: function() {\n        if (this.token) {\n          return this.token.toString('hex');\n        }\n      },\n      set: function(val) {\n        if (this._conditions && this._conditions.token_string) {\n          this._conditions.token = uuid(val);\n          \n          delete this._conditions.token_string;\n        }\n        \n        this.token = uuid(val);\n      }\n    },\n    ttl: {\n      type: Date\n    }\n  },\n  {\n    collection: 'association_sessions',\n  }\n);\n\nexport const AssociationSession = mongoose.model('AssociationSession', AssociationSessionSchema);\n\nexport const AssociationSessionTC = composeWithMongoose(AssociationSession);"
      ]
    },
    "mtime": 1521832104990
  },
  "{\"filename\":\"/app/lib/rest/complete-connection.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib/rest\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "config"
              }
            ]
          },
          {
            "source": "http-errors",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "httpErrors"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "../../schema/models/association-sessions",
            "imported": [
              "AssociationSessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "AssociationSessionTC",
                "local": "AssociationSessionTC"
              }
            ]
          },
          {
            "source": "../../schema/models/connections",
            "imported": [
              "ConnectionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ConnectionTC",
                "local": "ConnectionTC"
              }
            ]
          },
          {
            "source": "../../schema/models/sessions",
            "imported": [
              "SessionTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "SessionTC",
                "local": "SessionTC"
              }
            ]
          },
          {
            "source": "../../schema/models/users",
            "imported": [
              "UserTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UserTC",
                "local": "UserTC"
              }
            ]
          },
          {
            "source": "../types/uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/lib/rest/complete-connection.js",
      "filenameRelative": "/app/lib/rest/complete-connection.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "complete-connection.js",
      "sourceFileName": "complete-connection.js",
      "sourceRoot": "/app/lib/rest",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib/rest",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "complete-connection"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nlet completeLogin = (() => {\n  var _ref2 = _asyncToGenerator(function* (req, res) {\n    let bitscoop = env.bitscoop;\n\n    if (req.user == null) {\n      let $filter, promise;\n\n      let associationId = req.cookies['login_assoc'];\n\n      $filter = {\n        token: (0, _uuid2.default)(associationId),\n        connection_id: (0, _uuid2.default)(req.query.connection_id)\n      };\n\n      let count = AssociationSessionsTC.getResolver('count').resolve({\n        args: {\n          filter: $filter\n        }\n      });\n\n      if (count === 0) {\n        throw new Error('Invalid association session or association session timeout');\n      }\n\n      yield _associationSessions.AssociationSessionTC.getResolver('removeOne').resolve({\n        args: {\n          filter: $filter\n        }\n      });\n\n      let bitscoopConnection = yield bitscoop.getConnection(req.query.existing_connection_id || req.query.connection_id);\n\n      if (bitscoopConnection == null) {\n        console.log('Invalid BitScoop connection.');\n\n        res.redirect('/');\n      }\n\n      if (!_lodash2.default.get(bitscoopConnection, 'auth.status.authorized', false)) {\n        console.log('BitScoop Connection is not authorized. In order to use this account you must grant the requested permissions.');\n\n        res.redirect('/');\n      }\n\n      let connection = _connections.ConnectionTC.getResolver('findOne').resolve({\n        args: {\n          filter: {\n            remote_connection_id_string: bitscoopConnection.id\n          }\n        }\n      });\n\n      let user = _users.UserTC.getResolver('findOne').resolve({\n        args: {\n          filter: {\n            id: connection.user_id.toString('hex')\n          }\n        }\n      });\n\n      if (!user) {\n        user = _users.UserTC.getResolver('createOne').resolve({\n          args: {\n            record: {\n              id: (0, _uuid2.default)(),\n              joined: _moment2.default.utc().toDate()\n            }\n          }\n        });\n      }\n\n      if (!user) {\n        console.log('No user and couldn\\'t create a new user.');\n\n        res.redirect('/');\n      }\n\n      let session = yield _sessions.SessionTC.getResolver('createOne').resolve({\n        args: {\n          record: {\n            id: (0, _uuid2.default)(),\n            user_id_string: user._id.toString('hex'),\n            persist: true\n          }\n        },\n        projection: {\n          token_string: true,\n          expiration: true\n        }\n      });\n\n      yield _users.UserTC.getResolver('updateOne').resolve({\n        args: {\n          filter: {\n            id: user._id.toString('hex')\n          },\n          record: {\n            is_active: true,\n            last_login: (0, _moment2.default)().utc().toDate()\n          }\n        }\n      });\n\n      res.cookie(_config2.default.sessions.cookieName, session.token_string, {\n        domain: _config2.default.domain,\n        secure: true,\n        httpOnly: true,\n        expires: session.expiration\n      });\n\n      return user;\n    } else {\n      // User is already logged in\n      return req.user;\n    }\n  });\n\n  return function completeLogin(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n})();\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _config = require('config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _httpErrors = require('http-errors');\n\nvar _httpErrors2 = _interopRequireDefault(_httpErrors);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _associationSessions = require('../../schema/models/association-sessions');\n\nvar _connections = require('../../schema/models/connections');\n\nvar _sessions = require('../../schema/models/sessions');\n\nvar _users = require('../../schema/models/users');\n\nvar _uuid = require('../types/uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function() { var gen = fn.apply(this, arguments); return new Promise(function(resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function(value) { step(\"next\", value); }, function(err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nexports.default = (() => {\n  var _ref = _asyncToGenerator(function* (req, res) {\n    let bitscoop = env.bitscoop;\n\n    yield env.validate('#/types/uuid4', req.query.connection_id).catch(function(err) {\n      throw new Error('connection_id must be a 32-character UUID4 without dashes');\n    });\n\n    yield env.validate('#/types/uuid4', req.query.map_id).catch(function(err) {\n      throw new Error('map_id must be a 32-character UUID4 without dashes');\n    });\n\n    if (req.query.existing_connection_id) {\n      yield env.validate('#/types/uuid4', req.query.existing_connection_id).catch(function(err) {\n        throw new Error('existing_connection_id must be a 32-character UUID4 without dashes');\n      });\n    }\n\n    let user = yield completeLogin(req, res);\n\n    yield completeConnection(req, res, user);\n\n    if (req.user == null) {\n      res.redirect('/');\n    } else {\n      res.redirect('providers');\n    }\n  });\n\n  return function(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBsZXRlLWNvbm5lY3Rpb24uanMiXSwibmFtZXMiOlsicmVxIiwicmVzIiwiYml0c2Nvb3AiLCJlbnYiLCJ1c2VyIiwiJGZpbHRlciIsInByb21pc2UiLCJhc3NvY2lhdGlvbklkIiwiY29va2llcyIsInRva2VuIiwiY29ubmVjdGlvbl9pZCIsInF1ZXJ5IiwiY291bnQiLCJBc3NvY2lhdGlvblNlc3Npb25zVEMiLCJnZXRSZXNvbHZlciIsInJlc29sdmUiLCJhcmdzIiwiZmlsdGVyIiwiRXJyb3IiLCJiaXRzY29vcENvbm5lY3Rpb24iLCJnZXRDb25uZWN0aW9uIiwiZXhpc3RpbmdfY29ubmVjdGlvbl9pZCIsImNvbnNvbGUiLCJsb2ciLCJyZWRpcmVjdCIsImdldCIsImNvbm5lY3Rpb24iLCJyZW1vdGVfY29ubmVjdGlvbl9pZF9zdHJpbmciLCJpZCIsInVzZXJfaWQiLCJ0b1N0cmluZyIsInJlY29yZCIsImpvaW5lZCIsInV0YyIsInRvRGF0ZSIsInNlc3Npb24iLCJ1c2VyX2lkX3N0cmluZyIsIl9pZCIsInBlcnNpc3QiLCJwcm9qZWN0aW9uIiwidG9rZW5fc3RyaW5nIiwiZXhwaXJhdGlvbiIsImlzX2FjdGl2ZSIsImxhc3RfbG9naW4iLCJjb29raWUiLCJzZXNzaW9ucyIsImNvb2tpZU5hbWUiLCJkb21haW4iLCJzZWN1cmUiLCJodHRwT25seSIsImV4cGlyZXMiLCJjb21wbGV0ZUxvZ2luIiwidmFsaWRhdGUiLCJjYXRjaCIsImVyciIsIm1hcF9pZCIsImNvbXBsZXRlQ29ubmVjdGlvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztnQ0E0Q0EsV0FBNkJBLEdBQTdCLEVBQWtDQyxHQUFsQyxFQUF1QztBQUNyQyxRQUFJQyxXQUFXQyxJQUFJRCxRQUFuQjs7QUFFRCxRQUFJRixJQUFJSSxJQUFKLElBQVksSUFBaEIsRUFBc0I7QUFDbkIsVUFBSUMsT0FBSixFQUFhQyxPQUFiOztBQUVBLFVBQUlDLGdCQUFnQlAsSUFBSVEsT0FBSixDQUFZLGFBQVosQ0FBcEI7O0FBRUFILGdCQUFVO0FBQ05JLGVBQU8sb0JBQUtGLGFBQUwsQ0FERDtBQUVORyx1QkFBZSxvQkFBS1YsSUFBSVcsS0FBSixDQUFVRCxhQUFmO0FBRlQsT0FBVjs7QUFLQSxVQUFJRSxRQUFRQyxzQkFBc0JDLFdBQXRCLENBQWtDLE9BQWxDLEVBQTJDQyxPQUEzQyxDQUFtRDtBQUM3REMsY0FBTTtBQUNKQyxrQkFBUVo7QUFESjtBQUR1RCxPQUFuRCxDQUFaOztBQU1BLFVBQUlPLFVBQVUsQ0FBZCxFQUFpQjtBQUNmLGNBQU0sSUFBSU0sS0FBSixDQUFVLDREQUFWLENBQU47QUFDRDs7QUFFRCxZQUFNLDBDQUFxQkosV0FBckIsQ0FBaUMsV0FBakMsRUFBOENDLE9BQTlDLENBQXNEO0FBQzFEQyxjQUFNO0FBQ0pDLGtCQUFRWjtBQURKO0FBRG9ELE9BQXRELENBQU47O0FBTUEsVUFBSWMscUJBQXFCLE1BQU1qQixTQUFTa0IsYUFBVCxDQUF1QnBCLElBQUlXLEtBQUosQ0FBVVUsc0JBQVYsSUFBb0NyQixJQUFJVyxLQUFKLENBQVVELGFBQXJFLENBQS9COztBQUVBLFVBQUlTLHNCQUFzQixJQUExQixFQUFnQztBQUM5QkcsZ0JBQVFDLEdBQVIsQ0FBWSw4QkFBWjs7QUFFQXRCLFlBQUl1QixRQUFKLENBQWEsR0FBYjtBQUNEOztBQUVELFVBQUksQ0FBQyxpQkFBRUMsR0FBRixDQUFNTixrQkFBTixFQUEwQix3QkFBMUIsRUFBb0QsS0FBcEQsQ0FBTCxFQUFpRTtBQUMvREcsZ0JBQVFDLEdBQVIsQ0FBWSwrR0FBWjs7QUFFQXRCLFlBQUl1QixRQUFKLENBQWEsR0FBYjtBQUNEOztBQUVELFVBQUlFLGFBQWEsMEJBQWFaLFdBQWIsQ0FBeUIsU0FBekIsRUFBb0NDLE9BQXBDLENBQTRDO0FBQzNEQyxjQUFNO0FBQ0pDLGtCQUFRO0FBQ05VLHlDQUE2QlIsbUJBQW1CUztBQUQxQztBQURKO0FBRHFELE9BQTVDLENBQWpCOztBQVFBLFVBQUl4QixPQUFPLGNBQU9VLFdBQVAsQ0FBbUIsU0FBbkIsRUFBOEJDLE9BQTlCLENBQXNDO0FBQy9DQyxjQUFNO0FBQ0pDLGtCQUFRO0FBQ05XLGdCQUFJRixXQUFXRyxPQUFYLENBQW1CQyxRQUFuQixDQUE0QixLQUE1QjtBQURFO0FBREo7QUFEeUMsT0FBdEMsQ0FBWDs7QUFRQSxVQUFJLENBQUMxQixJQUFMLEVBQVc7QUFDVEEsZUFBTyxjQUFPVSxXQUFQLENBQW1CLFdBQW5CLEVBQWdDQyxPQUFoQyxDQUF3QztBQUM3Q0MsZ0JBQU07QUFDSmUsb0JBQVE7QUFDTkgsa0JBQUkscUJBREU7QUFFTkksc0JBQVEsaUJBQU9DLEdBQVAsR0FBYUMsTUFBYjtBQUZGO0FBREo7QUFEdUMsU0FBeEMsQ0FBUDtBQVFEOztBQUVELFVBQUksQ0FBQzlCLElBQUwsRUFBVztBQUNUa0IsZ0JBQVFDLEdBQVIsQ0FBWSwwQ0FBWjs7QUFFQXRCLFlBQUl1QixRQUFKLENBQWEsR0FBYjtBQUNEOztBQUVELFVBQUlXLFVBQVUsTUFBTSxvQkFBVXJCLFdBQVYsQ0FBc0IsV0FBdEIsRUFBbUNDLE9BQW5DLENBQTJDO0FBQzdEQyxjQUFNO0FBQ0plLGtCQUFRO0FBQ05ILGdCQUFJLHFCQURFO0FBRU5RLDRCQUFnQmhDLEtBQUtpQyxHQUFMLENBQVNQLFFBQVQsQ0FBa0IsS0FBbEIsQ0FGVjtBQUdOUSxxQkFBUztBQUhIO0FBREosU0FEdUQ7QUFRN0RDLG9CQUFZO0FBQ1ZDLHdCQUFjLElBREo7QUFFVkMsc0JBQVk7QUFGRjtBQVJpRCxPQUEzQyxDQUFwQjs7QUFjQSxZQUFNLGNBQU8zQixXQUFQLENBQW1CLFdBQW5CLEVBQWdDQyxPQUFoQyxDQUF3QztBQUM1Q0MsY0FBTTtBQUNKQyxrQkFBUTtBQUNOVyxnQkFBSXhCLEtBQUtpQyxHQUFMLENBQVNQLFFBQVQsQ0FBa0IsS0FBbEI7QUFERSxXQURKO0FBSUpDLGtCQUFRO0FBQ05XLHVCQUFXLElBREw7QUFFTkMsd0JBQVksd0JBQVNWLEdBQVQsR0FBZUMsTUFBZjtBQUZOO0FBSko7QUFEc0MsT0FBeEMsQ0FBTjs7QUFZQWpDLFVBQUkyQyxNQUFKLENBQVcsaUJBQU9DLFFBQVAsQ0FBZ0JDLFVBQTNCLEVBQXVDWCxRQUFRSyxZQUEvQyxFQUE2RDtBQUN6RE8sZ0JBQVEsaUJBQU9BLE1BRDBDO0FBRXpEQyxnQkFBUSxJQUZpRDtBQUd6REMsa0JBQVUsSUFIK0M7QUFJekRDLGlCQUFTZixRQUFRTTtBQUp3QyxPQUE3RDs7QUFPQSxhQUFPckMsSUFBUDtBQUVELEtBNUdGLE1BNkdNO0FBQ0w7QUFDQSxhQUFPSixJQUFJSSxJQUFYO0FBQ0E7QUFDRCxHOztrQkFwSGMrQyxhOzs7OztBQTVDZjs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7K0JBRWUsV0FBZW5ELEdBQWYsRUFBb0JDLEdBQXBCLEVBQXlCO0FBQ3RDLFFBQUlDLFdBQVdDLElBQUlELFFBQW5COztBQUVBLFVBQU1DLElBQUlpRCxRQUFKLENBQWEsZUFBYixFQUE4QnBELElBQUlXLEtBQUosQ0FBVUQsYUFBeEMsRUFDRDJDLEtBREMsQ0FDSyxVQUFTQyxHQUFULEVBQWM7QUFDbkIsWUFBTSxJQUFJcEMsS0FBSixDQUFVLDJEQUFWLENBQU47QUFDRCxLQUhDLENBQU47O0FBS0EsVUFBTWYsSUFBSWlELFFBQUosQ0FBYSxlQUFiLEVBQThCcEQsSUFBSVcsS0FBSixDQUFVNEMsTUFBeEMsRUFDREYsS0FEQyxDQUNLLFVBQVNDLEdBQVQsRUFBYztBQUNuQixZQUFNLElBQUlwQyxLQUFKLENBQVUsb0RBQVYsQ0FBTjtBQUNELEtBSEMsQ0FBTjs7QUFLQSxRQUFJbEIsSUFBSVcsS0FBSixDQUFVVSxzQkFBZCxFQUFzQztBQUNwQyxZQUFNbEIsSUFBSWlELFFBQUosQ0FBYSxlQUFiLEVBQThCcEQsSUFBSVcsS0FBSixDQUFVVSxzQkFBeEMsRUFDRGdDLEtBREMsQ0FDSyxVQUFTQyxHQUFULEVBQWM7QUFDbkIsY0FBTSxJQUFJcEMsS0FBSixDQUFVLG9FQUFWLENBQU47QUFDRCxPQUhDLENBQU47QUFJRDs7QUFFRCxRQUFJZCxPQUFPLE1BQU0rQyxjQUFjbkQsR0FBZCxFQUFtQkMsR0FBbkIsQ0FBakI7O0FBRUEsVUFBTXVELG1CQUFtQnhELEdBQW5CLEVBQXdCQyxHQUF4QixFQUE2QkcsSUFBN0IsQ0FBTjs7QUFFQSxRQUFJSixJQUFJSSxJQUFKLElBQVksSUFBaEIsRUFBc0I7QUFDcEJILFVBQUl1QixRQUFKLENBQWEsR0FBYjtBQUNELEtBRkQsTUFHSztBQUNIdkIsVUFBSXVCLFFBQUosQ0FBYSxXQUFiO0FBQ0Q7QUFDRixHIiwiZmlsZSI6ImNvbXBsZXRlLWNvbm5lY3Rpb24uanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIvcmVzdCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgY29uZmlnIGZyb20gJ2NvbmZpZyc7XG5pbXBvcnQgaHR0cEVycm9ycyBmcm9tICdodHRwLWVycm9ycyc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5cbmltcG9ydCB7IEFzc29jaWF0aW9uU2Vzc2lvblRDIH0gZnJvbSAnLi4vLi4vc2NoZW1hL21vZGVscy9hc3NvY2lhdGlvbi1zZXNzaW9ucyc7XG5pbXBvcnQgeyBDb25uZWN0aW9uVEMgfSBmcm9tICcuLi8uLi9zY2hlbWEvbW9kZWxzL2Nvbm5lY3Rpb25zJztcbmltcG9ydCB7IFNlc3Npb25UQyB9IGZyb20gJy4uLy4uL3NjaGVtYS9tb2RlbHMvc2Vzc2lvbnMnO1xuaW1wb3J0IHsgVXNlclRDIH0gZnJvbSAnLi4vLi4vc2NoZW1hL21vZGVscy91c2Vycyc7XG5pbXBvcnQgdXVpZCBmcm9tICcuLi90eXBlcy91dWlkJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgbGV0IGJpdHNjb29wID0gZW52LmJpdHNjb29wO1xuICAgIFxuICBhd2FpdCBlbnYudmFsaWRhdGUoJyMvdHlwZXMvdXVpZDQnLCByZXEucXVlcnkuY29ubmVjdGlvbl9pZClcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb25uZWN0aW9uX2lkIG11c3QgYmUgYSAzMi1jaGFyYWN0ZXIgVVVJRDQgd2l0aG91dCBkYXNoZXMnKVxuICAgICAgfSk7XG4gIFxuICBhd2FpdCBlbnYudmFsaWRhdGUoJyMvdHlwZXMvdXVpZDQnLCByZXEucXVlcnkubWFwX2lkKVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21hcF9pZCBtdXN0IGJlIGEgMzItY2hhcmFjdGVyIFVVSUQ0IHdpdGhvdXQgZGFzaGVzJylcbiAgICAgIH0pO1xuICBcbiAgaWYgKHJlcS5xdWVyeS5leGlzdGluZ19jb25uZWN0aW9uX2lkKSB7XG4gICAgYXdhaXQgZW52LnZhbGlkYXRlKCcjL3R5cGVzL3V1aWQ0JywgcmVxLnF1ZXJ5LmV4aXN0aW5nX2Nvbm5lY3Rpb25faWQpXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2V4aXN0aW5nX2Nvbm5lY3Rpb25faWQgbXVzdCBiZSBhIDMyLWNoYXJhY3RlciBVVUlENCB3aXRob3V0IGRhc2hlcycpXG4gICAgICAgIH0pO1xuICB9XG4gIFxuICBsZXQgdXNlciA9IGF3YWl0IGNvbXBsZXRlTG9naW4ocmVxLCByZXMpO1xuICBcbiAgYXdhaXQgY29tcGxldGVDb25uZWN0aW9uKHJlcSwgcmVzLCB1c2VyKTtcbiAgXG4gIGlmIChyZXEudXNlciA9PSBudWxsKSB7XG4gICAgcmVzLnJlZGlyZWN0KCcvJyk7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmVzLnJlZGlyZWN0KCdwcm92aWRlcnMnKTtcbiAgfVxufVxuXG5cbmFzeW5jIGZ1bmN0aW9uIGNvbXBsZXRlTG9naW4ocmVxLCByZXMpIHtcbiAgbGV0IGJpdHNjb29wID0gZW52LmJpdHNjb29wO1xuICBcblx0aWYgKHJlcS51c2VyID09IG51bGwpIHtcbiAgICBsZXQgJGZpbHRlciwgcHJvbWlzZTtcblxuICAgIGxldCBhc3NvY2lhdGlvbklkID0gcmVxLmNvb2tpZXNbJ2xvZ2luX2Fzc29jJ107XG5cbiAgICAkZmlsdGVyID0ge1xuICAgICAgICB0b2tlbjogdXVpZChhc3NvY2lhdGlvbklkKSxcbiAgICAgICAgY29ubmVjdGlvbl9pZDogdXVpZChyZXEucXVlcnkuY29ubmVjdGlvbl9pZClcbiAgICB9O1xuICAgIFxuICAgIGxldCBjb3VudCA9IEFzc29jaWF0aW9uU2Vzc2lvbnNUQy5nZXRSZXNvbHZlcignY291bnQnKS5yZXNvbHZlKHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlsdGVyOiAkZmlsdGVyXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXNzb2NpYXRpb24gc2Vzc2lvbiBvciBhc3NvY2lhdGlvbiBzZXNzaW9uIHRpbWVvdXQnKTtcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgQXNzb2NpYXRpb25TZXNzaW9uVEMuZ2V0UmVzb2x2ZXIoJ3JlbW92ZU9uZScpLnJlc29sdmUoe1xuICAgICAgYXJnczoge1xuICAgICAgICBmaWx0ZXI6ICRmaWx0ZXJcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBsZXQgYml0c2Nvb3BDb25uZWN0aW9uID0gYXdhaXQgYml0c2Nvb3AuZ2V0Q29ubmVjdGlvbihyZXEucXVlcnkuZXhpc3RpbmdfY29ubmVjdGlvbl9pZCB8fCByZXEucXVlcnkuY29ubmVjdGlvbl9pZCk7XG4gICAgXG4gICAgaWYgKGJpdHNjb29wQ29ubmVjdGlvbiA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBCaXRTY29vcCBjb25uZWN0aW9uLicpO1xuICAgICAgXG4gICAgICByZXMucmVkaXJlY3QoJy8nKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCFfLmdldChiaXRzY29vcENvbm5lY3Rpb24sICdhdXRoLnN0YXR1cy5hdXRob3JpemVkJywgZmFsc2UpKSB7XG4gICAgICBjb25zb2xlLmxvZygnQml0U2Nvb3AgQ29ubmVjdGlvbiBpcyBub3QgYXV0aG9yaXplZC4gSW4gb3JkZXIgdG8gdXNlIHRoaXMgYWNjb3VudCB5b3UgbXVzdCBncmFudCB0aGUgcmVxdWVzdGVkIHBlcm1pc3Npb25zLicpO1xuICAgICAgXG4gICAgICByZXMucmVkaXJlY3QoJy8nKTtcbiAgICB9XG4gICAgXG4gICAgbGV0IGNvbm5lY3Rpb24gPSBDb25uZWN0aW9uVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRPbmUnKS5yZXNvbHZlKHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZmlsdGVyOiB7XG4gICAgICAgICAgcmVtb3RlX2Nvbm5lY3Rpb25faWRfc3RyaW5nOiBiaXRzY29vcENvbm5lY3Rpb24uaWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGxldCB1c2VyID0gVXNlclRDLmdldFJlc29sdmVyKCdmaW5kT25lJykucmVzb2x2ZSh7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpbHRlcjoge1xuICAgICAgICAgIGlkOiBjb25uZWN0aW9uLnVzZXJfaWQudG9TdHJpbmcoJ2hleCcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHVzZXIgPSBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2NyZWF0ZU9uZScpLnJlc29sdmUoe1xuICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgcmVjb3JkOiB7XG4gICAgICAgICAgICBpZDogdXVpZCgpLFxuICAgICAgICAgICAgam9pbmVkOiBtb21lbnQudXRjKCkudG9EYXRlKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGlmICghdXNlcikge1xuICAgICAgY29uc29sZS5sb2coJ05vIHVzZXIgYW5kIGNvdWxkblxcJ3QgY3JlYXRlIGEgbmV3IHVzZXIuJyk7XG4gICAgICBcbiAgICAgIHJlcy5yZWRpcmVjdCgnLycpO1xuICAgIH1cbiAgICBcbiAgICBsZXQgc2Vzc2lvbiA9IGF3YWl0IFNlc3Npb25UQy5nZXRSZXNvbHZlcignY3JlYXRlT25lJykucmVzb2x2ZSh7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIHJlY29yZDoge1xuICAgICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgICAgdXNlcl9pZF9zdHJpbmc6IHVzZXIuX2lkLnRvU3RyaW5nKCdoZXgnKSxcbiAgICAgICAgICBwZXJzaXN0OiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwcm9qZWN0aW9uOiB7XG4gICAgICAgIHRva2VuX3N0cmluZzogdHJ1ZSxcbiAgICAgICAgZXhwaXJhdGlvbjogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IFVzZXJUQy5nZXRSZXNvbHZlcigndXBkYXRlT25lJykucmVzb2x2ZSh7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIGZpbHRlcjoge1xuICAgICAgICAgIGlkOiB1c2VyLl9pZC50b1N0cmluZygnaGV4JylcbiAgICAgICAgfSxcbiAgICAgICAgcmVjb3JkOiB7XG4gICAgICAgICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgICAgICAgIGxhc3RfbG9naW46IG1vbWVudCgpLnV0YygpLnRvRGF0ZSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXMuY29va2llKGNvbmZpZy5zZXNzaW9ucy5jb29raWVOYW1lLCBzZXNzaW9uLnRva2VuX3N0cmluZywge1xuICAgICAgICBkb21haW46IGNvbmZpZy5kb21haW4sXG4gICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgIGV4cGlyZXM6IHNlc3Npb24uZXhwaXJhdGlvblxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB1c2VyO1xuXG4gIH1cbiAgZWxzZSB7XG5cdFx0Ly8gVXNlciBpcyBhbHJlYWR5IGxvZ2dlZCBpblxuXHRcdHJldHVybiByZXEudXNlcjtcblx0fVxufSJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "complete-connection.js"
      ],
      "names": [
        "req",
        "res",
        "bitscoop",
        "env",
        "user",
        "$filter",
        "promise",
        "associationId",
        "cookies",
        "token",
        "connection_id",
        "query",
        "count",
        "AssociationSessionsTC",
        "getResolver",
        "resolve",
        "args",
        "filter",
        "Error",
        "bitscoopConnection",
        "getConnection",
        "existing_connection_id",
        "console",
        "log",
        "redirect",
        "get",
        "connection",
        "remote_connection_id_string",
        "id",
        "user_id",
        "toString",
        "record",
        "joined",
        "utc",
        "toDate",
        "session",
        "user_id_string",
        "_id",
        "persist",
        "projection",
        "token_string",
        "expiration",
        "is_active",
        "last_login",
        "cookie",
        "sessions",
        "cookieName",
        "domain",
        "secure",
        "httpOnly",
        "expires",
        "completeLogin",
        "validate",
        "catch",
        "err",
        "map_id",
        "completeConnection"
      ],
      "mappings": "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",
      "file": "complete-connection.js",
      "sourceRoot": "/app/lib/rest",
      "sourcesContent": [
        "import _ from 'lodash';\nimport config from 'config';\nimport httpErrors from 'http-errors';\nimport moment from 'moment';\n\nimport { AssociationSessionTC } from '../../schema/models/association-sessions';\nimport { ConnectionTC } from '../../schema/models/connections';\nimport { SessionTC } from '../../schema/models/sessions';\nimport { UserTC } from '../../schema/models/users';\nimport uuid from '../types/uuid';\n\nexport default async function(req, res) {\n  let bitscoop = env.bitscoop;\n    \n  await env.validate('#/types/uuid4', req.query.connection_id)\n      .catch(function(err) {\n        throw new Error('connection_id must be a 32-character UUID4 without dashes')\n      });\n  \n  await env.validate('#/types/uuid4', req.query.map_id)\n      .catch(function(err) {\n        throw new Error('map_id must be a 32-character UUID4 without dashes')\n      });\n  \n  if (req.query.existing_connection_id) {\n    await env.validate('#/types/uuid4', req.query.existing_connection_id)\n        .catch(function(err) {\n          throw new Error('existing_connection_id must be a 32-character UUID4 without dashes')\n        });\n  }\n  \n  let user = await completeLogin(req, res);\n  \n  await completeConnection(req, res, user);\n  \n  if (req.user == null) {\n    res.redirect('/');\n  }\n  else {\n    res.redirect('providers');\n  }\n}\n\n\nasync function completeLogin(req, res) {\n  let bitscoop = env.bitscoop;\n  \n\tif (req.user == null) {\n    let $filter, promise;\n\n    let associationId = req.cookies['login_assoc'];\n\n    $filter = {\n        token: uuid(associationId),\n        connection_id: uuid(req.query.connection_id)\n    };\n    \n    let count = AssociationSessionsTC.getResolver('count').resolve({\n      args: {\n        filter: $filter\n      }\n    });\n    \n    if (count === 0) {\n      throw new Error('Invalid association session or association session timeout');\n    }\n    \n    await AssociationSessionTC.getResolver('removeOne').resolve({\n      args: {\n        filter: $filter\n      }\n    });\n    \n    let bitscoopConnection = await bitscoop.getConnection(req.query.existing_connection_id || req.query.connection_id);\n    \n    if (bitscoopConnection == null) {\n      console.log('Invalid BitScoop connection.');\n      \n      res.redirect('/');\n    }\n    \n    if (!_.get(bitscoopConnection, 'auth.status.authorized', false)) {\n      console.log('BitScoop Connection is not authorized. In order to use this account you must grant the requested permissions.');\n      \n      res.redirect('/');\n    }\n    \n    let connection = ConnectionTC.getResolver('findOne').resolve({\n      args: {\n        filter: {\n          remote_connection_id_string: bitscoopConnection.id\n        }\n      }\n    });\n    \n    let user = UserTC.getResolver('findOne').resolve({\n      args: {\n        filter: {\n          id: connection.user_id.toString('hex')\n        }\n      }\n    });\n    \n    if (!user) {\n      user = UserTC.getResolver('createOne').resolve({\n        args: {\n          record: {\n            id: uuid(),\n            joined: moment.utc().toDate()\n          }\n        }\n      })\n    }\n    \n    if (!user) {\n      console.log('No user and couldn\\'t create a new user.');\n      \n      res.redirect('/');\n    }\n    \n    let session = await SessionTC.getResolver('createOne').resolve({\n      args: {\n        record: {\n          id: uuid(),\n          user_id_string: user._id.toString('hex'),\n          persist: true\n        }\n      },\n      projection: {\n        token_string: true,\n        expiration: true\n      }\n    });\n    \n    await UserTC.getResolver('updateOne').resolve({\n      args: {\n        filter: {\n          id: user._id.toString('hex')\n        },\n        record: {\n          is_active: true,\n          last_login: moment().utc().toDate()\n        }\n      }\n    });\n    \n    res.cookie(config.sessions.cookieName, session.token_string, {\n        domain: config.domain,\n        secure: true,\n        httpOnly: true,\n        expires: session.expiration\n    });\n    \n    return user;\n\n  }\n  else {\n\t\t// User is already logged in\n\t\treturn req.user;\n\t}\n}"
      ]
    },
    "mtime": 1521832040081
  },
  "{\"filename\":\"/app/schema/models/sessions.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../../lib/types/uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          },
          {
            "source": "uuid/v4",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "nodeUUID"
              }
            ]
          },
          {
            "source": "./users",
            "imported": [
              "UserTC"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UserTC",
                "local": "UserTC"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "SessionSchema",
            "Session",
            "SessionTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "SessionSchema",
              "exported": "SessionSchema"
            },
            {
              "kind": "local",
              "local": "Session",
              "exported": "Session"
            },
            {
              "kind": "local",
              "local": "SessionTC",
              "exported": "SessionTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/sessions.js",
      "filenameRelative": "/app/schema/models/sessions.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "sessions.js",
      "sourceFileName": "sessions.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "sessions"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SessionTC = exports.Session = exports.SessionSchema = undefined;\n\nvar _uuid = require('../../lib/types/uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _users = require('./users');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst SessionSchema = exports.SessionSchema = new _mongoose2.default.Schema({\n  _id: {\n    type: Buffer\n  },\n  id: {\n    type: String,\n    get: function get() {\n      if (this._id) {\n        return this._id.toString('hex');\n      }\n    },\n    set: function set(val) {\n      if (this._conditions && this._conditions.id) {\n        this._conditions._id = (0, _uuid2.default)(val);\n\n        delete this._conditions.id;\n      }\n\n      this._id = (0, _uuid2.default)(val);\n    }\n  },\n  created: {\n    type: Date\n  },\n  csrf_secret: {\n    type: String\n  },\n  expires: {\n    type: Date\n  },\n  ip: {\n    type: String\n  },\n  meta: {\n    agent: {\n      type: String\n    },\n    browser: {\n      family: {\n        type: String\n      },\n      version: {\n        type: String\n      }\n    },\n    device: {\n      family: {\n        type: String\n      },\n      version: {\n        type: String\n      }\n    },\n    os: {\n      family: {\n        type: String\n      },\n      version: {\n        type: String\n      }\n    }\n  },\n  persist: {\n    type: Boolean\n  },\n  token: {\n    type: String\n  },\n  ttl: {\n    type: Date\n  },\n  user_id: {\n    type: Buffer\n  },\n  user_id_string: {\n    type: String,\n    get: function get() {\n      return this._id.toString('hex');\n    },\n    set: function set(val) {\n      if (val && this._conditions && this._conditions.user_id_string) {\n        this._conditions.user_id = (0, _uuid2.default)(val);\n\n        delete this._conditions.user_id_string;\n      }\n\n      this.user_id = (0, _uuid2.default)(val);\n    }\n  }\n}, {\n  collection: 'sessions'\n});\n\nconst Session = exports.Session = _mongoose2.default.model('Session', SessionSchema);\n\nconst SessionTC = exports.SessionTC = (0, _node2.default)(Session);\n\nSessionTC.addRelation('user', {\n  resolver: () => _users.UserTC.getResolver('findOne'),\n  prepareArgs: {\n    filter: source => ({ id: source.user_id.toString('hex') })\n  },\n  projection: {\n    id: true,\n    is_active: true,\n    user_id: true\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlc3Npb25zLmpzIl0sIm5hbWVzIjpbIlNlc3Npb25TY2hlbWEiLCJTY2hlbWEiLCJfaWQiLCJ0eXBlIiwiQnVmZmVyIiwiaWQiLCJTdHJpbmciLCJnZXQiLCJ0b1N0cmluZyIsInNldCIsInZhbCIsIl9jb25kaXRpb25zIiwiY3JlYXRlZCIsIkRhdGUiLCJjc3JmX3NlY3JldCIsImV4cGlyZXMiLCJpcCIsIm1ldGEiLCJhZ2VudCIsImJyb3dzZXIiLCJmYW1pbHkiLCJ2ZXJzaW9uIiwiZGV2aWNlIiwib3MiLCJwZXJzaXN0IiwiQm9vbGVhbiIsInRva2VuIiwidHRsIiwidXNlcl9pZCIsInVzZXJfaWRfc3RyaW5nIiwiY29sbGVjdGlvbiIsIlNlc3Npb24iLCJtb2RlbCIsIlNlc3Npb25UQyIsImFkZFJlbGF0aW9uIiwicmVzb2x2ZXIiLCJnZXRSZXNvbHZlciIsInByZXBhcmVBcmdzIiwiZmlsdGVyIiwic291cmNlIiwicHJvamVjdGlvbiIsImlzX2FjdGl2ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOzs7O0FBRUE7Ozs7QUFFTyxNQUFNQSx3Q0FBZ0IsSUFBSSxtQkFBU0MsTUFBYixDQUMzQjtBQUNFQyxPQUFLO0FBQ0hDLFVBQU1DO0FBREgsR0FEUDtBQUlFQyxNQUFJO0FBQ0ZGLFVBQU1HLE1BREo7QUFFRkMsU0FBSyxlQUFXO0FBQ2QsVUFBSSxLQUFLTCxHQUFULEVBQWM7QUFDWixlQUFPLEtBQUtBLEdBQUwsQ0FBU00sUUFBVCxDQUFrQixLQUFsQixDQUFQO0FBQ0Q7QUFDRixLQU5DO0FBT0ZDLFNBQUssYUFBU0MsR0FBVCxFQUFjO0FBQ2pCLFVBQUksS0FBS0MsV0FBTCxJQUFvQixLQUFLQSxXQUFMLENBQWlCTixFQUF6QyxFQUE2QztBQUMzQyxhQUFLTSxXQUFMLENBQWlCVCxHQUFqQixHQUF1QixvQkFBS1EsR0FBTCxDQUF2Qjs7QUFFQSxlQUFPLEtBQUtDLFdBQUwsQ0FBaUJOLEVBQXhCO0FBQ0Q7O0FBRUQsV0FBS0gsR0FBTCxHQUFXLG9CQUFLUSxHQUFMLENBQVg7QUFDRDtBQWZDLEdBSk47QUFxQkVFLFdBQVM7QUFDUFQsVUFBTVU7QUFEQyxHQXJCWDtBQXdCRUMsZUFBYTtBQUNYWCxVQUFNRztBQURLLEdBeEJmO0FBMkJFUyxXQUFTO0FBQ1BaLFVBQU1VO0FBREMsR0EzQlg7QUE4QkVHLE1BQUk7QUFDRmIsVUFBTUc7QUFESixHQTlCTjtBQWlDRVcsUUFBTTtBQUNKQyxXQUFPO0FBQ0xmLFlBQU1HO0FBREQsS0FESDtBQUlKYSxhQUFTO0FBQ1BDLGNBQVE7QUFDTmpCLGNBQU1HO0FBREEsT0FERDtBQUlQZSxlQUFTO0FBQ1BsQixjQUFNRztBQURDO0FBSkYsS0FKTDtBQVlKZ0IsWUFBUTtBQUNORixjQUFRO0FBQ05qQixjQUFNRztBQURBLE9BREY7QUFJTmUsZUFBUztBQUNQbEIsY0FBTUc7QUFEQztBQUpILEtBWko7QUFvQkppQixRQUFJO0FBQ0ZILGNBQVE7QUFDTmpCLGNBQU1HO0FBREEsT0FETjtBQUlGZSxlQUFTO0FBQ1BsQixjQUFNRztBQURDO0FBSlA7QUFwQkEsR0FqQ1I7QUE4REVrQixXQUFTO0FBQ1ByQixVQUFNc0I7QUFEQyxHQTlEWDtBQWlFRUMsU0FBTztBQUNMdkIsVUFBTUc7QUFERCxHQWpFVDtBQW9FRXFCLE9BQUs7QUFDSHhCLFVBQU1VO0FBREgsR0FwRVA7QUF1RUVlLFdBQVM7QUFDUHpCLFVBQU1DO0FBREMsR0F2RVg7QUEwRUV5QixrQkFBZ0I7QUFDZDFCLFVBQU1HLE1BRFE7QUFFZEMsU0FBSyxlQUFXO0FBQ2QsYUFBTyxLQUFLTCxHQUFMLENBQVNNLFFBQVQsQ0FBa0IsS0FBbEIsQ0FBUDtBQUNELEtBSmE7QUFLZEMsU0FBSyxhQUFTQyxHQUFULEVBQWM7QUFDakIsVUFBSUEsT0FBTyxLQUFLQyxXQUFaLElBQTJCLEtBQUtBLFdBQUwsQ0FBaUJrQixjQUFoRCxFQUFnRTtBQUM5RCxhQUFLbEIsV0FBTCxDQUFpQmlCLE9BQWpCLEdBQTJCLG9CQUFLbEIsR0FBTCxDQUEzQjs7QUFFQSxlQUFPLEtBQUtDLFdBQUwsQ0FBaUJrQixjQUF4QjtBQUNEOztBQUVELFdBQUtELE9BQUwsR0FBZSxvQkFBS2xCLEdBQUwsQ0FBZjtBQUNEO0FBYmE7QUExRWxCLENBRDJCLEVBMkYzQjtBQUNFb0IsY0FBWTtBQURkLENBM0YyQixDQUF0Qjs7QUFnR0EsTUFBTUMsNEJBQVUsbUJBQVNDLEtBQVQsQ0FBZSxTQUFmLEVBQTBCaEMsYUFBMUIsQ0FBaEI7O0FBRUEsTUFBTWlDLGdDQUFZLG9CQUFvQkYsT0FBcEIsQ0FBbEI7O0FBRVBFLFVBQVVDLFdBQVYsQ0FBc0IsTUFBdEIsRUFBOEI7QUFDNUJDLFlBQVUsTUFBTSxjQUFPQyxXQUFQLENBQW1CLFNBQW5CLENBRFk7QUFFNUJDLGVBQWE7QUFDWEMsWUFBUUMsV0FBVyxFQUFFbEMsSUFBSWtDLE9BQU9YLE9BQVAsQ0FBZXBCLFFBQWYsQ0FBd0IsS0FBeEIsQ0FBTixFQUFYO0FBREcsR0FGZTtBQUs1QmdDLGNBQVk7QUFDVm5DLFFBQUksSUFETTtBQUVWb0MsZUFBVyxJQUZEO0FBR1ZiLGFBQVM7QUFIQztBQUxnQixDQUE5QiIsImZpbGUiOiJzZXNzaW9ucy5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NjaGVtYS9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG5pbXBvcnQgdXVpZCBmcm9tICcuLi8uLi9saWIvdHlwZXMvdXVpZCc7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IGNvbXBvc2VXaXRoTW9uZ29vc2UgZnJvbSAnZ3JhcGhxbC1jb21wb3NlLW1vbmdvb3NlL25vZGU4JztcblxuaW1wb3J0IG5vZGVVVUlEIGZyb20gJ3V1aWQvdjQnO1xuXG5pbXBvcnQgeyBVc2VyVEMgfSBmcm9tICcuL3VzZXJzJztcblxuZXhwb3J0IGNvbnN0IFNlc3Npb25TY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgX2lkOiB7XG4gICAgICB0eXBlOiBCdWZmZXJcbiAgICB9LFxuICAgIGlkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5faWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5faWQudG9TdHJpbmcoJ2hleCcpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmRpdGlvbnMgJiYgdGhpcy5fY29uZGl0aW9ucy5pZCkge1xuICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbnMuX2lkID0gdXVpZCh2YWwpO1xuICAgICAgICAgIFxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jb25kaXRpb25zLmlkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pZCA9IHV1aWQodmFsKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNyZWF0ZWQ6IHtcbiAgICAgIHR5cGU6IERhdGVcbiAgICB9LFxuICAgIGNzcmZfc2VjcmV0OiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIGV4cGlyZXM6IHtcbiAgICAgIHR5cGU6IERhdGVcbiAgICB9LFxuICAgIGlwOiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIG1ldGE6IHtcbiAgICAgIGFnZW50OiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyBcbiAgICAgIH0sXG4gICAgICBicm93c2VyOiB7XG4gICAgICAgIGZhbWlseToge1xuICAgICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgICB9LFxuICAgICAgICB2ZXJzaW9uOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgZGV2aWNlOiB7XG4gICAgICAgIGZhbWlseToge1xuICAgICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgICB9LFxuICAgICAgICB2ZXJzaW9uOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgb3M6IHtcbiAgICAgICAgZmFtaWx5OiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICAgIH0sXG4gICAgICAgIHZlcnNpb246IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBwZXJzaXN0OiB7XG4gICAgICB0eXBlOiBCb29sZWFuXG4gICAgfSxcbiAgICB0b2tlbjoge1xuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSxcbiAgICB0dGw6IHtcbiAgICAgIHR5cGU6IERhdGVcbiAgICB9LFxuICAgIHVzZXJfaWQ6IHtcbiAgICAgIHR5cGU6IEJ1ZmZlclxuICAgIH0sXG4gICAgdXNlcl9pZF9zdHJpbmc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZC50b1N0cmluZygnaGV4JylcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBpZiAodmFsICYmIHRoaXMuX2NvbmRpdGlvbnMgJiYgdGhpcy5fY29uZGl0aW9ucy51c2VyX2lkX3N0cmluZykge1xuICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbnMudXNlcl9pZCA9IHV1aWQodmFsKTtcbiAgICAgICAgICBcbiAgICAgICAgICBkZWxldGUgdGhpcy5fY29uZGl0aW9ucy51c2VyX2lkX3N0cmluZztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy51c2VyX2lkID0gdXVpZCh2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAge1xuICAgIGNvbGxlY3Rpb246ICdzZXNzaW9ucycsXG4gIH1cbik7XG5cbmV4cG9ydCBjb25zdCBTZXNzaW9uID0gbW9uZ29vc2UubW9kZWwoJ1Nlc3Npb24nLCBTZXNzaW9uU2NoZW1hKTtcblxuZXhwb3J0IGNvbnN0IFNlc3Npb25UQyA9IGNvbXBvc2VXaXRoTW9uZ29vc2UoU2Vzc2lvbik7XG5cblNlc3Npb25UQy5hZGRSZWxhdGlvbigndXNlcicsIHtcbiAgcmVzb2x2ZXI6ICgpID0+IFVzZXJUQy5nZXRSZXNvbHZlcignZmluZE9uZScpLFxuICBwcmVwYXJlQXJnczoge1xuICAgIGZpbHRlcjogc291cmNlID0+ICh7IGlkOiBzb3VyY2UudXNlcl9pZC50b1N0cmluZygnaGV4JykgfSksXG4gIH0sXG4gIHByb2plY3Rpb246IHtcbiAgICBpZDogdHJ1ZSxcbiAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgdXNlcl9pZDogdHJ1ZSBcbiAgfSxcbn0pOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "sessions.js"
      ],
      "names": [
        "SessionSchema",
        "Schema",
        "_id",
        "type",
        "Buffer",
        "id",
        "String",
        "get",
        "toString",
        "set",
        "val",
        "_conditions",
        "created",
        "Date",
        "csrf_secret",
        "expires",
        "ip",
        "meta",
        "agent",
        "browser",
        "family",
        "version",
        "device",
        "os",
        "persist",
        "Boolean",
        "token",
        "ttl",
        "user_id",
        "user_id_string",
        "collection",
        "Session",
        "model",
        "SessionTC",
        "addRelation",
        "resolver",
        "getResolver",
        "prepareArgs",
        "filter",
        "source",
        "projection",
        "is_active"
      ],
      "mappings": ";;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AAEO,MAAMA,wCAAgB,IAAI,mBAASC,MAAb,CAC3B;AACEC,OAAK;AACHC,UAAMC;AADH,GADP;AAIEC,MAAI;AACFF,UAAMG,MADJ;AAEFC,SAAK,eAAW;AACd,UAAI,KAAKL,GAAT,EAAc;AACZ,eAAO,KAAKA,GAAL,CAASM,QAAT,CAAkB,KAAlB,CAAP;AACD;AACF,KANC;AAOFC,SAAK,aAASC,GAAT,EAAc;AACjB,UAAI,KAAKC,WAAL,IAAoB,KAAKA,WAAL,CAAiBN,EAAzC,EAA6C;AAC3C,aAAKM,WAAL,CAAiBT,GAAjB,GAAuB,oBAAKQ,GAAL,CAAvB;;AAEA,eAAO,KAAKC,WAAL,CAAiBN,EAAxB;AACD;;AAED,WAAKH,GAAL,GAAW,oBAAKQ,GAAL,CAAX;AACD;AAfC,GAJN;AAqBEE,WAAS;AACPT,UAAMU;AADC,GArBX;AAwBEC,eAAa;AACXX,UAAMG;AADK,GAxBf;AA2BES,WAAS;AACPZ,UAAMU;AADC,GA3BX;AA8BEG,MAAI;AACFb,UAAMG;AADJ,GA9BN;AAiCEW,QAAM;AACJC,WAAO;AACLf,YAAMG;AADD,KADH;AAIJa,aAAS;AACPC,cAAQ;AACNjB,cAAMG;AADA,OADD;AAIPe,eAAS;AACPlB,cAAMG;AADC;AAJF,KAJL;AAYJgB,YAAQ;AACNF,cAAQ;AACNjB,cAAMG;AADA,OADF;AAINe,eAAS;AACPlB,cAAMG;AADC;AAJH,KAZJ;AAoBJiB,QAAI;AACFH,cAAQ;AACNjB,cAAMG;AADA,OADN;AAIFe,eAAS;AACPlB,cAAMG;AADC;AAJP;AApBA,GAjCR;AA8DEkB,WAAS;AACPrB,UAAMsB;AADC,GA9DX;AAiEEC,SAAO;AACLvB,UAAMG;AADD,GAjET;AAoEEqB,OAAK;AACHxB,UAAMU;AADH,GApEP;AAuEEe,WAAS;AACPzB,UAAMC;AADC,GAvEX;AA0EEyB,kBAAgB;AACd1B,UAAMG,MADQ;AAEdC,SAAK,eAAW;AACd,aAAO,KAAKL,GAAL,CAASM,QAAT,CAAkB,KAAlB,CAAP;AACD,KAJa;AAKdC,SAAK,aAASC,GAAT,EAAc;AACjB,UAAIA,OAAO,KAAKC,WAAZ,IAA2B,KAAKA,WAAL,CAAiBkB,cAAhD,EAAgE;AAC9D,aAAKlB,WAAL,CAAiBiB,OAAjB,GAA2B,oBAAKlB,GAAL,CAA3B;;AAEA,eAAO,KAAKC,WAAL,CAAiBkB,cAAxB;AACD;;AAED,WAAKD,OAAL,GAAe,oBAAKlB,GAAL,CAAf;AACD;AAba;AA1ElB,CAD2B,EA2F3B;AACEoB,cAAY;AADd,CA3F2B,CAAtB;;AAgGA,MAAMC,4BAAU,mBAASC,KAAT,CAAe,SAAf,EAA0BhC,aAA1B,CAAhB;;AAEA,MAAMiC,gCAAY,oBAAoBF,OAApB,CAAlB;;AAEPE,UAAUC,WAAV,CAAsB,MAAtB,EAA8B;AAC5BC,YAAU,MAAM,cAAOC,WAAP,CAAmB,SAAnB,CADY;AAE5BC,eAAa;AACXC,YAAQC,WAAW,EAAElC,IAAIkC,OAAOX,OAAP,CAAepB,QAAf,CAAwB,KAAxB,CAAN,EAAX;AADG,GAFe;AAK5BgC,cAAY;AACVnC,QAAI,IADM;AAEVoC,eAAW,IAFD;AAGVb,aAAS;AAHC;AALgB,CAA9B",
      "file": "sessions.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\nimport uuid from '../../lib/types/uuid';\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\n\nimport nodeUUID from 'uuid/v4';\n\nimport { UserTC } from './users';\n\nexport const SessionSchema = new mongoose.Schema(\n  {\n    _id: {\n      type: Buffer\n    },\n    id: {\n      type: String,\n      get: function() {\n        if (this._id) {\n          return this._id.toString('hex');\n        }\n      },\n      set: function(val) {\n        if (this._conditions && this._conditions.id) {\n          this._conditions._id = uuid(val);\n          \n          delete this._conditions.id;\n        }\n        \n        this._id = uuid(val);\n      }\n    },\n    created: {\n      type: Date\n    },\n    csrf_secret: {\n      type: String\n    },\n    expires: {\n      type: Date\n    },\n    ip: {\n      type: String\n    },\n    meta: {\n      agent: {\n        type: String \n      },\n      browser: {\n        family: {\n          type: String\n        },\n        version: {\n          type: String\n        },\n      },\n      device: {\n        family: {\n          type: String\n        },\n        version: {\n          type: String\n        },\n      },\n      os: {\n        family: {\n          type: String\n        },\n        version: {\n          type: String\n        },\n      },\n    },\n    persist: {\n      type: Boolean\n    },\n    token: {\n      type: String\n    },\n    ttl: {\n      type: Date\n    },\n    user_id: {\n      type: Buffer\n    },\n    user_id_string: {\n      type: String,\n      get: function() {\n        return this._id.toString('hex')\n      },\n      set: function(val) {\n        if (val && this._conditions && this._conditions.user_id_string) {\n          this._conditions.user_id = uuid(val);\n          \n          delete this._conditions.user_id_string;\n        }\n        \n        this.user_id = uuid(val);\n      }\n    }\n  },\n  {\n    collection: 'sessions',\n  }\n);\n\nexport const Session = mongoose.model('Session', SessionSchema);\n\nexport const SessionTC = composeWithMongoose(Session);\n\nSessionTC.addRelation('user', {\n  resolver: () => UserTC.getResolver('findOne'),\n  prepareArgs: {\n    filter: source => ({ id: source.user_id.toString('hex') }),\n  },\n  projection: {\n    id: true,\n    is_active: true,\n    user_id: true \n  },\n});"
      ]
    },
    "mtime": 1521832119110
  },
  "{\"filename\":\"/app/schema/models/users.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/schema/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "graphql-compose-mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "composeWithMongoose"
              }
            ]
          },
          {
            "source": "../../lib/types/uuid",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "uuid"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "UserSchema",
            "User",
            "UserTC"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UserSchema",
              "exported": "UserSchema"
            },
            {
              "kind": "local",
              "local": "User",
              "exported": "User"
            },
            {
              "kind": "local",
              "local": "UserTC",
              "exported": "UserTC"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/schema/models/users.js",
      "filenameRelative": "/app/schema/models/users.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "users.js",
      "sourceFileName": "users.js",
      "sourceRoot": "/app/schema/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/schema/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "users"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserTC = exports.User = exports.UserSchema = undefined;\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _node = require('graphql-compose-mongoose');\n\nvar _node2 = _interopRequireDefault(_node);\n\nvar _uuid = require('../../lib/types/uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst AccountTypeSchema = new _mongoose2.default.Schema({\n  language: String,\n  skill: {\n    type: String,\n    enum: ['free', 'plus', 'pro']\n  }\n}, {\n  _id: false\n});\n\nconst AddressSchema = new _mongoose2.default.Schema({\n  street: String,\n  geo: {\n    type: [Number], // [<longitude>, <latitude>]\n    index: '2dsphere' // create the geospatial index\n  }\n});\n\nconst UserSchema = exports.UserSchema = new _mongoose2.default.Schema({\n  meta: {\n    type: Object\n  },\n  _id: {\n    type: Buffer\n  },\n  id: {\n    type: String,\n    get: function get() {\n      return this._id.toString('hex');\n    },\n    set: function set(val) {\n      if (val && this._conditions && this._conditions.id) {\n        this._conditions._id = (0, _uuid2.default)(val);\n\n        delete this._conditions.id;\n      }\n    }\n  },\n  name: {\n    type: String,\n    index: true\n  },\n  is_active: {\n    type: Boolean,\n    index: true\n  },\n  joined: {\n    type: Date,\n    index: false\n  },\n  last_login: {\n    type: Date,\n    index: false\n  },\n  settings: {\n    explorer: {\n      initial_searches: {\n        type: Boolean,\n        index: false\n      }\n    }\n  },\n  social_accounts: {\n    type: Array,\n    index: false\n  },\n  subscriptions: {\n    type: Array,\n    index: false\n  },\n  age: {\n    type: Number,\n    index: true\n  },\n  accountType: {\n    type: [AccountTypeSchema],\n    default: []\n  },\n  contacts: {\n    // another mongoose way for providing embedded documents\n    email: String,\n    phones: [String] // array of strings\n  },\n  gender: {\n    // enum field with values\n    type: String,\n    enum: ['male', 'female', 'ladyboy', 'ai', 'animal', 'mineral', 'other']\n  },\n  address: {\n    type: AddressSchema\n  },\n  otherData: {\n    type: _mongoose2.default.Schema.Types.Mixed,\n    description: 'Some dynamic data'\n  }\n}, {\n  collection: 'users'\n  //     toObject: {\n  //       getters: true,\n  //       transform: function(doc, ret) {\n  //         console.log('Transforming UUID to buffer');\n  //         ret._id = Buffer.from(ret._id, 'hex');\n\n  //         return ret;\n  //      }\n  //     },\n  //     toJSON: {\n  //       getters: true,\n  //       transform: function(doc, ret) {\n  //         console.log('Transforming UUID to string');\n  //         ret._id = ret._id.toString('hex');\n\n  //         return ret;\n  //       }\n  //     }\n});\n\n// UserSchema.virtual('_id')\n//   .set(function(uuid4ID) {\n//     this._id = Buffer.from(uuid4ID, 'hex')[0];;\n//   })\n//   .get(function() {\n//     return this._id.toString('hex');\n//   });\n\nUserSchema.index({ gender: 1, age: -1 });\n\nconst User = exports.User = _mongoose2.default.model('User', UserSchema);\n\nconst UserTC = exports.UserTC = (0, _node2.default)(User);\n\n// UserTC.addFields({\n//   _id: { // extended\n//     type: 'String', // String, Int, Float, Boolean, ID, Json, array []\n//     description: 'uuid4 id',\n//     resolve: (source, args, context, info) => {\n//       return source._id.toString('hex');\n//     },\n//   }\n// });\n\n\n// UserTC.addFields({\n//   id: {\n//     type: 'String', \n//     description: 'uuid4 id',\n//     resolve: (source, args, context, info) => {\n//       return source._id.toString('hex');\n//     },\n//   }\n// });\n\nUserTC.setResolver('findMany', UserTC.getResolver('findMany').addFilterArg({\n  name: 'geoDistance',\n  type: `input GeoDistance {\n      lng: Float!\n      lat: Float!\n      # Distance in meters\n      distance: Float!\n    }`,\n  description: 'Search by distance in meters',\n  query: (rawQuery, value, resolveParams) => {\n    // eslint-disable-line\n    if (!value.lng || !value.lat || !value.distance) return;\n    // read more https://docs.mongodb.com/manual/tutorial/query-a-2dsphere-index/\n    rawQuery['address.geo'] = {\n      $near: {\n        $geometry: {\n          type: 'Point',\n          coordinates: [value.lng, value.lat]\n        },\n        $maxDistance: value.distance // <distance in meters>\n      }\n    };\n  }\n})\n// /* FOR DEBUG */\n//   .debug()\n// /* OR MORE PRECISELY */\n//   .debugParams()\n//   .debugPayload()\n//   .debugExecTime()\n);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbIkFjY291bnRUeXBlU2NoZW1hIiwiU2NoZW1hIiwibGFuZ3VhZ2UiLCJTdHJpbmciLCJza2lsbCIsInR5cGUiLCJlbnVtIiwiX2lkIiwiQWRkcmVzc1NjaGVtYSIsInN0cmVldCIsImdlbyIsIk51bWJlciIsImluZGV4IiwiVXNlclNjaGVtYSIsIm1ldGEiLCJPYmplY3QiLCJCdWZmZXIiLCJpZCIsImdldCIsInRvU3RyaW5nIiwic2V0IiwidmFsIiwiX2NvbmRpdGlvbnMiLCJuYW1lIiwiaXNfYWN0aXZlIiwiQm9vbGVhbiIsImpvaW5lZCIsIkRhdGUiLCJsYXN0X2xvZ2luIiwic2V0dGluZ3MiLCJleHBsb3JlciIsImluaXRpYWxfc2VhcmNoZXMiLCJzb2NpYWxfYWNjb3VudHMiLCJBcnJheSIsInN1YnNjcmlwdGlvbnMiLCJhZ2UiLCJhY2NvdW50VHlwZSIsImRlZmF1bHQiLCJjb250YWN0cyIsImVtYWlsIiwicGhvbmVzIiwiZ2VuZGVyIiwiYWRkcmVzcyIsIm90aGVyRGF0YSIsIlR5cGVzIiwiTWl4ZWQiLCJkZXNjcmlwdGlvbiIsImNvbGxlY3Rpb24iLCJVc2VyIiwibW9kZWwiLCJVc2VyVEMiLCJzZXRSZXNvbHZlciIsImdldFJlc29sdmVyIiwiYWRkRmlsdGVyQXJnIiwicXVlcnkiLCJyYXdRdWVyeSIsInZhbHVlIiwicmVzb2x2ZVBhcmFtcyIsImxuZyIsImxhdCIsImRpc3RhbmNlIiwiJG5lYXIiLCIkZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsIiRtYXhEaXN0YW5jZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsTUFBTUEsb0JBQW9CLElBQUksbUJBQVNDLE1BQWIsQ0FDeEI7QUFDRUMsWUFBVUMsTUFEWjtBQUVFQyxTQUFPO0FBQ0xDLFVBQU1GLE1BREQ7QUFFTEcsVUFBTSxDQUFDLE1BQUQsRUFBUyxNQUFULEVBQWlCLEtBQWpCO0FBRkQ7QUFGVCxDQUR3QixFQVF4QjtBQUNFQyxPQUFLO0FBRFAsQ0FSd0IsQ0FBMUI7O0FBYUEsTUFBTUMsZ0JBQWdCLElBQUksbUJBQVNQLE1BQWIsQ0FBb0I7QUFDeENRLFVBQVFOLE1BRGdDO0FBRXhDTyxPQUFLO0FBQ0hMLFVBQU0sQ0FBQ00sTUFBRCxDQURILEVBQ2E7QUFDaEJDLFdBQU8sVUFGSixDQUVnQjtBQUZoQjtBQUZtQyxDQUFwQixDQUF0Qjs7QUFTTyxNQUFNQyxrQ0FBYSxJQUFJLG1CQUFTWixNQUFiLENBQ3hCO0FBQ0VhLFFBQU07QUFDSlQsVUFBTVU7QUFERixHQURSO0FBSUVSLE9BQUk7QUFDRkYsVUFBTVc7QUFESixHQUpOO0FBT0VDLE1BQUk7QUFDRlosVUFBTUYsTUFESjtBQUVGZSxTQUFLLGVBQVc7QUFDZCxhQUFPLEtBQUtYLEdBQUwsQ0FBU1ksUUFBVCxDQUFrQixLQUFsQixDQUFQO0FBQ0QsS0FKQztBQUtGQyxTQUFLLGFBQVNDLEdBQVQsRUFBYztBQUNqQixVQUFJQSxPQUFPLEtBQUtDLFdBQVosSUFBMkIsS0FBS0EsV0FBTCxDQUFpQkwsRUFBaEQsRUFBb0Q7QUFDbEQsYUFBS0ssV0FBTCxDQUFpQmYsR0FBakIsR0FBdUIsb0JBQUtjLEdBQUwsQ0FBdkI7O0FBRUEsZUFBTyxLQUFLQyxXQUFMLENBQWlCTCxFQUF4QjtBQUNEO0FBQ0Y7QUFYQyxHQVBOO0FBb0JFTSxRQUFNO0FBQ0psQixVQUFNRixNQURGO0FBRUpTLFdBQU87QUFGSCxHQXBCUjtBQXdCRVksYUFBVztBQUNUbkIsVUFBTW9CLE9BREc7QUFFVGIsV0FBTztBQUZFLEdBeEJiO0FBNEJFYyxVQUFRO0FBQ05yQixVQUFNc0IsSUFEQTtBQUVOZixXQUFPO0FBRkQsR0E1QlY7QUFnQ0VnQixjQUFZO0FBQ1Z2QixVQUFNc0IsSUFESTtBQUVWZixXQUFPO0FBRkcsR0FoQ2Q7QUFvQ0VpQixZQUFVO0FBQ1JDLGNBQVU7QUFDUkMsd0JBQWtCO0FBQ2hCMUIsY0FBTW9CLE9BRFU7QUFFaEJiLGVBQU87QUFGUztBQURWO0FBREYsR0FwQ1o7QUE0Q0VvQixtQkFBaUI7QUFDZjNCLFVBQU00QixLQURTO0FBRWZyQixXQUFPO0FBRlEsR0E1Q25CO0FBZ0RFc0IsaUJBQWU7QUFDYjdCLFVBQU00QixLQURPO0FBRWJyQixXQUFPO0FBRk0sR0FoRGpCO0FBb0RFdUIsT0FBSztBQUNIOUIsVUFBTU0sTUFESDtBQUVIQyxXQUFPO0FBRkosR0FwRFA7QUF3REV3QixlQUFhO0FBQ1gvQixVQUFNLENBQUNMLGlCQUFELENBREs7QUFFWHFDLGFBQVM7QUFGRSxHQXhEZjtBQTRERUMsWUFBVTtBQUNSO0FBQ0FDLFdBQU9wQyxNQUZDO0FBR1JxQyxZQUFRLENBQUNyQyxNQUFELENBSEEsQ0FHVTtBQUhWLEdBNURaO0FBaUVFc0MsVUFBUTtBQUNOO0FBQ0FwQyxVQUFNRixNQUZBO0FBR05HLFVBQU0sQ0FBQyxNQUFELEVBQVMsUUFBVCxFQUFtQixTQUFuQixFQUE4QixJQUE5QixFQUFvQyxRQUFwQyxFQUE4QyxTQUE5QyxFQUF5RCxPQUF6RDtBQUhBLEdBakVWO0FBc0VFb0MsV0FBUztBQUNQckMsVUFBTUc7QUFEQyxHQXRFWDtBQXlFRW1DLGFBQVc7QUFDVHRDLFVBQU0sbUJBQVNKLE1BQVQsQ0FBZ0IyQyxLQUFoQixDQUFzQkMsS0FEbkI7QUFFVEMsaUJBQWE7QUFGSjtBQXpFYixDQUR3QixFQStFeEI7QUFDRUMsY0FBWTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBbkJFLENBL0V3QixDQUFuQjs7QUFzR1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUFsQyxXQUFXRCxLQUFYLENBQWlCLEVBQUU2QixRQUFRLENBQVYsRUFBYU4sS0FBSyxDQUFDLENBQW5CLEVBQWpCOztBQUVPLE1BQU1hLHNCQUFPLG1CQUFTQyxLQUFULENBQWUsTUFBZixFQUF1QnBDLFVBQXZCLENBQWI7O0FBRUEsTUFBTXFDLDBCQUFTLG9CQUFvQkYsSUFBcEIsQ0FBZjs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQUUsT0FBT0MsV0FBUCxDQUNFLFVBREYsRUFFRUQsT0FBT0UsV0FBUCxDQUFtQixVQUFuQixFQUErQkMsWUFBL0IsQ0FBNEM7QUFDMUM5QixRQUFNLGFBRG9DO0FBRTFDbEIsUUFBTzs7Ozs7TUFGbUM7QUFRMUN5QyxlQUFhLDhCQVI2QjtBQVMxQ1EsU0FBTyxDQUFDQyxRQUFELEVBQVdDLEtBQVgsRUFBa0JDLGFBQWxCLEtBQW9DO0FBQUU7QUFDM0MsUUFBSSxDQUFDRCxNQUFNRSxHQUFQLElBQWMsQ0FBQ0YsTUFBTUcsR0FBckIsSUFBNEIsQ0FBQ0gsTUFBTUksUUFBdkMsRUFBaUQ7QUFDakQ7QUFDQUwsYUFBUyxhQUFULElBQTBCO0FBQ3hCTSxhQUFPO0FBQ0xDLG1CQUFXO0FBQ1R6RCxnQkFBTSxPQURHO0FBRVQwRCx1QkFBYSxDQUFDUCxNQUFNRSxHQUFQLEVBQVlGLE1BQU1HLEdBQWxCO0FBRkosU0FETjtBQUtMSyxzQkFBY1IsTUFBTUksUUFMZixDQUt5QjtBQUx6QjtBQURpQixLQUExQjtBQVNEO0FBckJ5QyxDQUE1QztBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5QkYiLCJmaWxlIjoidXNlcnMuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zY2hlbWEvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBjb21wb3NlV2l0aE1vbmdvb3NlIGZyb20gJ2dyYXBocWwtY29tcG9zZS1tb25nb29zZS9ub2RlOCc7XG5pbXBvcnQgdXVpZCBmcm9tICcuLi8uLi9saWIvdHlwZXMvdXVpZCc7XG5cbmNvbnN0IEFjY291bnRUeXBlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIGxhbmd1YWdlOiBTdHJpbmcsXG4gICAgc2tpbGw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGVudW06IFsnZnJlZScsICdwbHVzJywgJ3BybyddLFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBfaWQ6IGZhbHNlLFxuICB9XG4pO1xuXG5jb25zdCBBZGRyZXNzU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIHN0cmVldDogU3RyaW5nLFxuICBnZW86IHtcbiAgICB0eXBlOiBbTnVtYmVyXSwgLy8gWzxsb25naXR1ZGU+LCA8bGF0aXR1ZGU+XVxuICAgIGluZGV4OiAnMmRzcGhlcmUnLCAvLyBjcmVhdGUgdGhlIGdlb3NwYXRpYWwgaW5kZXhcbiAgfSxcbn0pO1xuXG5cbmV4cG9ydCBjb25zdCBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIG1ldGE6IHtcbiAgICAgIHR5cGU6IE9iamVjdFxuICAgIH0sXG4gICAgX2lkOntcbiAgICAgIHR5cGU6IEJ1ZmZlclxuICAgIH0sXG4gICAgaWQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZC50b1N0cmluZygnaGV4JylcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBpZiAodmFsICYmIHRoaXMuX2NvbmRpdGlvbnMgJiYgdGhpcy5fY29uZGl0aW9ucy5pZCkge1xuICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbnMuX2lkID0gdXVpZCh2YWwpO1xuICAgICAgICAgIFxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jb25kaXRpb25zLmlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBuYW1lOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBpbmRleDogdHJ1ZSxcbiAgICB9LFxuICAgIGlzX2FjdGl2ZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGluZGV4OiB0cnVlLFxuICAgIH0sXG4gICAgam9pbmVkOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBsYXN0X2xvZ2luOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBzZXR0aW5nczoge1xuICAgICAgZXhwbG9yZXI6IHtcbiAgICAgICAgaW5pdGlhbF9zZWFyY2hlczoge1xuICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgaW5kZXg6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHNvY2lhbF9hY2NvdW50czoge1xuICAgICAgdHlwZTogQXJyYXksXG4gICAgICBpbmRleDogZmFsc2VcbiAgICB9LFxuICAgIHN1YnNjcmlwdGlvbnM6IHtcbiAgICAgIHR5cGU6IEFycmF5LFxuICAgICAgaW5kZXg6IGZhbHNlXG4gICAgfSxcbiAgICBhZ2U6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGluZGV4OiB0cnVlLFxuICAgIH0sXG4gICAgYWNjb3VudFR5cGU6IHtcbiAgICAgIHR5cGU6IFtBY2NvdW50VHlwZVNjaGVtYV0sXG4gICAgICBkZWZhdWx0OiBbXSxcbiAgICB9LCBcbiAgICBjb250YWN0czoge1xuICAgICAgLy8gYW5vdGhlciBtb25nb29zZSB3YXkgZm9yIHByb3ZpZGluZyBlbWJlZGRlZCBkb2N1bWVudHNcbiAgICAgIGVtYWlsOiBTdHJpbmcsXG4gICAgICBwaG9uZXM6IFtTdHJpbmddLCAvLyBhcnJheSBvZiBzdHJpbmdzXG4gICAgfSxcbiAgICBnZW5kZXI6IHtcbiAgICAgIC8vIGVudW0gZmllbGQgd2l0aCB2YWx1ZXNcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGVudW06IFsnbWFsZScsICdmZW1hbGUnLCAnbGFkeWJveScsICdhaScsICdhbmltYWwnLCAnbWluZXJhbCcsICdvdGhlciddLFxuICAgIH0sXG4gICAgYWRkcmVzczoge1xuICAgICAgdHlwZTogQWRkcmVzc1NjaGVtYSxcbiAgICB9LFxuICAgIG90aGVyRGF0YToge1xuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkLFxuICAgICAgZGVzY3JpcHRpb246ICdTb21lIGR5bmFtaWMgZGF0YScsXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNvbGxlY3Rpb246ICd1c2VycycsXG4vLyAgICAgdG9PYmplY3Q6IHtcbi8vICAgICAgIGdldHRlcnM6IHRydWUsXG4vLyAgICAgICB0cmFuc2Zvcm06IGZ1bmN0aW9uIChkb2MsIHJldCkge1xuLy8gICAgICAgICBjb25zb2xlLmxvZygnVHJhbnNmb3JtaW5nIFVVSUQgdG8gYnVmZmVyJyk7XG4vLyAgICAgICAgIHJldC5faWQgPSBCdWZmZXIuZnJvbShyZXQuX2lkLCAnaGV4Jyk7XG5cbi8vICAgICAgICAgcmV0dXJuIHJldDtcbi8vICAgICAgfVxuLy8gICAgIH0sXG4vLyAgICAgdG9KU09OOiB7XG4vLyAgICAgICBnZXR0ZXJzOiB0cnVlLFxuLy8gICAgICAgdHJhbnNmb3JtOiBmdW5jdGlvbiAoZG9jLCByZXQpIHtcbi8vICAgICAgICAgY29uc29sZS5sb2coJ1RyYW5zZm9ybWluZyBVVUlEIHRvIHN0cmluZycpO1xuLy8gICAgICAgICByZXQuX2lkID0gcmV0Ll9pZC50b1N0cmluZygnaGV4Jyk7XG5cbi8vICAgICAgICAgcmV0dXJuIHJldDtcbi8vICAgICAgIH1cbi8vICAgICB9XG4gIH1cbik7XG5cbi8vIFVzZXJTY2hlbWEudmlydHVhbCgnX2lkJylcbi8vICAgLnNldChmdW5jdGlvbiAodXVpZDRJRCkge1xuLy8gICAgIHRoaXMuX2lkID0gQnVmZmVyLmZyb20odXVpZDRJRCwgJ2hleCcpWzBdOztcbi8vICAgfSlcbi8vICAgLmdldChmdW5jdGlvbiAoKSB7XG4vLyAgICAgcmV0dXJuIHRoaXMuX2lkLnRvU3RyaW5nKCdoZXgnKTtcbi8vICAgfSk7XG5cblVzZXJTY2hlbWEuaW5kZXgoeyBnZW5kZXI6IDEsIGFnZTogLTEgfSk7XG5cbmV4cG9ydCBjb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCBVc2VyU2NoZW1hKTtcblxuZXhwb3J0IGNvbnN0IFVzZXJUQyA9IGNvbXBvc2VXaXRoTW9uZ29vc2UoVXNlcik7XG5cbi8vIFVzZXJUQy5hZGRGaWVsZHMoe1xuLy8gICBfaWQ6IHsgLy8gZXh0ZW5kZWRcbi8vICAgICB0eXBlOiAnU3RyaW5nJywgLy8gU3RyaW5nLCBJbnQsIEZsb2F0LCBCb29sZWFuLCBJRCwgSnNvbiwgYXJyYXkgW11cbi8vICAgICBkZXNjcmlwdGlvbjogJ3V1aWQ0IGlkJyxcbi8vICAgICByZXNvbHZlOiAoc291cmNlLCBhcmdzLCBjb250ZXh0LCBpbmZvKSA9PiB7XG4vLyAgICAgICByZXR1cm4gc291cmNlLl9pZC50b1N0cmluZygnaGV4Jyk7XG4vLyAgICAgfSxcbi8vICAgfVxuLy8gfSk7XG5cblxuLy8gVXNlclRDLmFkZEZpZWxkcyh7XG4vLyAgIGlkOiB7XG4vLyAgICAgdHlwZTogJ1N0cmluZycsIFxuLy8gICAgIGRlc2NyaXB0aW9uOiAndXVpZDQgaWQnLFxuLy8gICAgIHJlc29sdmU6IChzb3VyY2UsIGFyZ3MsIGNvbnRleHQsIGluZm8pID0+IHtcbi8vICAgICAgIHJldHVybiBzb3VyY2UuX2lkLnRvU3RyaW5nKCdoZXgnKTtcbi8vICAgICB9LFxuLy8gICB9XG4vLyB9KTtcblxuVXNlclRDLnNldFJlc29sdmVyKFxuICAnZmluZE1hbnknLFxuICBVc2VyVEMuZ2V0UmVzb2x2ZXIoJ2ZpbmRNYW55JykuYWRkRmlsdGVyQXJnKHtcbiAgICBuYW1lOiAnZ2VvRGlzdGFuY2UnLFxuICAgIHR5cGU6IGBpbnB1dCBHZW9EaXN0YW5jZSB7XG4gICAgICBsbmc6IEZsb2F0IVxuICAgICAgbGF0OiBGbG9hdCFcbiAgICAgICMgRGlzdGFuY2UgaW4gbWV0ZXJzXG4gICAgICBkaXN0YW5jZTogRmxvYXQhXG4gICAgfWAsXG4gICAgZGVzY3JpcHRpb246ICdTZWFyY2ggYnkgZGlzdGFuY2UgaW4gbWV0ZXJzJyxcbiAgICBxdWVyeTogKHJhd1F1ZXJ5LCB2YWx1ZSwgcmVzb2x2ZVBhcmFtcykgPT4geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICBpZiAoIXZhbHVlLmxuZyB8fCAhdmFsdWUubGF0IHx8ICF2YWx1ZS5kaXN0YW5jZSkgcmV0dXJuO1xuICAgICAgLy8gcmVhZCBtb3JlIGh0dHBzOi8vZG9jcy5tb25nb2RiLmNvbS9tYW51YWwvdHV0b3JpYWwvcXVlcnktYS0yZHNwaGVyZS1pbmRleC9cbiAgICAgIHJhd1F1ZXJ5WydhZGRyZXNzLmdlbyddID0ge1xuICAgICAgICAkbmVhcjoge1xuICAgICAgICAgICRnZW9tZXRyeToge1xuICAgICAgICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbdmFsdWUubG5nLCB2YWx1ZS5sYXRdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgJG1heERpc3RhbmNlOiB2YWx1ZS5kaXN0YW5jZSwgLy8gPGRpc3RhbmNlIGluIG1ldGVycz5cbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSxcbiAgfSlcbiAgLy8gLyogRk9SIERFQlVHICovXG4gIC8vICAgLmRlYnVnKClcbiAgLy8gLyogT1IgTU9SRSBQUkVDSVNFTFkgKi9cbiAgLy8gICAuZGVidWdQYXJhbXMoKVxuICAvLyAgIC5kZWJ1Z1BheWxvYWQoKVxuICAvLyAgIC5kZWJ1Z0V4ZWNUaW1lKClcbik7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "AccountTypeSchema",
        "Schema",
        "language",
        "String",
        "skill",
        "type",
        "enum",
        "_id",
        "AddressSchema",
        "street",
        "geo",
        "Number",
        "index",
        "UserSchema",
        "meta",
        "Object",
        "Buffer",
        "id",
        "get",
        "toString",
        "set",
        "val",
        "_conditions",
        "name",
        "is_active",
        "Boolean",
        "joined",
        "Date",
        "last_login",
        "settings",
        "explorer",
        "initial_searches",
        "social_accounts",
        "Array",
        "subscriptions",
        "age",
        "accountType",
        "default",
        "contacts",
        "email",
        "phones",
        "gender",
        "address",
        "otherData",
        "Types",
        "Mixed",
        "description",
        "collection",
        "User",
        "model",
        "UserTC",
        "setResolver",
        "getResolver",
        "addFilterArg",
        "query",
        "rawQuery",
        "value",
        "resolveParams",
        "lng",
        "lat",
        "distance",
        "$near",
        "$geometry",
        "coordinates",
        "$maxDistance"
      ],
      "mappings": "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",
      "file": "users.js",
      "sourceRoot": "/app/schema/models",
      "sourcesContent": [
        "/* @flow */\n\nimport mongoose from 'mongoose';\nimport graphqlComposeMongoose from 'graphql-compose-mongoose';\nimport uuid from '../../lib/types/uuid';\n\nconst AccountTypeSchema = new mongoose.Schema(\n  {\n    language: String,\n    skill: {\n      type: String,\n      enum: ['free', 'plus', 'pro'],\n    },\n  },\n  {\n    _id: false,\n  }\n);\n\nconst AddressSchema = new mongoose.Schema({\n  street: String,\n  geo: {\n    type: [Number], // [<longitude>, <latitude>]\n    index: '2dsphere', // create the geospatial index\n  },\n});\n\n\nexport const UserSchema = new mongoose.Schema(\n  {\n    meta: {\n      type: Object\n    },\n    _id:{\n      type: Buffer\n    },\n    id: {\n      type: String,\n      get: function() {\n        return this._id.toString('hex')\n      },\n      set: function(val) {\n        if (val && this._conditions && this._conditions.id) {\n          this._conditions._id = uuid(val);\n          \n          delete this._conditions.id;\n        }\n      }\n    },\n    name: {\n      type: String,\n      index: true,\n    },\n    is_active: {\n      type: Boolean,\n      index: true,\n    },\n    joined: {\n      type: Date,\n      index: false\n    },\n    last_login: {\n      type: Date,\n      index: false\n    },\n    settings: {\n      explorer: {\n        initial_searches: {\n          type: Boolean,\n          index: false\n        }\n      }\n    },\n    social_accounts: {\n      type: Array,\n      index: false\n    },\n    subscriptions: {\n      type: Array,\n      index: false\n    },\n    age: {\n      type: Number,\n      index: true,\n    },\n    accountType: {\n      type: [AccountTypeSchema],\n      default: [],\n    }, \n    contacts: {\n      // another mongoose way for providing embedded documents\n      email: String,\n      phones: [String], // array of strings\n    },\n    gender: {\n      // enum field with values\n      type: String,\n      enum: ['male', 'female', 'ladyboy', 'ai', 'animal', 'mineral', 'other'],\n    },\n    address: {\n      type: AddressSchema,\n    },\n    otherData: {\n      type: mongoose.Schema.Types.Mixed,\n      description: 'Some dynamic data',\n    },\n  },\n  {\n    collection: 'users',\n//     toObject: {\n//       getters: true,\n//       transform: function(doc, ret) {\n//         console.log('Transforming UUID to buffer');\n//         ret._id = Buffer.from(ret._id, 'hex');\n\n//         return ret;\n//      }\n//     },\n//     toJSON: {\n//       getters: true,\n//       transform: function(doc, ret) {\n//         console.log('Transforming UUID to string');\n//         ret._id = ret._id.toString('hex');\n\n//         return ret;\n//       }\n//     }\n  }\n);\n\n// UserSchema.virtual('_id')\n//   .set(function(uuid4ID) {\n//     this._id = Buffer.from(uuid4ID, 'hex')[0];;\n//   })\n//   .get(function() {\n//     return this._id.toString('hex');\n//   });\n\nUserSchema.index({ gender: 1, age: -1 });\n\nexport const User = mongoose.model('User', UserSchema);\n\nexport const UserTC = composeWithMongoose(User);\n\n// UserTC.addFields({\n//   _id: { // extended\n//     type: 'String', // String, Int, Float, Boolean, ID, Json, array []\n//     description: 'uuid4 id',\n//     resolve: (source, args, context, info) => {\n//       return source._id.toString('hex');\n//     },\n//   }\n// });\n\n\n// UserTC.addFields({\n//   id: {\n//     type: 'String', \n//     description: 'uuid4 id',\n//     resolve: (source, args, context, info) => {\n//       return source._id.toString('hex');\n//     },\n//   }\n// });\n\nUserTC.setResolver(\n  'findMany',\n  UserTC.getResolver('findMany').addFilterArg({\n    name: 'geoDistance',\n    type: `input GeoDistance {\n      lng: Float!\n      lat: Float!\n      # Distance in meters\n      distance: Float!\n    }`,\n    description: 'Search by distance in meters',\n    query: (rawQuery, value, resolveParams) => { // eslint-disable-line\n      if (!value.lng || !value.lat || !value.distance) return;\n      // read more https://docs.mongodb.com/manual/tutorial/query-a-2dsphere-index/\n      rawQuery['address.geo'] = {\n        $near: {\n          $geometry: {\n            type: 'Point',\n            coordinates: [value.lng, value.lat],\n          },\n          $maxDistance: value.distance, // <distance in meters>\n        },\n      };\n    },\n  })\n  // /* FOR DEBUG */\n  //   .debug()\n  // /* OR MORE PRECISELY */\n  //   .debugParams()\n  //   .debugPayload()\n  //   .debugExecTime()\n);"
      ]
    },
    "mtime": 1521659680836
  }
}